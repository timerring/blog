<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In my mind, DNS is the key of the internet. I always believe if you control the DNS, you control the Internet world. So let us get started to know the DNS."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="A Brief Introduction to DNS"><meta property="og:description" content="In my mind, DNS is the key of the internet. I always believe if you control the DNS, you control the Internet world. So let us get started to know the DNS."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.timerring.com/posts/a-brief-introduction-to-dns/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-26T21:10:14+08:00"><meta property="article:modified_time" content="2024-12-26T21:10:14+08:00"><title>A Brief Introduction to DNS | timerring</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.e5c400e9a39f7eafc90351230108cdc038497f3b6478689fe605ab3dd006274d.css integrity="sha256-5cQA6aOffq/JA1EjAQjNwDhJfztkeGif5gWrPdAGJ00=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.65c1cb3efe60c5d4e051a523ceee35687c0049e65a361bdebceae2f423f45cd0.js integrity="sha256-ZcHLPv5gxdTgUaUjzu41aHwASeZaNhvevOri9CP0XNA=" crossorigin=anonymous></script>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/favicon.png alt=Logo><span>timerring</span></a></h2><hr><p>Rhythmic trend.</p><div class=book-search><div class=gcse-search></div></div><script async src="https://cse.google.com/cse.js?cx=40782701766144f96"></script><ul><li><a href=/>Dashboard</a></li><li><a href=/posts/>Blogs</a></li><li><a href=/categories/weekly/>Newsletter</a></li><li><a href=/index.xml>RSS</a></li><li><a href=/friends/>Friends</a></li><li><a href=/about/>About</a></li></ul><script>function goToRandomPost(){const e=["/posts/the-logging-best-practice/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script><a class=random onclick=goToRandomPost()>Stroll</a></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>timerring</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#hosts>Hosts</a></li><li><a href=#dns>DNS</a><ul><li><a href=#dhcp>DHCP</a></li><li><a href=#dns-protocol>DNS protocol</a><ul><li><a href=#the-level-of-domain>The level of domain</a></li><li><a href=#domain-name-resource-record>Domain Name Resource Record</a></li><li><a href=#the-type-of-the-record>The type of the record</a></li></ul></li><li><a href=#dns-server>DNS server</a></li><li><a href=#domain-name-resolution>Domain Name Resolution</a></li><li><a href=#caching-mechanism>Caching Mechanism</a></li><li><a href=#dns-leaking>DNS leaking</a></li></ul></li><li><a href=#example-process>Example process</a></li><li><a href=#dig>dig</a></li><li><a href=#whois>whois</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></aside></header><article class=markdown><h1>A Brief Introduction to DNS</h1><h5>December 26, 2024
·
11 min read
<span id=busuanzi_container_page_pv>· Page View: <span id=busuanzi_value_page_pv></span></span></h5><div><a href=/categories/tutorial/ style=color:#000>Tutorial</a></div><div><a href=/tags/network/ style=color:#000>Network</a> <span style=color:#000>|</span>
<a href=/tags/dns/ style=color:#000>DNS</a></div><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2024-12-29-16-24-20.png></p><p class=title-image><i>In 1983, Paul Mockapetris proposed a Domain Name System architecture in RFC 882 and RFC 883.</i></p><blockquote class="book-hint info">If you have any questions, feel free to comment below.</blockquote><hr><p>In my mind, DNS is the key of the internet. I always believe if you control the DNS, you control the Internet world. So let us get started to know the DNS.</p><h2 id=hosts>Hosts
<a class=anchor href=#hosts>#</a></h2><p>Long long ago, if we want to access a computer, we need to know its IP address. But it&rsquo;s hard to remember, and if the computer&rsquo;s IP is changed, we need to notify the others.</p><p>So we need to make a list to map the computer&rsquo;s name to its IP address and save it in every computer as well as updating from a specific computer which to maintain the list. And the list is called <code>hosts</code>.(eg. <code>timerring: 88.88.88.88</code>)
And this is the origin of <a href=https://en.wikipedia.org/wiki/ARPANET target=_blank>ARPANET<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>.</p><p>But with the development of Internet, the number of IP is increasing, the hosts file is too large, and the names will be conflicts. Then comes the DNS.</p><h2 id=dns>DNS
<a class=anchor href=#dns>#</a></h2><p>Paul Mockapetris proposed the Domain Name System in 1983, which is a distributed database that maps domain names to IP addresses.</p><p>So every time we want to access a website, we just need to query the website domain name to the DNS server and get the corresponding IP address.</p><p>We don&rsquo;t need the local hosts records anymore.(The <code>hosts</code> file of the computers are empty.)</p><h3 id=dhcp>DHCP
<a class=anchor href=#dhcp>#</a></h3><p>The ip of DNS server may be dynamic(for residential broadband). Every time you go online, it will be allocated by the gateway, which is so-called <code>DHCP</code> mechanism. (Dynamic Host Configuration Protocol)</p><blockquote><p>And it may be assigned the fixed address. You can check the DNS server ip of your Linux in <code>/etc/resolv.conf</code>.</p></blockquote><h3 id=dns-protocol>DNS protocol
<a class=anchor href=#dns-protocol>#</a></h3><p>First we need a specific rule to ensure the domain name is unique. So just like th e address in real world, from the street to city, the domain also obey the rule <code>home.google.com</code>.</p><h4 id=the-level-of-domain>The level of domain
<a class=anchor href=#the-level-of-domain>#</a></h4><p>So how can the DNS server know the ip of every domain? The answer is hierarchical query.
Look back to the info of query <code>math.stackexchange.com.</code>. There is a pot <code>.</code> in the end, which means the root domain. It is usually omitted.
So the level is as follows:</p><ol><li>root domain: <code>.</code></li><li>top-level domain(TLD): such as <code>.com</code>.</li><li>second-level domain(SLD): This level domain can be registered by user normally.</li><li>host: user can assign the name of host, such as <code>www</code></li></ol><h4 id=domain-name-resource-record>Domain Name Resource Record
<a class=anchor href=#domain-name-resource-record>#</a></h4><p>Every domain has a corresponding record in the DNS, and its format is:</p><pre tabindex=0><code>Domain_name Time_to_live Class Type Value
</code></pre><ul><li><code>Domain_name</code>: The domain name.</li><li><code>Time_to_live</code>: The time to live of the record.</li><li><code>Class</code>: Most of the time is <code>IN</code>(Internet).</li><li><code>Type</code>: The type of the record.</li><li><code>Value</code>: The value of the record.</li></ul><h4 id=the-type-of-the-record>The type of the record
<a class=anchor href=#the-type-of-the-record>#</a></h4><p>The type of the record is as follows:</p><ul><li><code>A</code>: address record, return the IPv4 of domain</li><li><code>AAAA</code>: address record, return the IPv6 of domain</li><li><code>NS</code>: Name server record. Every level of domain has its own NS record. This record point out the server of this level domain. These server know the every record of sublevel of domain.(Authoritative Name Server)</li><li><code>MX</code>: Mail eXchange record: return the server address of receiving email.</li><li><code>CNAME</code>: Canonical Name record: return another domain, which means the domain is a springboard for another domain.</li><li><code>PTR</code>: Pointer Record: PTR is used to check if the ip actually possesses the domain which it claims to.</li></ul><h3 id=dns-server>DNS server
<a class=anchor href=#dns-server>#</a></h3><p>Second, we have the unique domain name, but we query the same DNS server is not realistic. Now we need to split the server according to the top level domain(TLD) to form the <a href=https://en.wikipedia.org/wiki/DNS_zone target=_blank>DNS zone<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>.</p><blockquote><p>eg.
<img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2024-12-26-21-53-18.png alt></p></blockquote><p>Now every zone has a master server and many slave servers to backup and expedite the query. These servers are called <code>Authoritative Name Servers</code>.</p><p>And it save the two types of records:
<img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2024-12-26-21-56-16.png alt></p><ul><li>This zone&rsquo;s domain name resource records.</li><li>This zone&rsquo;s parent DNS and sub-DNS server records(mainly NS records).</li></ul><p>Now you can find that the A and B zone don&rsquo;t have the parent DNS server, so how to ensure they know each other? The answer is the root DNS server <code>.</code>.</p><p>You can find the root DNS server here: <a href=https://root-servers.org/ target=_blank>root DNS server<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>.</p><h3 id=domain-name-resolution>Domain Name Resolution
<a class=anchor href=#domain-name-resolution>#</a></h3><p>Every time you connect to the network, you will get default DNS server(operator provide) or you can use the public DNS, and you query the domain name to the DNS server(so-called <code>local DNS server</code>).</p><ul><li>If the domain name is actually in the same zone, then the local DNS server will return the record directly.</li><li>Else the local DNS server will query the root DNS server(The root domain server is fixed, which is built in the DNS server.) to get the parent DNS server of the domain. And then query the DNS server recursively(eg. <code>www.google.com</code>: <code>.</code>-> <code>com</code> -> <code>google.com</code> -> <code>www.google.com</code> -> <code>xx.xx.xx.xx</code>).</li></ul><h3 id=caching-mechanism>Caching Mechanism
<a class=anchor href=#caching-mechanism>#</a></h3><p>Most of us usually visit the just 20% websites or we may visit the different pages of the same website, so our browser and OS can cache the records of these websites to improve the query efficiency.</p><p>So the <code>Time_to_live</code> segment is used to determine the cache time of the record. For those stable domain eg. <code>google.com</code>, the <code>Time_to_live</code> is set to a large value. And for those who often changes the domain resolution results, the <code>Time_to_live</code> is set to a small value.</p><p>Meanwhile, the DNS server will also cache the records of the domain just as our computer do.</p><h3 id=dns-leaking>DNS leaking
<a class=anchor href=#dns-leaking>#</a></h3><blockquote><p>Check your DNS is leaking or not. <a href=https://ipleak.net/ target=_blank>https://ipleak.net/<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a> It uses the random sub domain to record the last DNS servers to the authorative DNS.</p><p>Besides, check this <a href=https://browserleaks.com/webrtc target=_blank>https://browserleaks.com/webrtc<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a> Avoid the WebRTC, it will leak your public ip because it will send the stun packet via UDP, and the UDP somehow cannot be proxied by the http proxy. But even you use the socks5 proxy, it will still leak ip because the browser like chrome will not give the UDP packet to the proxy. (If you use the tun mode or router proxy, you still need to check the node has the UDP proxy in the configuration.)</p></blockquote><p>The main reason of DNS leaking is that the <strong>DNS request is plaintext</strong>, so every server in the request process will know what you are requesting. If the website you visit does not need to DNS request, then it can directly connect or proxy. But if the website does not hit the rules, it will <strong>send the DNS request locally</strong>. And <strong>the local request will only used to match the rules</strong>(redir-host), so the mode is abandoned by the official.</p><p>Methods to avoid DNS leaking:</p><ul><li>DoH: DNS over HTTPS mainly HTTP/2 443 (RFC 8484)</li><li>DoT: DNS over TLS mainly UDP 853</li><li>Make all requests encrypted and send to remote node, and <strong>let the remote node process all the requests</strong>. (Fake IP mode: have the TCP connection and domain name, the proxy client can easily package it using SOSCKS5 or some other protocol and send to the remote node.)</li></ul><blockquote><p>For more details, you can refer to my blog <a href=/posts/understanding-clash-through-configuration/>Understanding Clash Through Configuration</a>.</p></blockquote><h2 id=example-process>Example process
<a class=anchor href=#example-process>#</a></h2><blockquote><p>To begin with, you should know the OSI model. I have drawn a good image to explain it. You can also read my previous blog <a href=/posts/real-computer-network/>Real Computer Network</a>.<div class=image-desc><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-01-05-14-40-26.png alt="OSI model">
<i>OSI model</i></div></p></blockquote><p>So just imagine the process of go surfing the internet. eg. you query <code>google.com</code> on your browser, and then you get the page, what happened?</p><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-01-05-13-36-48.png alt></p><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-01-05-15-25-59.png alt></p><blockquote><p>In the common case, when you purchase the broadband, the operator will provide you a <code>Fiber - optic Modem</code>, and you will buy a router. The router connects to the internet via PPPoE and get the public <code>WAN</code> ip (in fact still a intranet ip) and the DNS servers ip (common two DNS servers). Your router is as the gateway of your local network, so it will has own local network ip, and it will allocate the ip and DNS server ip to your devices through DHCP(commonly the DNS ip and the gateway ip are all the router&rsquo;s local ip).</p></blockquote><ol><li>Your browser first checks the browser&rsquo;s cache to see if it has the ip of <code>google.com</code>, and then checks the OS&rsquo;s cache(include the host file if there is the mapping relationship). If there isn&rsquo;t, it will send a DNS request.(eg. tell me the ip of <code>google.com</code>)</li><li>In the transport layer, the source port is eg.<code>222</code> and the default destination DNS port is <code>53</code>.</li><li>In the network layer, the source ip is your computer&rsquo;s ip <code>192.168.1.10</code> and the destination ip is the DNS server&rsquo;s ip <code>8.8.8.8</code>. But the DNS ip you cannot find locally, so you need to send the DNS request to the gateway you connect. And because the communication via MAC address in the same network, so it will be processed in data link layer.</li><li>In data link layer, the source MAC address <code>AA-AA-AA-AA</code> is your computer&rsquo;s MAC address and the destination MAC address <code>CC-CC-CC-CC</code> (get through ARP protocol) is the gateway&rsquo;s MAC address.</li><li>Then it will be sent through NIC and in the cable.</li><li>The switch will receive the packet and forward it to the gateway(eg.router).</li><li>In the data link layer of router, router finds the MAC is itself and resolve it pass to the network layer. But it cannot find the DNS <code>8.8.8.8</code> in its routing table, so it will send the packet to the default router(in the public network).</li><li>Before sends to the public network, the router will use NAT to change the source private ip to the public ip(the <code>WAN</code> ip of router).</li><li>In the public network, the routers will find and change the MAC addressed to forward the packet to the next router.</li><li>Then the DNS server will receive the packet, and resolve the packet, in the transport layer, it find the destination port is <code>53</code>, so it knows it is a DNS request. And it resolve the ip of <code>google.com</code> and return the ip.</li><li>And the return process is similar to the request process. Finally, after those, your computer will receive the ip of <code>google.com</code> and request the ip of <code>google.com</code> to obtain the page, and the process is similar as above.</li></ol><blockquote><p>But sometimes, the process won&rsquo;t be so smooth, due to the DNS server is overseas, so the traffic needs to go through the public exit port(except for using the IPLC intranet of ISP). Every packet will be checked, thus causing the DNS pollution（tampers a not exist ip）, TCP reset(sends the <code>RST</code> packet in advance toreject the connection request), block ip or active detection.</p></blockquote><h2 id=dig>dig
<a class=anchor href=#dig>#</a></h2><p>The <code>dig</code> command is a powerful tool used for querying Domain Name System (DNS) servers.</p><p>eg. <code>dig baidu.com</code> which is equivalent to <code>dig a baidu.com</code> (record type is A).</p><pre tabindex=0><code># You will see the query parameters and statistics.
; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; baidu.com
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 17961
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0

# This is the query content `A` record is the abbreviation for address.
;; QUESTION SECTION:
;baidu.com.			IN	A

# This is the answer from server. `6` means that TTL which is the abbreviation of `Time to live`.
;; ANSWER SECTION:
baidu.com.		6	IN	A	198.18.28.63

# This is the conclusion of the query. 
# You can find the DNS of your machine. The #53 means the port, which is the default port of DNS.
;; Query time: 1 msec
;; SERVER: 198.19.0.3#53(198.19.0.3)
;; WHEN: Thu Dec 26 22:50:14 CST 2024
;; MSG SIZE  rcvd: 43
</code></pre><ul><li><code>dig +short baidu.com</code>: Show in brief only get the IP</li><li><code>dig @4.2.2.2 baidu.com</code>: Query through the public DNS server via <code>@DNSserver</code>, such as <code>8.8.8.8</code> of google and <code>4.2.2.2</code> of Level3.</li><li><code>dig ns com</code>: You can query the each level of domain separately.</li><li><code>dig mx github.com</code>: Query the mail server of the domain.</li><li><code>dig -x ip</code>: Query the PTR record of the ip.</li><li><code>dig +trace baidu.com</code>: Show the trace of the query.<ul><li>First list all the root servers, then query these ip for the toplevel and sublevel server.</li><li>But in fact, most of time the server first reply will be cached, and you will just see the cached result (except you are the first user to query a very niche domain, at that time you can actually see the whole process from the root server to the TLD to the SLD to the host). Normally the cache results just like the following:</li></ul></li></ul><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>; &lt;&lt;&gt;&gt; DiG 9.10.6 &lt;&lt;&gt;&gt; +trace baidu.com
</span></span><span style=display:flex><span>;; global options: +cmd
</span></span><span style=display:flex><span>.			221	IN	NS	m.root-servers.net.
</span></span><span style=display:flex><span>.			221	IN	NS	d.root-servers.net.
</span></span><span style=display:flex><span>.			221	IN	NS	h.root-servers.net.
</span></span><span style=display:flex><span>.			221	IN	NS	l.root-servers.net.
</span></span><span style=display:flex><span>.			221	IN	NS	f.root-servers.net.
</span></span><span style=display:flex><span>.			221	IN	NS	g.root-servers.net.
</span></span><span style=display:flex><span>.			221	IN	NS	a.root-servers.net.
</span></span><span style=display:flex><span>.			221	IN	NS	j.root-servers.net.
</span></span><span style=display:flex><span>.			221	IN	NS	b.root-servers.net.
</span></span><span style=display:flex><span>.			221	IN	NS	k.root-servers.net.
</span></span><span style=display:flex><span>.			221	IN	NS	i.root-servers.net.
</span></span><span style=display:flex><span>.			221	IN	NS	c.root-servers.net.
</span></span><span style=display:flex><span>.			221	IN	NS	e.root-servers.net.
</span></span><span style=display:flex><span>;; Received 239 bytes from 198.19.0.3#53(198.19.0.3) in 9 ms
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>baidu.com.		6	IN	A	198.18.28.63
</span></span><span style=display:flex><span>;; Received 43 bytes from 198.18.29.158#53(c.root-servers.net) in 0 ms
</span></span></code></pre></div><p>Above are thirteen root domain server all over the world. <strong>From A.ROOT-SERVERS.NET to M.ROOT-SERVERS.NET</strong>.</p><ul><li><code>dig cname facebook.github.io</code>: The cname is mainly for the internal jump of domain, which provide the server configuration with more convenience. This is transparent to users.</li></ul><pre tabindex=0><code>...

;; ANSWER SECTION:
facebook.github.io. 3370    IN  CNAME   github.map.fastly.net.
github.map.fastly.net.  600 IN  A   103.245.222.133
</code></pre><p>We can see that the CNAME of <code>facebook.github.io</code> points to the <code>github.map.fastly.net</code>, and return the ip of <code>github.map.fastly.net</code>. So when we tend to change the ip, we can directly change the configuration of <code>github.map.fastly.net</code>, there is no need to change the <code>facebook.github.io</code> anymore.</p><p>You cannot set other records anymore after you set CNAME. This will avoid the conflicts with other records because CNAME means a substitute.(eg. test.com and try.com have their own MX records, if the rules are not the same, then there will be some conflicts)</p><h2 id=whois>whois
<a class=anchor href=#whois>#</a></h2><p>Find the register info of domain</p><pre tabindex=0><code>whois github.com
</code></pre><blockquote><p>Pay attention to the similar command <code>whoami</code> which is used to check the user name of system.</p></blockquote><p>Reference:</p><ul><li><a href=https://www.rfc-editor.org/rfc/rfc883.html target=_blank>https://www.rfc-editor.org/rfc/rfc883.html<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://viewdns.info/ target=_blank>https://viewdns.info/<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://www.ruanyifeng.com/blog/2016/06/dns.html target=_blank>https://www.ruanyifeng.com/blog/2016/06/dns.html<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://www.petekeen.net/dns-the-good-parts/ target=_blank>https://www.petekeen.net/dns-the-good-parts/<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://selfboot.cn/2015/11/05/dns_theory/ target=_blank>https://selfboot.cn/2015/11/05/dns_theory/<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href="https://www.youtube.com/watch?v=GQg5JIQIjgk" target=_blank>https://www.youtube.com/watch?v=GQg5JIQIjgk<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://blog.skk.moe/post/what-happend-to-dns-in-proxy/ target=_blank>https://blog.skk.moe/post/what-happend-to-dns-in-proxy/<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li></ul><h2>Related readings</h2><ul><li><a href="/posts/real-computer-network/?utm_source=related">Real Computer Network</a></li></ul><hr><div class=post-nav><a href="https://blog.timerring.com/posts/real-computer-network/?utm_source=nav">&lt;&lt; prev | Real Computer...</a>
<a onclick=goToRandomPost() style=cursor:pointer>Continue strolling</a>
<a href="https://blog.timerring.com/posts/understanding-clash-through-configuration/?utm_source=nav">Understanding... ｜ next >></a></div><hr>If you find this blog useful and want to support my blog, need my skill for something, or have a coffee chat with me, feel free to:<div class=support><a href=https://ko-fi.com/polls/What-is-the-custom-topic-for-the-next-month-C0C219LHQJ class=book-btn target=_blank>Subscribe to participate in blog topics and custom services</a>
<a href=https://ko-fi.com/timerring class=book-btn target=_blank>Buy me a coffee</a></div><div style=margin-bottom:8px></div><script>function goToRandomPost(){const e=["/posts/the-logging-best-practice/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script></article><div class=book-comments><div class="book-tabs-content markdown-inner"><div id=tcomment></div><script src=https://giscus.app/client.js data-repo=timerring/blog data-repo-id=R_kgDONeZYZg data-category=Announcements data-category-id=DIC_kwDONeZYZs4ClRWs data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div></div><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><div class=busuanzi-footer><p style=text-align:center>&copy; 2022 - present <a href=https://github.com/timerring>timerring</a> | PV: <span id=busuanzi_value_site_pv></span> | UV: <span id=busuanzi_value_site_uv></span></p></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#hosts>Hosts</a></li><li><a href=#dns>DNS</a><ul><li><a href=#dhcp>DHCP</a></li><li><a href=#dns-protocol>DNS protocol</a><ul><li><a href=#the-level-of-domain>The level of domain</a></li><li><a href=#domain-name-resource-record>Domain Name Resource Record</a></li><li><a href=#the-type-of-the-record>The type of the record</a></li></ul></li><li><a href=#dns-server>DNS server</a></li><li><a href=#domain-name-resolution>Domain Name Resolution</a></li><li><a href=#caching-mechanism>Caching Mechanism</a></li><li><a href=#dns-leaking>DNS leaking</a></li></ul></li><li><a href=#example-process>Example process</a></li><li><a href=#dig>dig</a></li><li><a href=#whois>whois</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></div></aside></main></body></html>