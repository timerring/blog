<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Frankly speaking, the first time I heard about Cloudflare is the service so called Cloudflare WARP which is provided by Cloudflare. Nowadays, you must have heard the fastest and private network can be provided by Cloudflare. If I say Cloudflare achieves the fastest object by the first step to visiting any website, the world’s fastest public DNS 1.1.1.1. You can probably guess the private provider, yes, that is Cloudflare WARP. So this article I will introduce the Cloudflare WARP  further zero trust and how to use it."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta name=keywords content="What is Cloudflare WARP,Why we use Cloudflare WARP,What is the principle of Cloudflare WARP,Why use UDP to wrap the TCP message?,Scenario,UDP,WARP+,Teams,About the privacy"><meta property="og:url" content="https://blogs.timerring.com/posts/cloudflare-warp/"><meta property="og:site_name" content="timerring"><meta property="og:title" content="Cloudflare Warp"><meta property="og:description" content="Frankly speaking, the first time I heard about Cloudflare is the service so called Cloudflare WARP which is provided by Cloudflare. Nowadays, you must have heard the fastest and private network can be provided by Cloudflare. If I say Cloudflare achieves the fastest object by the first step to visiting any website, the world’s fastest public DNS 1.1.1.1. You can probably guess the private provider, yes, that is Cloudflare WARP. So this article I will introduce the Cloudflare WARP further zero trust and how to use it."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-06-06T14:52:52+08:00"><meta property="article:tag" content="Network"><meta property="article:tag" content="Cloudflare"><meta property="article:tag" content="CDN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-07-21-20-06.png"><meta itemprop=name content="Cloudflare Warp"><meta itemprop=description content="Frankly speaking, the first time I heard about Cloudflare is the service so called Cloudflare WARP which is provided by Cloudflare. Nowadays, you must have heard the fastest and private network can be provided by Cloudflare. If I say Cloudflare achieves the fastest object by the first step to visiting any website, the world’s fastest public DNS 1.1.1.1. You can probably guess the private provider, yes, that is Cloudflare WARP. So this article I will introduce the Cloudflare WARP further zero trust and how to use it."><meta itemprop=datePublished content="2025-06-06T14:52:52+08:00"><meta itemprop=dateModified content="2025-06-06T14:52:52+08:00"><meta itemprop=wordCount content="1455"><meta itemprop=image content="https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-07-21-20-06.png"><meta itemprop=keywords content="Network,Cloudflare,CDN"><meta name=twitter:image content="https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-07-21-20-06.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Cloudflare Warp"><meta name=twitter:description content="Frankly speaking, the first time I heard about Cloudflare is the service so called Cloudflare WARP which is provided by Cloudflare. Nowadays, you must have heard the fastest and private network can be provided by Cloudflare. If I say Cloudflare achieves the fastest object by the first step to visiting any website, the world’s fastest public DNS 1.1.1.1. You can probably guess the private provider, yes, that is Cloudflare WARP. So this article I will introduce the Cloudflare WARP further zero trust and how to use it."><meta name=twitter:site content="@imjohnhowe"><link rel=canonical href=https://blogs.timerring.com/posts/cloudflare-warp/><title>Cloudflare Warp | timerring</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.8303cd57a11df7103b3f8d3a5b0a3f4efed92228d8bbf06b228f20e732b66ae8.css integrity="sha256-gwPNV6Ed9xA7P406Wwo/Tv7ZIijYu/BrIo8g5zK2aug=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.18e67ab8975dfb6af9faea9fc39d7ffe4a1db21754ec37f58d9a47962e17231d.js integrity="sha256-GOZ6uJdd+2r5+uqfw51//kodshdU7Df1jZpHli4XIx0=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-H5Y60NE14Z"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-H5Y60NE14Z")</script><script defer src=/live-photo.min.efe7b2a516404d0718a4c6f90d2eb2f9c0bd8c7bddd382958716bcb24b660970.js integrity="sha256-7+eypRZATQcYpMb5DS6y+cC9jHvd04KVhxa8sktmCXA=" crossorigin=anonymous></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1347694832132708" crossorigin=anonymous></script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "1c9fd91e4f1e4b4c814990409a359c33"}'></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?593f393f7a592051b82491c0361d38a9",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta name=referrer content="no-referrer-when-downgrade"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css><meta name=msvalidate.01 content="5A88C236DD66D6E12DE1CA70A1E7BFE4"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/favicon.png alt=Logo><span>timerring</span></a></h2><hr><p>Rhythmic trend.</p><div class=book-search><div class=gcse-search></div></div><script async src="https://cse.google.com/cse.js?cx=40782701766144f96"></script><ul><li><a href=/>Dashboard</a></li><li><a href=/posts/>Blogs</a></li><li><a href=/categories/weekly/>Newsletter</a></li><li><a href=/index.xml>RSS</a></li><li><a href=/friends/>Friends</a></li><li><a href=/about/>About</a></li></ul><script>function goToRandomPost(){const e=["/posts/erc-8004-trustless-agents/?utm_source=random","/posts/fix-the-ghost-notification-of-github/?utm_source=random","/posts/disable-SIP-on-Macos/?utm_source=random","/posts/the-tips-of-macos-automator/?utm_source=random","/posts/mainland-network-circuits/?utm_source=random","/posts/cloudflare-warp/?utm_source=random","/posts/the-principle-of-cloudflare-saas-optimization/?utm_source=random","/posts/the-mitm-and-https-capturing/?utm_source=random","/posts/how-to-keep-your-mac-always-awake/?utm_source=random","/posts/the-way-to-get-cookie/?utm_source=random","/posts/how-to-choose-the-right-software-and-creative-license/?utm_source=random","/posts/0516-add-live-photo-effect-to-hugo/?utm_source=random","/posts/the-practice-of-resolving-domain/?utm_source=random","/posts/hidden-markov-models/?utm_source=random","/posts/markov-chains/?utm_source=random","/posts/markov-processes/?utm_source=random","/posts/0418-find-the-formula-rendering-issue-of-hugo/?utm_source=random","/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/stock-prices/?utm_source=random","/posts/possion-processes/?utm_source=random","/posts/docker-with-gpu/?utm_source=random","/posts/stochastic-processes/?utm_source=random","/posts/some-useful-tools/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-walks/?utm_source=random","/posts/sequences-of-random-variables/?utm_source=random","/posts/parameter-estimation/?utm_source=random","/posts/two-random-variables/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/some-useful-commands-to-share/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random","/posts/my-must-haves-for-macos-memo/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script><a class=random onclick=goToRandomPost()>Stroll</a></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>timerring</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#what-is-cloudflare-warp>What is Cloudflare WARP</a></li><li><a href=#why-we-use-cloudflare-warp>Why we use Cloudflare WARP</a></li><li><a href=#what-is-the-principle-of-cloudflare-warp>What is the principle of Cloudflare WARP</a><ul><li><a href=#why-use-udp-to-wrap-the-tcp-message>Why use UDP to wrap the TCP message?</a><ul><li><a href=#scenario>Scenario</a></li><li><a href=#udp>UDP</a></li></ul></li></ul></li><li><a href=#warp>WARP+</a></li><li><a href=#teams>Teams</a></li><li><a href=#about-the-privacy>About the privacy</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></aside></header><article class=markdown><h1>Cloudflare Warp</h1><h5>June 6, 2025
·
7 min read</h5><div><a href=/categories/tutorial/ style=color:#000>Tutorial</a></div><div><a href=/tags/network/ style=color:#000>Network</a> <span style=color:#000>| </span><a href=/tags/cloudflare/ style=color:#000>Cloudflare</a> <span style=color:#000>| </span><a href=/tags/cdn/ style=color:#000>CDN</a></div><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-07-21-20-06.png></p><p class=title-image><i>The warp+ service in Cloudflare</i></p><blockquote class="book-hint info">If you have any questions, feel free to comment below. Click the block can copy the code.<br>And if you think it's helpful to you, just click on the ads which can support this site. Thanks!</blockquote><hr><p>Frankly speaking, the first time I heard about Cloudflare is the service so called Cloudflare WARP which is provided by Cloudflare. Nowadays, you must have heard the fastest and private network can be provided by Cloudflare. If I say Cloudflare achieves the fastest object by the first step to visiting any website, the world’s fastest public DNS <code>1.1.1.1</code>. You can probably guess the private provider, yes, that is Cloudflare <code>WARP</code>. So this article I will introduce the Cloudflare WARP further zero trust and how to use it.</p><h2 id=what-is-cloudflare-warp>What is Cloudflare WARP
<a class=anchor href=#what-is-cloudflare-warp>#</a></h2><p>Actually you can recognize it as a VPN application, it based on the WireGuard protocol, and it is called as <code>BoringTun</code>.</p><h2 id=why-we-use-cloudflare-warp>Why we use Cloudflare WARP
<a class=anchor href=#why-we-use-cloudflare-warp>#</a></h2><p>Through the WARP, your traffic will be encrypted and sent to Cloudflare&rsquo;s network, and then be sent to the destination server, ensuring that no one in between is snooping on what you&rsquo;re doing.</p><p>Besides, if the destination is also cloudflare customer, the resources will be returned immediately through cdn network.Otherwise, for the WARP+ will use Argo Smart Routing to visit data center fastest.</p><blockquote><p>Basically, the connect between app and website is encrypted, but the process that lookup for the DNS is not.To address this issue, you might use the DNSoverHTTPS or TLS to encrypt the DNS lookup process. If you are not familiar with these, you can refer to my previous article <a href=https://blog.timerring.com/posts/a-brief-introduction-to-dns/ target=_blank rel="nofollow noopener">A brief introduction to DNS</a><sup><a href=#ref-link-1 class=footnote-ref id=ref-link-back-1>[1]</a></sup>。</p></blockquote><h2 id=what-is-the-principle-of-cloudflare-warp>What is the principle of Cloudflare WARP
<a class=anchor href=#what-is-the-principle-of-cloudflare-warp>#</a></h2><p>In short, cf routers listen on Anycast IP addresses which are advertised over the public Internet. So for the user connects to the resources hosted on Cloudflare, each networking device their packets pass through will choose the shortest path to the nearest Cloudflare data center.</p><p>The connection process will use the WireGuard protocol to encrypt the traffic. <strong>Because the WireGuard is based on the UDP protocol, it uses a session key negotiated with public-key encryption to secure the contents of that UDP packet.</strong></p><p>Basically, you can reckon that the WARP is <strong>the TCP message is wrapped by the encrypted UDP packet.</strong></p><h3 id=why-use-udp-to-wrap-the-tcp-message>Why use UDP to wrap the TCP message?
<a class=anchor href=#why-use-udp-to-wrap-the-tcp-message>#</a></h3><p>The reason for the solution is based on the trade-off between the performance and the stability.</p><p>As we know that, for most communication, we use the TCP protocol. The TCP protocol is reliable, orderly. It introduces the concept of port.</p><h4 id=scenario>Scenario
<a class=anchor href=#scenario>#</a></h4><p>Imagine that, if you send a search request to the google. What it happens? I think most people who learned the network course will know that, is you send a TCP packet from your device port(say that ip:12.34.56.78, port:52111) to the google server(eg. ip:198.41.215.162, port:443 https).</p><p>However, that is the very ideal scenario. The ipv4 address is already allocated up. So there won&rsquo;t be many address for every one. Then the ISP introduces the NAT(Network Address Translation) to solve the problem.</p><p>Here, I really recommend the image which is from <a href=https://blog.cloudflare.com/warp-technical-challenges/ target=_blank rel="nofollow noopener">the Cloudflare&rsquo;s blog</a><sup><a href=#ref-link-2 class=footnote-ref id=ref-link-back-2>[2]</a></sup>.</p><p><div class=image-desc><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-07-16-39-05.png alt=NAT>
<i>NAT</i></div></p><p>As you can see, the NAT router will allocate a local address and port for your device, then forward your request to the destination using the router public ip and port, also the router will reserve the mapping between your device local ip port with destination ip and port. Every time your send request, the router will replace the request&rsquo;s source ip and port, and when you receive the response, the router will replace the response&rsquo;s destination ip and port with your local ip and port.</p><p>However, that&rsquo;s the problem, for the WARP session, the process will last at least 30 seconds. But when the session is outdated, the router will delete the mapping, and wait for the next request. You may be curious about why the cloudflare not use the TCP Long Connection?</p><p>Don&rsquo;t forget, exactly the long connection can resolve the problem somehow, but most of the usage is on the mobile device, if there is always a Keep-Alive message which is sent by your mobile device, your battery will be consumed more. I think it&rsquo;s the same situation that you will never expect your phone always in the streaming or a live show. Besides, your connection will be always changed, if you change your data from wifi to cellular, the connection has to be re-established.</p><h4 id=udp>UDP
<a class=anchor href=#udp>#</a></h4><p>We know that UDP is the protocol designed for the real-time communication. It&rsquo;s not reliable, not orderly. But it&rsquo;s fast. So the solution that using UDP to wrap the TCP message is the best choice. UDP for the connection, and TCP for the message reliable.(If the UDP packet is lost, then resend. This will be more efficient than TCP on TCP encryption.)</p><p>The WireGuard is based on the UDP protocol. It uses a session key negotiated with public-key encryption to secure the contents of that UDP packet. To make cloudflare load balancing technique work though there is needed a way to identify which client a WARP packet was associated with before it could be decrypted.</p><p>So before you can decrypt the contents, what you can check are the ip header, the UDP header, and the WireGuard header. Actually we cannot get the four pieces of information(src ip port, dst ip port). So we have to find a way to identify the client. The WireGuard header is as follows:</p><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-07-17-47-47.png alt></p><p>The cloudflare use the reserved bytes to be the client id, which is generated by the cloudflare auth server. Also its only 3 bytes, around 24 bits, which is not enough for all the client, but that&rsquo;s not a track usage, just as the mapping in the router, so these bytes are enough for loading the balance.</p><p>For the technical details, I strongly recommend the <a href=https://blog.cloudflare.com/warp-technical-challenges/ target=_blank rel="nofollow noopener">The Technical Challenges of Building Cloudflare WARP</a><sup><a href=#ref-link-3 class=footnote-ref id=ref-link-back-3>[3]</a></sup>.</p><h2 id=warp>WARP+
<a class=anchor href=#warp>#</a></h2><p>So what is the difference between WARP and WARP+? I find <a href=https://blog.skk.moe/post/something-about-cf-warp/ target=_blank rel="nofollow noopener">a example</a><sup><a href=#ref-link-4 class=footnote-ref id=ref-link-back-4>[4]</a></sup> can explain it.</p><p>Normally, when the user send a request, and visit the origin server, and if the request not hit the cdn, so the cdn data center needs to forward the request the origin server.</p><p>In the example, the user sends a request from hk to the server in sgp. And the request not hit the cdn cache, so the data center(which is hit by user) sends the request to the origin server. <strong>In short, in warp, the request to the origin server is sent by the data center which first hit by the user.</strong></p><p>And the same request, if in the WARP+, as the user tries, the request is sent by the data center which is nearest to the origin server(in other words, <strong>the distance between the nearest data center and the hit data center(initial data center) is using the cloudflare own line</strong> which is called as <a href=https://www.cloudflare.com/application-services/products/argo-smart-routing/ target=_blank rel="nofollow noopener">Argo</a><sup><a href=#ref-link-5 class=footnote-ref id=ref-link-back-5>[5]</a></sup>, the best router).</p><p><div class=image-desc><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-07-21-20-06.png alt="The WARP+ ">
<i>The WARP+</i></div></p><h2 id=teams>Teams
<a class=anchor href=#teams>#</a></h2><p>In cloudflare, you can create a team, through which you will have 50 seats to use the WARP+ service for free (precisely speaking, that is WARP for team).</p><p>When you use the Cloudflare zero trust warp for teams, your ip will be the initial data center(first hit) of the Cloudflare. Here, when I connect to the warp in shenzhen, the ip address request to the target website displayed is the shanghai data center ip of Cloudflare.</p><blockquote><p>In mainland, you probably sometimes have certain chance to connect warp server. If you encounter some error, you can refer to the <a href=https://developers.cloudflare.com/cloudflare-one/connections/connect-devices/warp/troubleshooting/client-errors/#CF_HAPPY_EYEBALLS_MITM_FAILURE target=_blank rel="nofollow noopener">troubleshooting</a><sup><a href=#ref-link-6 class=footnote-ref id=ref-link-back-6>[6]</a></sup> for more details.</p></blockquote><h2 id=about-the-privacy>About the privacy
<a class=anchor href=#about-the-privacy>#</a></h2><p>Now, you must have learned a lot from the example above. You may be curious about that since your request is forwarded by the proxy server in cloudflare data center, so will the proxy server expose your real ip address?</p><p>As the cloudflare blog <a href=https://blog.cloudflare.com/announcing-warp-plus/ target=_blank rel="nofollow noopener">WARP is here (sorry it took so long)</a><sup><a href=#ref-link-7 class=footnote-ref id=ref-link-back-7>[7]</a></sup> says: <em>From a technical perspective, WARP is a VPN. But it is designed for a very different audience than a traditional VPN. WARP is not designed to allow you to access geo-restricted content when you’re traveling. It will not hide your IP address from the websites you visit.</em></p><p>But as we have analyzed above, only the communication between you and the cloudflare is encrypted by the WireGuard protocol. Actually your request will be sent to the origin server, if the origin server:</p><ul><li>is a cloudflare customer: your ip might be provided by the cloudflare.</li><li>is not a cloudflare customer: the tcp connection will be the cloudflare proxy server and the origin server, so the origin server will not know your real ip address.</li></ul><p>You can try this website: <a href=https://www.cloudflare.com/cdn-cgi/trace target=_blank rel="nofollow noopener">https://www.cloudflare.com/cdn-cgi/trace</a><sup><a href=#ref-link-8 class=footnote-ref id=ref-link-back-8>[8]</a></sup> to check if your ip is using warp.</p><p>Then you can request the website to check if the website is hosted on cloudflare. Some website on the cloudflare will display your real ip address. But for those don&rsquo;t, it will only display the cloudflare ip address.</p><div class=footnotes role=doc-endnotes><h3>References</h3><ol><li id=ref-link-1><a href=https://blog.timerring.com/posts/a-brief-introduction-to-dns/ target=_blank rel="nofollow noopener">https://blog.timerring.com/posts/a-brief-introduction-to-dns/</a>
<a href=#ref-link-back-1 class=footnote-backref role=doc-backlink>↩︎</a></li><li id=ref-link-2><a href=https://blog.cloudflare.com/warp-technical-challenges/ target=_blank rel="nofollow noopener">https://blog.cloudflare.com/warp-technical-challenges/</a>
<a href=#ref-link-back-2 class=footnote-backref role=doc-backlink>↩︎</a></li><li id=ref-link-3><a href=https://blog.cloudflare.com/warp-technical-challenges/ target=_blank rel="nofollow noopener">https://blog.cloudflare.com/warp-technical-challenges/</a>
<a href=#ref-link-back-3 class=footnote-backref role=doc-backlink>↩︎</a></li><li id=ref-link-4><a href=https://blog.skk.moe/post/something-about-cf-warp/ target=_blank rel="nofollow noopener">https://blog.skk.moe/post/something-about-cf-warp/</a>
<a href=#ref-link-back-4 class=footnote-backref role=doc-backlink>↩︎</a></li><li id=ref-link-5><a href=https://www.cloudflare.com/application-services/products/argo-smart-routing/ target=_blank rel="nofollow noopener">https://www.cloudflare.com/application-services/products/argo-smart-routing/</a>
<a href=#ref-link-back-5 class=footnote-backref role=doc-backlink>↩︎</a></li><li id=ref-link-6><a href=https://developers.cloudflare.com/cloudflare-one/connections/connect-devices/warp/troubleshooting/client-errors/#CF_HAPPY_EYEBALLS_MITM_FAILURE target=_blank rel="nofollow noopener">https://developers.cloudflare.com/cloudflare-one/connections/connect-devices/warp/troubleshooting/client-errors/#CF_HAPPY_EYEBALLS_MITM_FAILURE</a>
<a href=#ref-link-back-6 class=footnote-backref role=doc-backlink>↩︎</a></li><li id=ref-link-7><a href=https://blog.cloudflare.com/announcing-warp-plus/ target=_blank rel="nofollow noopener">https://blog.cloudflare.com/announcing-warp-plus/</a>
<a href=#ref-link-back-7 class=footnote-backref role=doc-backlink>↩︎</a></li><li id=ref-link-8><a href=https://www.cloudflare.com/cdn-cgi/trace target=_blank rel="nofollow noopener">https://www.cloudflare.com/cdn-cgi/trace</a>
<a href=#ref-link-back-8 class=footnote-backref role=doc-backlink>↩︎</a></li></ol></div><br><h2>Related readings</h2><ul><li><a href="/posts/the-principle-of-cloudflare-saas-optimization/?utm_source=related">The principle of Cloudflare SaaS Optimization</a></li><li><a href="/posts/the-mitm-and-https-capturing/?utm_source=related">The MitM and HTTPS Capturing</a></li><li><a href="/posts/the-practice-of-resolving-domain/?utm_source=related">The Practice of Resolving Domain</a></li><li><a href="/posts/the-iftop/?utm_source=related">The Iftop</a></li><li><a href="/posts/the-method-to-manage-traffic/?utm_source=related">The Method to Manage Traffic</a></li></ul><hr><div class=post-nav><a href="https://blogs.timerring.com/posts/the-principle-of-cloudflare-saas-optimization/?utm_source=nav">&lt;&lt; prev | The principle...</a>
<a onclick=goToRandomPost() style=cursor:pointer>Continue strolling
</a><a href="https://blogs.timerring.com/posts/mainland-network-circuits/?utm_source=nav">Mainland... ｜ next >></a></div><hr>If you want to follow my updates, or have a coffee chat with me, feel free to connect with me:<div class=support><a href=https://github.com/timerring class=book-btn target=_blank><i class="bi bi-github"></i>
Follow @timerring
</a><a href=https://x.com/imjohnhowe class=book-btn target=_blank><i class="bi bi-twitter-x"></i>
@imjohnhowe
</a><a href=https://www.zhihu.com/people/timerring class=book-btn target=_blank>知乎@timerring
</a><a href=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-05-17-20-54.png class=book-btn target=_blank><i class="bi bi-wechat"></i>
Official Account</a></div><div style=margin-bottom:8px></div><script>function goToRandomPost(){const e=["/posts/erc-8004-trustless-agents/?utm_source=random","/posts/fix-the-ghost-notification-of-github/?utm_source=random","/posts/disable-SIP-on-Macos/?utm_source=random","/posts/the-tips-of-macos-automator/?utm_source=random","/posts/mainland-network-circuits/?utm_source=random","/posts/cloudflare-warp/?utm_source=random","/posts/the-principle-of-cloudflare-saas-optimization/?utm_source=random","/posts/the-mitm-and-https-capturing/?utm_source=random","/posts/how-to-keep-your-mac-always-awake/?utm_source=random","/posts/the-way-to-get-cookie/?utm_source=random","/posts/how-to-choose-the-right-software-and-creative-license/?utm_source=random","/posts/0516-add-live-photo-effect-to-hugo/?utm_source=random","/posts/the-practice-of-resolving-domain/?utm_source=random","/posts/hidden-markov-models/?utm_source=random","/posts/markov-chains/?utm_source=random","/posts/markov-processes/?utm_source=random","/posts/0418-find-the-formula-rendering-issue-of-hugo/?utm_source=random","/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/stock-prices/?utm_source=random","/posts/possion-processes/?utm_source=random","/posts/docker-with-gpu/?utm_source=random","/posts/stochastic-processes/?utm_source=random","/posts/some-useful-tools/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-walks/?utm_source=random","/posts/sequences-of-random-variables/?utm_source=random","/posts/parameter-estimation/?utm_source=random","/posts/two-random-variables/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/some-useful-commands-to-share/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random","/posts/my-must-haves-for-macos-memo/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script></article><ins class=adsbygoogle style=display:block data-ad-format=fluid data-ad-layout-key=-c2+7a+0+1 data-ad-client=ca-pub-1347694832132708 data-ad-slot=5778132754></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><div class="book-tabs-content markdown-inner"><div id=tcomment></div><script src=https://giscus.app/client.js data-repo=timerring/blog data-repo-id=R_kgDONeZYZg data-category=Announcements data-category-id=DIC_kwDONeZYZs4ClRWs data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><div class=footer-info><p style=text-align:center>&copy; 2022 - present <a href=https://github.com/timerring>timerring</a></p></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#what-is-cloudflare-warp>What is Cloudflare WARP</a></li><li><a href=#why-we-use-cloudflare-warp>Why we use Cloudflare WARP</a></li><li><a href=#what-is-the-principle-of-cloudflare-warp>What is the principle of Cloudflare WARP</a><ul><li><a href=#why-use-udp-to-wrap-the-tcp-message>Why use UDP to wrap the TCP message?</a><ul><li><a href=#scenario>Scenario</a></li><li><a href=#udp>UDP</a></li></ul></li></ul></li><li><a href=#warp>WARP+</a></li><li><a href=#teams>Teams</a></li><li><a href=#about-the-privacy>About the privacy</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style><h3>Connects</h3><a href=https://github.com/timerring target=_blank><img src=https://trendshift.io/api/badge/developers/8761 alt="timerring | Trendshift" style=width:250px;height:55px width=250 height=55></a><br><br><style>.github-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.github-stats-card:hover{transform:translateY(-2px)}.github-stats-card .icon{flex-shrink:0;font-size:14px;color:#06f}.github-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.github-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.github-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://github.com/timerring class=github-stats-card target=_blank rel="noopener noreferrer"><i class="bi bi-github" style=font-size:20px></i><div class=text-content><span class=title>Github: @timerring</span>
<span class=stats>Followers 145 - Stars 3.4k<br>Commits 1.4k - PRs 260</span></div></a><br><style>.x-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.x-stats-card:hover{transform:translateY(-2px)}.x-stats-card .icon{flex-shrink:0;font-size:14px;color:#06f}.x-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.x-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.x-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://x.com/imjohnhowe class=x-stats-card target=_blank rel="noopener noreferrer"><i class="bi bi-twitter-x" style=font-size:20px></i><div class=text-content><span class=title>X: @imjohnhowe</span>
<span class=stats>Followers 7 - Tweets 14</span></div></a><br><style>.linkedin-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.linkedin-stats-card:hover{transform:translateY(-2px)}.linkedin-stats-card .icon{flex-shrink:0;font-size:14px;color:#0966c2}.linkedin-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.linkedin-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.linkedin-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://www.linkedin.com/in/john-howe-zh/ class=linkedin-stats-card target=_blank rel="noopener noreferrer"><div class=icon><i class="bi bi-linkedin" style=font-size:20px></i></div><div class=text-content><span class=title>linkedin: @john-howe-zh</span>
<span class=stats>Welcome to connect with me</span></div></a><br><style>.zhihu-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.zhihu-stats-card:hover{transform:translateY(-2px)}.zhihu-stats-card .icon{flex-shrink:0;font-size:14px;color:#06f}.zhihu-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.zhihu-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.zhihu-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://www.zhihu.com/people/timerring class=zhihu-stats-card target=_blank rel="noopener noreferrer"><div class=icon>知乎</div><div class=text-content><span class=title>Zhihu(中文博客): @timerring</span>
<span class=stats>Followers 488 - Voteups 1.1k<br>Articles 259 - Answers 192</span></div></a><br><style>.wechatoa-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.wechatoa-stats-card:hover{transform:translateY(-2px)}.wechatoa-stats-card .icon{flex-shrink:0;font-size:14px;color:#06f}.wechatoa-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.wechatoa-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.wechatoa-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-13-23-14-18.png class=wechatoa-stats-card target=_blank rel="noopener noreferrer"><div class=icon><i class="bi bi-wechat" style=font-size:20px></i></div><div class=text-content><span class=title>Wechat Account @AIShareLab</span>
<span class=stats>Followers 1k<br>Just as a temporary chat.</span></div></a><br><style>.csdn-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.csdn-stats-card:hover{transform:translateY(-2px)}.csdn-stats-card .icon{flex-shrink:0;font-size:8px;color:#fb5531}.csdn-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.csdn-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.csdn-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://blog.csdn.net/m0_52316372 class=csdn-stats-card target=_blank rel="noopener noreferrer"><div class=icon>CSDN</div><div class=text-content><span class=title>CSDN: @timerring</span>
<span class=stats>Followers 182k - Voteups 10k<br>Articles 556 - Collects 39k</span></div></a><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-1347694832132708 data-ad-slot=1676758726 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></aside></main></body></html>