<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In python, due to the GIL (Global Interpreter Lock), which is a mutex and ensures only one thread can execute at a time, so the multiple threads parallel execution is not supported under the CPython interpreter. But what about the multiple processes? What is the difference between them? How to choose the right method? Do you know the coroutine? Let&rsquo;s explore it together."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta name=keywords content="Prerequisite,Process,Thread,Other comparsion,Choose,Context switching,Multiple threads,Why only CPython has the GIL?,What is thread security?,The multiple thread in python,Thread Synchronization and Lock,The multiple process in python,Queue,Pipe,Manager,Pool,Coroutine,Reference"><meta property="og:url" content="https://blog.timerring.com/posts/cpu-can-only-see-the-threads/"><meta property="og:site_name" content="timerring"><meta property="og:title" content="CPU can only see the threads"><meta property="og:description" content="In python, due to the GIL (Global Interpreter Lock), which is a mutex and ensures only one thread can execute at a time, so the multiple threads parallel execution is not supported under the CPython interpreter. But what about the multiple processes? What is the difference between them? How to choose the right method? Do you know the coroutine? Let’s explore it together."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-01-23T23:36:22+08:00"><meta property="article:tag" content="Multiple Threads"><meta property="article:tag" content="Multiple Processes"><meta property="article:tag" content="Coroutine"><meta property="article:tag" content="Python"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-01-24-20-18-31.png"><meta itemprop=name content="CPU can only see the threads"><meta itemprop=description content="In python, due to the GIL (Global Interpreter Lock), which is a mutex and ensures only one thread can execute at a time, so the multiple threads parallel execution is not supported under the CPython interpreter. But what about the multiple processes? What is the difference between them? How to choose the right method? Do you know the coroutine? Let’s explore it together."><meta itemprop=datePublished content="2025-01-23T23:36:22+08:00"><meta itemprop=dateModified content="2025-01-23T23:36:22+08:00"><meta itemprop=wordCount content="2468"><meta itemprop=image content="https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-01-24-20-18-31.png"><meta itemprop=keywords content="Multiple Threads,Multiple Processes,Coroutine,Python"><meta name=twitter:image content="https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-01-24-20-18-31.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="CPU can only see the threads"><meta name=twitter:description content="In python, due to the GIL (Global Interpreter Lock), which is a mutex and ensures only one thread can execute at a time, so the multiple threads parallel execution is not supported under the CPython interpreter. But what about the multiple processes? What is the difference between them? How to choose the right method? Do you know the coroutine? Let’s explore it together."><meta name=twitter:site content="@imjohnhowe"><link rel=canonical href=https://blog.timerring.com/posts/cpu-can-only-see-the-threads/><title>CPU can only see the threads | timerring</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.d7a88d77202b21242efd3641ee0ccf6d2b317c3a57bcd08a48b51662fd988265.css integrity="sha256-16iNdyArISQu/TZB7gzPbSsxfDpXvNCKSLUWYv2YgmU=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.ae400b16a5a1ec798e832c653bd739d31ccc0d505f6a78a43816cce8ad88d62a.js integrity="sha256-rkALFqWh7HmOgyxlO9c50xzMDVBfanikOBbM6K2I1io=" crossorigin=anonymous></script><script defer src=/live-photo.min.efe7b2a516404d0718a4c6f90d2eb2f9c0bd8c7bddd382958716bcb24b660970.js integrity="sha256-7+eypRZATQcYpMb5DS6y+cC9jHvd04KVhxa8sktmCXA=" crossorigin=anonymous></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1347694832132708" crossorigin=anonymous></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/favicon.png alt=Logo><span>timerring</span></a></h2><hr><p>Rhythmic trend.</p><div class=book-search><div class=gcse-search></div></div><script async src="https://cse.google.com/cse.js?cx=40782701766144f96"></script><ul><li><a href=/>Dashboard</a></li><li><a href=/posts/>Blogs</a></li><li><a href=/categories/weekly/>Newsletter</a></li><li><a href=/index.xml>RSS</a></li><li><a href=/friends/>Friends</a></li><li><a href=/about/>About</a></li></ul><script>function goToRandomPost(){const e=["/posts/the-mitm-and-https-capturing/?utm_source=random","/posts/how-to-keep-your-mac-always-awake/?utm_source=random","/posts/the-way-to-get-cookie/?utm_source=random","/posts/how-to-choose-the-right-software-and-creative-license/?utm_source=random","/posts/0516-add-live-photo-effect-to-hugo/?utm_source=random","/posts/the-practice-of-resolving-domain/?utm_source=random","/posts/hidden-markov-models/?utm_source=random","/posts/markov-chains/?utm_source=random","/posts/markov-processes/?utm_source=random","/posts/0418-find-the-formula-rendering-issue-of-hugo/?utm_source=random","/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/stock-prices/?utm_source=random","/posts/possion-processes/?utm_source=random","/posts/docker-with-gpu/?utm_source=random","/posts/stochastic-processes/?utm_source=random","/posts/some-useful-tools/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-walks/?utm_source=random","/posts/sequences-of-random-variables/?utm_source=random","/posts/parameter-estimation/?utm_source=random","/posts/two-random-variables/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/some-useful-commands-to-share/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script><a class=random onclick=goToRandomPost()>Stroll</a></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>timerring</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#prerequisite>Prerequisite</a></li><li><a href=#process>Process</a></li><li><a href=#thread>Thread</a></li><li><a href=#other-comparsion>Other comparsion</a><ul><li><a href=#choose>Choose</a></li></ul></li><li><a href=#context-switching>Context switching</a></li><li><a href=#multiple-threads>Multiple threads</a><ul><li><a href=#why-only-cpython-has-the-gil>Why only CPython has the GIL?</a></li><li><a href=#what-is-thread-security>What is thread security?</a></li></ul></li><li><a href=#the-multiple-thread-in-python>The multiple thread in python</a><ul><li><a href=#thread-synchronization-and-lock>Thread Synchronization and Lock</a></li></ul></li><li><a href=#the-multiple-process-in-python>The multiple process in python</a><ul><li><a href=#queue>Queue</a></li><li><a href=#pipe>Pipe</a></li><li><a href=#manager>Manager</a></li><li><a href=#pool>Pool</a></li></ul></li><li><a href=#coroutine>Coroutine</a></li><li><a href=#reference>Reference</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></aside></header><article class=markdown><h1>CPU can only see the threads</h1><h5>January 23, 2025
·
12 min read
<span id=busuanzi_container_page_pv>· Page View: <span id=busuanzi_value_page_pv></span></span></h5><div><a href=/categories/tutorial/ style=color:#000>Tutorial</a></div><div><a href=/tags/multiple-threads/ style=color:#000>Multiple Threads</a> <span style=color:#000>| </span><a href=/tags/multiple-processes/ style=color:#000>Multiple Processes</a> <span style=color:#000>| </span><a href=/tags/coroutine/ style=color:#000>Coroutine</a> <span style=color:#000>| </span><a href=/tags/python/ style=color:#000>Python</a></div><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-01-24-20-18-31.png></p><p class=title-image><i>Even in different processes, the CPU can only see the threads. ---- My own impression</i></p><blockquote class="book-hint info">If you have any questions, feel free to comment below. And if you think it's helpful to you, just click on the ads which can support this site. Thanks!</blockquote><hr><p>In python, due to the GIL (Global Interpreter Lock), which is a mutex and ensures only one thread can execute at a time, so the multiple threads parallel execution is not supported under the CPython interpreter. But what about the multiple processes? What is the difference between them? How to choose the right method? Do you know the coroutine? Let&rsquo;s explore it together.</p><h2 id=prerequisite>Prerequisite
<a class=anchor href=#prerequisite>#</a></h2><p>To begin with, you should know the basic conceptions:</p><ol><li><strong>Process</strong>: The process is the resource allocation unit.</li><li><strong>Thread</strong>: The thread is the minimum unit of CPU scheduling.</li></ol><p>For every process, the actually execution unit is the main thread in the process. <strong>Hence, even in different processes, the CPU can only see the threads.</strong></p><p>The core of the computer is the number of physical cores that can be parallelized at the same time (the CPU can only see the threads). Due to the hyper-threading technology, the actual number of threads that can be parallelized is usually <strong>twice the number</strong> of physical cores, <strong>which is also the number of cores seen by the operating system</strong>. We only care about the number of threads that can be parallelized, so <strong>the number of cores mentioned later is the number of cores seen by the operating system</strong>, and the core refers to the core after the hyper-threading technology (not the physical core).</p><ul><li>If the computer has multiple CPU cores, and the total number of threads in the computer is less than the number of cores, then the threads can be parallelized and run on different cores.</li><li>If it is single-core multi-threading, then multi-threading is not parallel, but <strong>concurrent</strong>, that is, to balance the load, the CPU scheduler will switch different threads on a single core.</li><li>If it is multi-core multi-threading, and the number of threads is greater than the number of cores, some threads will keep switching, and execute concurrently, <strong>but the maximum number of parallel execution is actually the number of cores in the current process</strong>, so blindly increasing the number of threads will not make your program faster, but will add extra overhead to your program.</li></ul><h2 id=process>Process
<a class=anchor href=#process>#</a></h2><ol><li>The process is <strong>the resource allocation unit</strong>: An process has its own independent running space (including <strong>the text region</strong>, <strong>data region</strong>, and <strong>stack region</strong>).</li><li>Every process has its own <strong>independent memory space</strong>, which ensures the isolation of memory address spaces between processes.</li><li>Process contains the procedure, data set and PCB(Process Control Block). The related resources will be recorded in the PCB which indicates the resources are occupied.</li><li>A process is the scheduling unit for seizing the processor. The switching of processes requires saving and restoring the CPU state.</li><li>Multiple processes cannot communicate with each other directly. They need a <strong>inter-process communication (IPC)</strong> mechanism to communicate with each other, which there will be a <strong>pipe</strong>(in parent-child process) or <strong>named pipe</strong> or <strong>signal</strong> or <strong>message queue</strong> or <strong>shared memory</strong>(the most efficient way) or <strong>socket</strong>(even can be used in different machines).</li></ol><p>Cons:</p><ol><li>If changes the processes frequently, it will consume more resources. Around GB level.</li></ol><h2 id=thread>Thread
<a class=anchor href=#thread>#</a></h2><ol><li>Thread is a lightweight process, which is <strong>minimum unit of CPU scheduling</strong>.</li><li>Multiple threads share the same memory space of the process. So the threads can communicate with each other directly.</li><li>The scheduling of threads is smaller than process. The stack is KB level.</li><li>Thread is not related to resource allocation. It belongs to a process and shares the resources of the process with other threads in the process. <strong>Threads consist only of the related stack (system stack or user stack), registers, and the thread control block (TCB)</strong>. Registers can be used to store local variables within a thread, but cannot store variables related to other threads.</li></ol><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-01-24-00-16-36.png alt></p><h2 id=other-comparsion>Other comparsion
<a class=anchor href=#other-comparsion>#</a></h2><ol><li>The process is independent of each other, if one process is crashed, it will not affect other processes. But the thread is not independent of each other, if one thread is crashed, it will affect the whole process crashed.</li><li>The process uses memory addresses that can be locked, that is, when one thread uses some shared memory, other threads must wait for it to finish before they can use this memory. (mutex)</li></ol><h3 id=choose>Choose
<a class=anchor href=#choose>#</a></h3><ol><li>For the CPU intensive tasks, recommend to use multiple processes.</li><li>For the IO intensive tasks, recommend to use multiple threads. eg, scratch the web, when IO is blocking in system call, the thread can release the GIL and let CPU run other threads.</li><li>Common usage:<ol><li>For the Webserver, which needs to create or close the connection frequently, better use the multiple thread.</li><li>For the strong relationship between the data, better use the multiple threads.</li></ol></li></ol><h2 id=context-switching>Context switching
<a class=anchor href=#context-switching>#</a></h2><p>The context switching contains the following three types:</p><ol><li>Process context switching: Switching between different processes. Task scheduling adopts a preemptive method of <strong>time slice rotation</strong> for process scheduling.</li><li>Thread context switching: Switching between different threads.</li><li><code>User mode</code> and <code>kernel mode</code> context switching: Switching between user mode and kernel mode. (when user program needs to call hardware devices, the kernel needs to switch the <code>user program</code> to the <code>system call</code>)</li></ol><p>The context switching contains the following steps:</p><ol><li>Switch <strong>page</strong> to use new address space (only for process switching)</li><li>Switch <strong>kernel stack</strong> and <strong>hardware context</strong>: The main difference between thread context switching and process context switching is that the virtual memory space of thread switching is the same, but the process switching is different (so the process switching is most expensive). The most cost is the <strong>switch of register content</strong>.</li></ol><blockquote><p>How to just the bottle neck of context switching?
If CPU is running at full load, it should meet the following distribution:</p><ol><li>User Time: 65%～70%</li><li>System Time: 30%～35%(if too high, it means the context switching is too frequent)</li><li>Idle: 0%～5%</li></ol></blockquote><h2 id=multiple-threads>Multiple threads
<a class=anchor href=#multiple-threads>#</a></h2><blockquote><p>In other languages, multiple threads can run in multiple cores. But in python, multiple threads can only run in one core at the same time.</p></blockquote><p>In python, there is a GIL (Global Interpreter Lock) which only allows one thread to execute in the CPU. And the python has different interpreters, such as:</p><ol><li>CPython: the official implementation which is written in C.</li><li>Jython: compile the python code to java bytecode and run it in JVM.</li><li>IronPython: .NET platform.</li><li>PyPy: RPython.</li></ol><p>Only the CPython has the GIL, and the process of releasing the lock is time-comsuming. So in the multiple cores the performance of the Python is not good.</p><blockquote><p>The official docs: This lock is necessary mainly because CPython’s memory management is not thread-safe. (However, since the GIL exists, other features have grown to depend on the guarantees that it enforces.)</p></blockquote><p>In other words, if there is no GIL, <strong>probably the garbage collection mechanism will directly recycle the variables of the code that is being executed by multiple threads, which will cause the program to crash.</strong> So the GIL is added in the CPython to ganruntee the security of thread&rsquo;s level. Only the thread obtains the GIL first, then to obtains the CPython interpreter.</p><h3 id=why-only-cpython-has-the-gil>Why only CPython has the GIL?
<a class=anchor href=#why-only-cpython-has-the-gil>#</a></h3><p>The Python is interpret language, so it cannot know the global of whole code. Only has the GIL can access to the CPython.</p><p>But Java is a hybrid language, so in the Jpython there is no GIL.</p><blockquote><p>Compiled languages: the compiler make the code to the binary bytescode which can run on the machine directly. But you should compile it into different platform binary executable. Some common languages: C, C++, go, Pascal, Object-C and Swift.</p><p>Interpreted language: First, translate it into intermediate code, and then let the interpreter interpret and run the intermediate code. The source program is translated into machine code during the running process. One sentence is translated and then executed until the end. It has good platform compatibility and can run in any environment, provided that an interpreter (virtual machine) is installed. Some common languages: JavaScript, Python, Erlang, PHP, Perl, Ruby.</p><p>Hybrid language: In C#, instead of directly compiling into machine code during compilation, it compiles into intermediate code. The.NET platform provides a Common Language Runtime (CLR) to run the intermediate code. The CLR is similar to the Java Virtual Machine (JVM). After C# code is compiled into Intermediate Language (IL) code, it is saved in a DLL. When the program runs for the first time, the Just-In-Time (JIT) compiler compiles the IL code into machine code and caches it in memory, and subsequent executions can directly use this cached machine code.
As for Java, it can be considered a compiled language. All Java code needs to be compiled; a <code>.java</code> file is useless without compilation. Regarding the efficiency of the JVM, there are optimization techniques such as JIT and Ahead-Of-Time (AOT). Java can also be considered an interpreted language. Since Java code cannot run directly after compilation, it is interpreted and run on the JVM, so it is interpreted.</p></blockquote><h3 id=what-is-thread-security>What is thread security?
<a class=anchor href=#what-is-thread-security>#</a></h3><p>The thread security is mainly about the memory security.</p><p>In the memory space of each process, there is a special common area, usually called the <strong>heap (memory)</strong>. All threads within the process can access this area, which is the potential cause of problems. In the absence of a protection mechanism, the heap memory space is an unsafe area for multithreading. This is because the data you put into it may be &ldquo;adjusted&rdquo; by other threads.</p><h2 id=the-multiple-thread-in-python>The multiple thread in python
<a class=anchor href=#the-multiple-thread-in-python>#</a></h2><p>So in the python, we can use the <code>threading</code> module to create the thread.</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#408080;font-style:italic># directly usage</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>threading</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>run</span>(n):
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;current task：&#34;</span>, n)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>if</span> __name__ <span style=color:#666>==</span> <span style=color:#ba2121>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    t1 <span style=color:#666>=</span> threading<span style=color:#666>.</span>Thread(target<span style=color:#666>=</span>run, args<span style=color:#666>=</span>(<span style=color:#ba2121>&#34;thread 1&#34;</span>,))
</span></span><span style=display:flex><span>    t2 <span style=color:#666>=</span> threading<span style=color:#666>.</span>Thread(target<span style=color:#666>=</span>run, args<span style=color:#666>=</span>(<span style=color:#ba2121>&#34;thread 2&#34;</span>,))
</span></span><span style=display:flex><span>    t1<span style=color:#666>.</span>start()
</span></span><span style=display:flex><span>    t2<span style=color:#666>.</span>start()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># customize class usage</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>threading</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>class</span> <span style=color:#00f;font-weight:700>MyThread</span>(threading<span style=color:#666>.</span>Thread):
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> __init__(self, name):
</span></span><span style=display:flex><span>        <span style=color:green>super</span>(MyThread, self)<span style=color:#666>.</span>__init__() <span style=color:#408080;font-style:italic># initialize the parent class</span>
</span></span><span style=display:flex><span>        self<span style=color:#666>.</span>name <span style=color:#666>=</span> name
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>run</span>(self):
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;current task：&#34;</span>, name)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>if</span> __name__ <span style=color:#666>==</span> <span style=color:#ba2121>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    t1 <span style=color:#666>=</span> MyThread(<span style=color:#ba2121>&#34;thread 1&#34;</span>)
</span></span><span style=display:flex><span>    t2 <span style=color:#666>=</span> MyThread(<span style=color:#ba2121>&#34;thread 2&#34;</span>)
</span></span><span style=display:flex><span>    t1<span style=color:#666>.</span>start()
</span></span><span style=display:flex><span>    t2<span style=color:#666>.</span>start()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># Let the main thread wait for the sub-thread to complete</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>if</span> __name__ <span style=color:#666>==</span> <span style=color:#ba2121>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    t1 <span style=color:#666>=</span> threading<span style=color:#666>.</span>Thread(target<span style=color:#666>=</span>count, args<span style=color:#666>=</span>(<span style=color:#ba2121>&#34;100000&#34;</span>,))
</span></span><span style=display:flex><span>    t2 <span style=color:#666>=</span> threading<span style=color:#666>.</span>Thread(target<span style=color:#666>=</span>count, args<span style=color:#666>=</span>(<span style=color:#ba2121>&#34;100000&#34;</span>,))
</span></span><span style=display:flex><span>    t1<span style=color:#666>.</span>start()
</span></span><span style=display:flex><span>    t2<span style=color:#666>.</span>start()
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic># use .join() to wait for the sub-thread to complete</span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic># if the t1 is very time-comsuming, you can set the timeout</span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic># t1.join(timeout=5) to prevent the t2.join() from being blocked</span>
</span></span><span style=display:flex><span>    t1<span style=color:#666>.</span>join()
</span></span><span style=display:flex><span>    t2<span style=color:#666>.</span>join()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic># The Daemon thread is opposite to join(), it will ensure the sub-thread follows the main thread</span>
</span></span><span style=display:flex><span>    t1<span style=color:#666>.</span>setDaemon(<span style=color:green;font-weight:700>True</span>)
</span></span><span style=display:flex><span>    t1<span style=color:#666>.</span>start()
</span></span></code></pre></div><p>Timer</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>show</span>():
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;Pyhton&#34;</span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>t <span style=color:#666>=</span> threading<span style=color:#666>.</span>Timer(<span style=color:#666>1</span>, show) <span style=color:#408080;font-style:italic># set the thread start 1 second later</span>
</span></span><span style=display:flex><span>t<span style=color:#666>.</span>start()  
</span></span></code></pre></div><p>But how to let each thread use their own data? Use the <code>threading.local()</code> to create the thread-local storage.</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>threading</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># Create the global object</span>
</span></span><span style=display:flex><span>local_school <span style=color:#666>=</span> threading<span style=color:#666>.</span>local()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>process_student</span>():
</span></span><span style=display:flex><span>    std <span style=color:#666>=</span> local_school<span style=color:#666>.</span>student
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#39;Hello, </span><span style=color:#b68;font-weight:700>%s</span><span style=color:#ba2121> (in </span><span style=color:#b68;font-weight:700>%s</span><span style=color:#ba2121>)&#39;</span> <span style=color:#666>%</span> (std, threading<span style=color:#666>.</span>current_thread()<span style=color:#666>.</span>name))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>process_thread</span>(name):
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic># Bound the object separately</span>
</span></span><span style=display:flex><span>    local_school<span style=color:#666>.</span>student <span style=color:#666>=</span> name
</span></span><span style=display:flex><span>    process_student()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>t1 <span style=color:#666>=</span> threading<span style=color:#666>.</span>Thread(target<span style=color:#666>=</span> process_thread, args<span style=color:#666>=</span>(<span style=color:#ba2121>&#39;Alice&#39;</span>,), name<span style=color:#666>=</span><span style=color:#ba2121>&#39;Thread-A&#39;</span>)
</span></span><span style=display:flex><span>t2 <span style=color:#666>=</span> threading<span style=color:#666>.</span>Thread(target<span style=color:#666>=</span> process_thread, args<span style=color:#666>=</span>(<span style=color:#ba2121>&#39;Bob&#39;</span>,), name<span style=color:#666>=</span><span style=color:#ba2121>&#39;Thread-B&#39;</span>)
</span></span><span style=display:flex><span>t1<span style=color:#666>.</span>start()
</span></span><span style=display:flex><span>t2<span style=color:#666>.</span>start()
</span></span><span style=display:flex><span>t1<span style=color:#666>.</span>join()
</span></span><span style=display:flex><span>t2<span style=color:#666>.</span>join()
</span></span></code></pre></div><h3 id=thread-synchronization-and-lock>Thread Synchronization and Lock
<a class=anchor href=#thread-synchronization-and-lock>#</a></h3><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#408080;font-style:italic># create the Lock</span>
</span></span><span style=display:flex><span>mutex <span style=color:#666>=</span> threading<span style=color:#666>.</span>Lock()
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># Allow the the thread obtain the lock again when it already holds the lock</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># Same methods as the Lock</span>
</span></span><span style=display:flex><span>Reentrant <span style=color:#666>=</span> threading<span style=color:#666>.</span>RLock()
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># obtain the lock</span>
</span></span><span style=display:flex><span>mutex<span style=color:#666>.</span>acquire([timeout])
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># release the lock</span>
</span></span><span style=display:flex><span>mutex<span style=color:#666>.</span>release()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># allow multiple threads to obtain the lock</span>
</span></span><span style=display:flex><span>semaphore <span style=color:#666>=</span> threading<span style=color:#666>.</span>BoundedSemaphore(<span style=color:#666>5</span>)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># acquire the lock</span>
</span></span><span style=display:flex><span>semaphore<span style=color:#666>.</span>acquire([timeout])
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># release the lock</span>
</span></span><span style=display:flex><span>semaphore<span style=color:#666>.</span>release()
</span></span></code></pre></div><h2 id=the-multiple-process-in-python>The multiple process in python
<a class=anchor href=#the-multiple-process-in-python>#</a></h2><p>The usage is similar to the thread.</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#408080;font-style:italic># similar usage, omit here</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>from</span> <span style=color:#00f;font-weight:700>multiprocessing</span> <span style=color:green;font-weight:700>import</span> Process  
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>show</span>(name):
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;Process name is &#34;</span> <span style=color:#666>+</span> name)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>if</span> __name__ <span style=color:#666>==</span> <span style=color:#ba2121>&#34;__main__&#34;</span>: 
</span></span><span style=display:flex><span>    proc <span style=color:#666>=</span> Process(target<span style=color:#666>=</span>show, args<span style=color:#666>=</span>(<span style=color:#ba2121>&#39;subprocess&#39;</span>,))  
</span></span><span style=display:flex><span>    proc<span style=color:#666>.</span>start()  
</span></span><span style=display:flex><span>    proc<span style=color:#666>.</span>join()
</span></span></code></pre></div><h3 id=queue>Queue
<a class=anchor href=#queue>#</a></h3><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>from</span> <span style=color:#00f;font-weight:700>multiprocessing</span> <span style=color:green;font-weight:700>import</span> Process, Queue
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>put_in_queue</span>(queue):
</span></span><span style=display:flex><span>    queue<span style=color:#666>.</span>put(<span style=color:#ba2121>&#39;Queue&#39;</span>) <span style=color:#408080;font-style:italic># put() means put the data into the queue</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>if</span> __name__ <span style=color:#666>==</span> <span style=color:#ba2121>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    queue <span style=color:#666>=</span> Queue()
</span></span><span style=display:flex><span>    pro <span style=color:#666>=</span> Process(target<span style=color:#666>=</span>put_in_queue, args<span style=color:#666>=</span>(queue,))
</span></span><span style=display:flex><span>    pro<span style=color:#666>.</span>start()
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(queue<span style=color:#666>.</span>get()) <span style=color:#408080;font-style:italic># get() means get the data from queue</span>
</span></span><span style=display:flex><span>    pro<span style=color:#666>.</span>join()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># Common usage</span>
</span></span><span style=display:flex><span>Queue<span style=color:#666>.</span>qsize()
</span></span><span style=display:flex><span>Queue<span style=color:#666>.</span>empty()
</span></span><span style=display:flex><span>Queue<span style=color:#666>.</span>full()
</span></span><span style=display:flex><span>Queue<span style=color:#666>.</span>get([block[, timeout]])
</span></span><span style=display:flex><span>Queue<span style=color:#666>.</span>get_nowait() <span style=color:#408080;font-style:italic># == Queue.get(False)</span>
</span></span><span style=display:flex><span>Queue<span style=color:#666>.</span>put()
</span></span><span style=display:flex><span>Queue<span style=color:#666>.</span>put_nowait(item) <span style=color:#408080;font-style:italic># == Queue.put(item, False)</span>
</span></span><span style=display:flex><span>Queue<span style=color:#666>.</span>task_done() <span style=color:#408080;font-style:italic># send a signal to the queue</span>
</span></span><span style=display:flex><span>Queue<span style=color:#666>.</span>join() <span style=color:#408080;font-style:italic># wait until the queue is empty(similar to thread.join())</span>
</span></span></code></pre></div><h3 id=pipe>Pipe
<a class=anchor href=#pipe>#</a></h3><p>The essence is communication rather than share the data. Just likes the socket.</p><p>Main use: <code>send()</code> and <code>recv()</code></p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>from</span> <span style=color:#00f;font-weight:700>multiprocessing</span> <span style=color:green;font-weight:700>import</span> Process, Pipe
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>show</span>(conn):
</span></span><span style=display:flex><span>    conn<span style=color:#666>.</span>send(<span style=color:#ba2121>&#39;Pipe&#39;</span>)
</span></span><span style=display:flex><span>    conn<span style=color:#666>.</span>close()
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>if</span> __name__ <span style=color:#666>==</span> <span style=color:#ba2121>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    parent_conn, child_conn <span style=color:#666>=</span> Pipe() 
</span></span><span style=display:flex><span>    pro <span style=color:#666>=</span> Process(target<span style=color:#666>=</span>show, args<span style=color:#666>=</span>(child_conn,))
</span></span><span style=display:flex><span>    pro<span style=color:#666>.</span>start()
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(parent_conn<span style=color:#666>.</span>recv())   
</span></span><span style=display:flex><span>    pro<span style=color:#666>.</span>join()
</span></span></code></pre></div><h3 id=manager>Manager
<a class=anchor href=#manager>#</a></h3><p><a href=https://docs.python.org/3.6/library/multiprocessing.html#managers target=_blank rel="nofollow noopener">https://docs.python.org/3.6/library/multiprocessing.html#managers<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p><h3 id=pool>Pool
<a class=anchor href=#pool>#</a></h3><ul><li><code>apply()</code>: synchronous(serial) blocking</li><li><code>apply_async()</code>: asynchronous(parallel) not blocking</li><li><code>terminate()</code>: terminate the pool</li><li><code>close()</code>: wait for the pool to complete then close the pool</li><li><code>join()</code>: must add after <code>close()</code> or <code>terminate()</code></li></ul><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#408080;font-style:italic>#coding: utf-8</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>multiprocessing</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>time</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>func</span>(msg):
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;msg:&#34;</span>, msg)
</span></span><span style=display:flex><span>    time<span style=color:#666>.</span>sleep(<span style=color:#666>3</span>)
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;end&#34;</span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>if</span> __name__ <span style=color:#666>==</span> <span style=color:#ba2121>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic># the pool is 3</span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic># only 3 processes is running at the same time</span>
</span></span><span style=display:flex><span>    pool <span style=color:#666>=</span> multiprocessing<span style=color:#666>.</span>Pool(processes <span style=color:#666>=</span> <span style=color:#666>3</span>)
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>for</span> i <span style=color:#a2f;font-weight:700>in</span> <span style=color:green>range</span>(<span style=color:#666>5</span>):
</span></span><span style=display:flex><span>        msg <span style=color:#666>=</span> <span style=color:#ba2121>&#34;hello </span><span style=color:#b68;font-weight:700>%d</span><span style=color:#ba2121>&#34;</span> <span style=color:#666>%</span>(i)
</span></span><span style=display:flex><span>        <span style=color:#408080;font-style:italic># non-blocking, the sub-process will not affect the main process execution, main process will run to pool.join()</span>
</span></span><span style=display:flex><span>        pool<span style=color:#666>.</span>apply_async(func, (msg, ))   
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>        <span style=color:#408080;font-style:italic># blocking, first execute the sub-process, then execute the main process</span>
</span></span><span style=display:flex><span>        <span style=color:#408080;font-style:italic># pool.apply(func, (msg, ))   </span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;=================&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic># before calling join, you must call close function, otherwise it will be wrong.</span>
</span></span><span style=display:flex><span>    pool<span style=color:#666>.</span>close()
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic># after calling close, there will be no new process added to the pool</span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic># join function will wait for all sub-processes to complete</span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic># !important: if not join, there will be 5 zombie processes</span>
</span></span><span style=display:flex><span>    pool<span style=color:#666>.</span>join()
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;Sub-process(es) done.&#34;</span>)
</span></span></code></pre></div><h2 id=coroutine>Coroutine
<a class=anchor href=#coroutine>#</a></h2><p>When async operations share the resources, the coroutine which defined by user based on time slice is better than threads based on Preemptively. The coroutine has its own register context and stack, which is more lightweight than the thread, the stack is KB level.
In python, the coroutine is single thread, which means there only be one coroutine running at the same time, there won&rsquo;t be conflict in variable. <strong>So the coroutine is safe.</strong></p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>asyncio</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>balance <span style=color:#666>=</span> <span style=color:#666>0</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>async</span> <span style=color:green;font-weight:700>def</span> <span style=color:#00f>change_it_without_lock</span>(n):  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>global</span> balance  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    balance <span style=color:#666>=</span> balance <span style=color:#666>+</span> n
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic># Besides the time slice, you can also use the `await` to surround the &#34;right&#34; actively.</span>
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>await</span> asyncio<span style=color:#666>.</span>sleep(<span style=color:#666>1</span>)  
</span></span><span style=display:flex><span>    balance <span style=color:#666>=</span> balance <span style=color:#666>-</span> n  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(balance)  
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># if you call the `change_it_without_lock()` function directly, the return is a coroutine object.</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># so if you want to run it directly, you should use the `await` or `asyncio.run(function)`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>loop <span style=color:#666>=</span> asyncio<span style=color:#666>.</span>get_event_loop() <span style=color:#408080;font-style:italic># get the event loop</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>res <span style=color:#666>=</span> loop<span style=color:#666>.</span>run_until_complete(  
</span></span><span style=display:flex><span>    asyncio<span style=color:#666>.</span>gather(change_it_without_lock(<span style=color:#666>10</span>), change_it_without_lock(<span style=color:#666>8</span>),  
</span></span><span style=display:flex><span>                   change_it_without_lock(<span style=color:#666>2</span>), change_it_without_lock(<span style=color:#666>7</span>)))  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:green>print</span>(balance)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 17  </span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 9  </span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 7  </span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 0  </span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 0</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># As we can see above, the process is not consistent, but the result is consistent.</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># that is easy to understand, the 10 is +10 but await the sleep, then the 8 is running, and the same until 10+8+2+7=27, then the 10 sleep is over, then -10, print 17, and recursively 9 7 0, finaly is 0.</span>
</span></span></code></pre></div><p>All in all, if the coroutine is not use await to surround the &ldquo;right&rdquo; actively, the coroutine is safe. If you use <code>await</code>, the result will be consistent. If you want to make the process consistent, you can only use the <code>Lock</code>. <strong>But in this situation, the async will be sync.</strong></p><h2 id=reference>Reference
<a class=anchor href=#reference>#</a></h2><p><a href=https://stackoverflow.com/questions/49090416/why-is-the-python-interpreter-not-thread-safe target=_blank rel="nofollow noopener">https://stackoverflow.com/questions/49090416/why-is-the-python-interpreter-not-thread-safe<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p><p><a href=https://www.cnblogs.com/lizexiong/p/17141988.html target=_blank rel="nofollow noopener">https://www.cnblogs.com/lizexiong/p/17141988.html<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p><p><a href=https://liaoxuefeng.com/books/python/process-thread/process-manager/index.html target=_blank rel="nofollow noopener">https://liaoxuefeng.com/books/python/process-thread/process-manager/index.html<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p><p><a href=https://www.cnblogs.com/v3ucn/p/16530665.html target=_blank rel="nofollow noopener">https://www.cnblogs.com/v3ucn/p/16530665.html<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p><p><a href=https://zhuanlan.zhihu.com/p/82123111 target=_blank rel="nofollow noopener">https://zhuanlan.zhihu.com/p/82123111<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p><h2>Related readings</h2><ul><li><a href="/posts/the-encode-and-decode-in-python/?utm_source=related">The Encode and Decode in Python</a></li><li><a href="/posts/the-instance-class-static-magic-method-in-python/?utm_source=related">The Instance Class Static Magic Method in Python</a></li><li><a href="/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=related">How to Publish Your Code as a Pip Module</a></li><li><a href="/posts/python-generator-iterator-and-decorator/?utm_source=related">Python Generator Iterator and Decorator</a></li><li><a href="/posts/python-underlying-mechanism/?utm_source=related">Python Underlying Mechanism</a></li></ul><hr><div class=post-nav><a href="https://blog.timerring.com/posts/go-common-test/?utm_source=nav">&lt;&lt; prev | Go Common Test</a>
<a onclick=goToRandomPost() style=cursor:pointer>Continue strolling
</a><a href="https://blog.timerring.com/posts/reflections-on-trending-topics/?utm_source=nav">Reflections on... ｜ next >></a></div><hr>If you find this blog useful and want to support my blog, need my skill for something, or have a coffee chat with me, feel free to:<div class=support><a href=https://ko-fi.com/polls/What-is-the-custom-topic-for-the-next-month-C0C219LHQJ class=book-btn target=_blank>Subscribe to participate in blog topics and custom services
</a><a href=https://ko-fi.com/timerring class=book-btn target=_blank>Buy me a coffee</a></div><div style=margin-bottom:8px></div><script>function goToRandomPost(){const e=["/posts/the-mitm-and-https-capturing/?utm_source=random","/posts/how-to-keep-your-mac-always-awake/?utm_source=random","/posts/the-way-to-get-cookie/?utm_source=random","/posts/how-to-choose-the-right-software-and-creative-license/?utm_source=random","/posts/0516-add-live-photo-effect-to-hugo/?utm_source=random","/posts/the-practice-of-resolving-domain/?utm_source=random","/posts/hidden-markov-models/?utm_source=random","/posts/markov-chains/?utm_source=random","/posts/markov-processes/?utm_source=random","/posts/0418-find-the-formula-rendering-issue-of-hugo/?utm_source=random","/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/stock-prices/?utm_source=random","/posts/possion-processes/?utm_source=random","/posts/docker-with-gpu/?utm_source=random","/posts/stochastic-processes/?utm_source=random","/posts/some-useful-tools/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-walks/?utm_source=random","/posts/sequences-of-random-variables/?utm_source=random","/posts/parameter-estimation/?utm_source=random","/posts/two-random-variables/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/some-useful-commands-to-share/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script></article><ins class=adsbygoogle style=display:block data-ad-format=fluid data-ad-layout-key=-c2+7a+0+1 data-ad-client=ca-pub-1347694832132708 data-ad-slot=5778132754></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><div class=busuanzi-footer><p style=text-align:center>&copy; 2022 - present <a href=https://github.com/timerring>timerring</a> | PV: <span id=busuanzi_value_site_pv></span> | UV: <span id=busuanzi_value_site_uv></span></p></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#prerequisite>Prerequisite</a></li><li><a href=#process>Process</a></li><li><a href=#thread>Thread</a></li><li><a href=#other-comparsion>Other comparsion</a><ul><li><a href=#choose>Choose</a></li></ul></li><li><a href=#context-switching>Context switching</a></li><li><a href=#multiple-threads>Multiple threads</a><ul><li><a href=#why-only-cpython-has-the-gil>Why only CPython has the GIL?</a></li><li><a href=#what-is-thread-security>What is thread security?</a></li></ul></li><li><a href=#the-multiple-thread-in-python>The multiple thread in python</a><ul><li><a href=#thread-synchronization-and-lock>Thread Synchronization and Lock</a></li></ul></li><li><a href=#the-multiple-process-in-python>The multiple process in python</a><ul><li><a href=#queue>Queue</a></li><li><a href=#pipe>Pipe</a></li><li><a href=#manager>Manager</a></li><li><a href=#pool>Pool</a></li></ul></li><li><a href=#coroutine>Coroutine</a></li><li><a href=#reference>Reference</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-1347694832132708 data-ad-slot=1676758726 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></aside></main></body></html>