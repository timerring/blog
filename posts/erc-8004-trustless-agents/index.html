<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This article is my understanding of the ERC-8004: Trustless Agents, which is a standard for Identity Registry, Reputation Registry and Verification Registry. And refer to the Ethereum Improvement Proposals ERC-8004: Trustless Agents[1]."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta name=keywords content="Abstract,Motivation,Specification,Identity Registry,Reputation Registry,Validation Registry,Rationale,Test Cases,Workflow,Security Considerations"><meta property="og:url" content="https://blogs.timerring.com/posts/erc-8004-trustless-agents/"><meta property="og:site_name" content="timerring"><meta property="og:title" content="ERC 8004 Trustless Agents"><meta property="og:description" content="This article is my understanding of the ERC-8004: Trustless Agents, which is a standard for Identity Registry, Reputation Registry and Verification Registry. And refer to the Ethereum Improvement Proposals ERC-8004: Trustless Agents[1]."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-10-16T02:23:05+08:00"><meta property="article:tag" content="ETH"><meta property="article:tag" content="AgentFi"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-10-16-15-35-36.png"><meta itemprop=name content="ERC 8004 Trustless Agents"><meta itemprop=description content="This article is my understanding of the ERC-8004: Trustless Agents, which is a standard for Identity Registry, Reputation Registry and Verification Registry. And refer to the Ethereum Improvement Proposals ERC-8004: Trustless Agents[1]."><meta itemprop=datePublished content="2025-10-16T02:23:05+08:00"><meta itemprop=dateModified content="2025-10-16T02:23:05+08:00"><meta itemprop=wordCount content="1670"><meta itemprop=image content="https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-10-16-15-35-36.png"><meta itemprop=keywords content="ETH,AgentFi"><meta name=twitter:image content="https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-10-16-15-35-36.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="ERC 8004 Trustless Agents"><meta name=twitter:description content="This article is my understanding of the ERC-8004: Trustless Agents, which is a standard for Identity Registry, Reputation Registry and Verification Registry. And refer to the Ethereum Improvement Proposals ERC-8004: Trustless Agents[1]."><meta name=twitter:site content="@imjohnhowe"><link rel=canonical href=https://blogs.timerring.com/posts/erc-8004-trustless-agents/><title>ERC 8004 Trustless Agents | timerring</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.8303cd57a11df7103b3f8d3a5b0a3f4efed92228d8bbf06b228f20e732b66ae8.css integrity="sha256-gwPNV6Ed9xA7P406Wwo/Tv7ZIijYu/BrIo8g5zK2aug=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.18e67ab8975dfb6af9faea9fc39d7ffe4a1db21754ec37f58d9a47962e17231d.js integrity="sha256-GOZ6uJdd+2r5+uqfw51//kodshdU7Df1jZpHli4XIx0=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-H5Y60NE14Z"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-H5Y60NE14Z")</script><script defer src=/live-photo.min.efe7b2a516404d0718a4c6f90d2eb2f9c0bd8c7bddd382958716bcb24b660970.js integrity="sha256-7+eypRZATQcYpMb5DS6y+cC9jHvd04KVhxa8sktmCXA=" crossorigin=anonymous></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1347694832132708" crossorigin=anonymous></script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "1c9fd91e4f1e4b4c814990409a359c33"}'></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?593f393f7a592051b82491c0361d38a9",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta name=referrer content="no-referrer-when-downgrade"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css><meta name=msvalidate.01 content="5A88C236DD66D6E12DE1CA70A1E7BFE4"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/favicon.png alt=Logo><span>timerring</span></a></h2><hr><p>Rhythmic trend.</p><div class=book-search><div class=gcse-search></div></div><script async src="https://cse.google.com/cse.js?cx=40782701766144f96"></script><ul><li><a href=/>Dashboard</a></li><li><a href=/posts/>Blogs</a></li><li><a href=/categories/weekly/>Newsletter</a></li><li><a href=/index.xml>RSS</a></li><li><a href=/friends/>Friends</a></li><li><a href=/about/>About</a></li></ul><script>function goToRandomPost(){const e=["/posts/erc-8004-trustless-agents/?utm_source=random","/posts/fix-the-ghost-notification-of-github/?utm_source=random","/posts/disable-SIP-on-Macos/?utm_source=random","/posts/the-tips-of-macos-automator/?utm_source=random","/posts/mainland-network-circuits/?utm_source=random","/posts/cloudflare-warp/?utm_source=random","/posts/the-principle-of-cloudflare-saas-optimization/?utm_source=random","/posts/the-mitm-and-https-capturing/?utm_source=random","/posts/how-to-keep-your-mac-always-awake/?utm_source=random","/posts/the-way-to-get-cookie/?utm_source=random","/posts/how-to-choose-the-right-software-and-creative-license/?utm_source=random","/posts/0516-add-live-photo-effect-to-hugo/?utm_source=random","/posts/the-practice-of-resolving-domain/?utm_source=random","/posts/hidden-markov-models/?utm_source=random","/posts/markov-chains/?utm_source=random","/posts/markov-processes/?utm_source=random","/posts/0418-find-the-formula-rendering-issue-of-hugo/?utm_source=random","/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/stock-prices/?utm_source=random","/posts/possion-processes/?utm_source=random","/posts/docker-with-gpu/?utm_source=random","/posts/stochastic-processes/?utm_source=random","/posts/some-useful-tools/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-walks/?utm_source=random","/posts/sequences-of-random-variables/?utm_source=random","/posts/parameter-estimation/?utm_source=random","/posts/two-random-variables/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/some-useful-commands-to-share/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random","/posts/my-must-haves-for-macos-memo/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script><a class=random onclick=goToRandomPost()>Stroll</a></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>timerring</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#abstract>Abstract</a></li><li><a href=#motivation>Motivation</a></li><li><a href=#specification>Specification</a><ul><li><a href=#identity-registry>Identity Registry</a></li><li><a href=#reputation-registry>Reputation Registry</a></li><li><a href=#validation-registry>Validation Registry</a></li></ul></li><li><a href=#rationale>Rationale</a></li><li><a href=#test-cases>Test Cases</a></li><li><a href=#workflow>Workflow</a></li><li><a href=#security-considerations>Security Considerations</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></aside></header><article class=markdown><h1>ERC 8004 Trustless Agents</h1><h5>October 16, 2025
Â·
8 min read</h5><div><a href=/categories/tutorial/ style=color:#000>Tutorial</a></div><div><a href=/tags/eth/ style=color:#000>ETH</a> <span style=color:#000>| </span><a href=/tags/agentfi/ style=color:#000>AgentFi</a></div><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-10-16-15-35-36.png></p><p class=title-image><i>Cover from https://www.quillaudits.com/blog/smart-contract/erc-8004</i></p><blockquote class="book-hint info">If you have any questions, feel free to comment below. Click the block can copy the code.<br>And if you think it's helpful to you, just click on the ads which can support this site. Thanks!</blockquote><hr><p>This article is my understanding of the ERC-8004: Trustless Agents, which is a standard for Identity Registry, Reputation Registry and Verification Registry. And refer to the Ethereum Improvement Proposals <a href=https://eips.ethereum.org/EIPS/eip-8004 target=_blank rel="nofollow noopener">ERC-8004: Trustless Agents</a><sup><a href=#ref-link-1 class=footnote-ref id=ref-link-back-1>[1]</a></sup>.</p><h2 id=abstract>Abstract
<a class=anchor href=#abstract>#</a></h2><p>ERC-8004 uses the blockchain as a public index and trust anchor so that agents can be discovered, assessed, and validated in open environments:</p><ul><li>Identity Registry: Built on ERC-721 + URIStorage, providing each agent with a portable, browsable on-chain handle.</li><li>Reputation Registry: A standard interface to collect and query feedback signals, supporting on-chain aggregation and off-chain sophisticated scoring.</li><li>Validation Registry: Composable hooks for independent validators (stake-secured re-execution, zkML, TEE, etc.) to respond to validation requests.</li></ul><p>The three trust models can be layered according to value-at-risk: simple reputation for low-stakes, and crypto-economic/zk/TEE validations for high-stakes.</p><blockquote><p>Payments are out of scope for this EIP, but x402 payment proofs can enrich the feedback signals.</p></blockquote><h2 id=motivation>Motivation
<a class=anchor href=#motivation>#</a></h2><ul><li>Existing protocols (e.g., MCP, A2A) define how agents communicate and orchestrate tasks, but not how to discover trustworthy agents.</li><li>Cross-organizational ecosystems need unified standards for registration, feedback, and validation so that explorers, marketplaces, and auditor networks can emerge.</li><li>Put &ldquo;pointers and commitments&rdquo; (URIs and hashes) on-chain for auditability and composability while leaving heavy logic to specialized off-chain services.</li></ul><h2 id=specification>Specification
<a class=anchor href=#specification>#</a></h2><h3 id=identity-registry>Identity Registry
<a class=anchor href=#identity-registry>#</a></h3><p>Based on ERC-721 (using <code>ERC721URIStorage</code>), each agent is a transferable token whose <code>tokenURI</code> points to the Agent Registration File. Content addressing (e.g., IPFS) is recommended; HTTPS is acceptable with hash commitments.</p><p>Key identifiers: <code>namespace</code> (eip155), <code>chainId</code>, <code>identityRegistry</code> address, and <code>agentId</code> (ERC-721 tokenId).</p><p>Registration file (required/optional fields) example:</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;type&#34;</span>: <span style=color:#ba2121>&#34;https://eips.ethereum.org/EIPS/eip-8004#registration-v1&#34;</span>, <span style=color:#408080;font-style:italic>// Type marker, compatible with ERC-721 apps
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>  <span style=color:green;font-weight:700>&#34;name&#34;</span>: <span style=color:#ba2121>&#34;myAgentName&#34;</span>, <span style=color:#408080;font-style:italic>// Human-readable agent name
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>  <span style=color:green;font-weight:700>&#34;description&#34;</span>: <span style=color:#ba2121>&#34;Human-readable description, MAY include pricing and interaction methods&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;image&#34;</span>: <span style=color:#ba2121>&#34;https://example.com/agentimage.png&#34;</span>, <span style=color:#408080;font-style:italic>// Agent avatar/icon
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>  <span style=color:green;font-weight:700>&#34;endpoints&#34;</span>: [
</span></span><span style=display:flex><span>    { <span style=color:green;font-weight:700>&#34;name&#34;</span>: <span style=color:#ba2121>&#34;A2A&#34;</span>, <span style=color:green;font-weight:700>&#34;endpoint&#34;</span>: <span style=color:#ba2121>&#34;https://agent.example/.well-known/agent-card.json&#34;</span>, <span style=color:green;font-weight:700>&#34;version&#34;</span>: <span style=color:#ba2121>&#34;0.3.0&#34;</span> }, <span style=color:#408080;font-style:italic>// Agent-to-Agent card: auth, skills advertisement, messaging, task orchestration
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    { <span style=color:green;font-weight:700>&#34;name&#34;</span>: <span style=color:#ba2121>&#34;MCP&#34;</span>, <span style=color:green;font-weight:700>&#34;endpoint&#34;</span>: <span style=color:#ba2121>&#34;https://mcp.agent.eth/&#34;</span>, <span style=color:green;font-weight:700>&#34;capabilities&#34;</span>: {}, <span style=color:green;font-weight:700>&#34;version&#34;</span>: <span style=color:#ba2121>&#34;2025-06-18&#34;</span> }, <span style=color:#408080;font-style:italic>// Model Context Protocol endpoint: exposes prompts/resources/tools/completions
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    { <span style=color:green;font-weight:700>&#34;name&#34;</span>: <span style=color:#ba2121>&#34;OASF&#34;</span>, <span style=color:green;font-weight:700>&#34;endpoint&#34;</span>: <span style=color:#ba2121>&#34;ipfs://{cid}&#34;</span>, <span style=color:green;font-weight:700>&#34;version&#34;</span>: <span style=color:#ba2121>&#34;0.7&#34;</span> }, <span style=color:#408080;font-style:italic>// OASF manifest (v0.7): off-chain service schema/descriptor pinned on IPFS
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    { <span style=color:green;font-weight:700>&#34;name&#34;</span>: <span style=color:#ba2121>&#34;ENS&#34;</span>, <span style=color:green;font-weight:700>&#34;endpoint&#34;</span>: <span style=color:#ba2121>&#34;vitalik.eth&#34;</span>, <span style=color:green;font-weight:700>&#34;version&#34;</span>: <span style=color:#ba2121>&#34;v1&#34;</span> }, <span style=color:#408080;font-style:italic>// ENS name bound to the agent identity
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    { <span style=color:green;font-weight:700>&#34;name&#34;</span>: <span style=color:#ba2121>&#34;DID&#34;</span>, <span style=color:green;font-weight:700>&#34;endpoint&#34;</span>: <span style=color:#ba2121>&#34;did:method:foobar&#34;</span>, <span style=color:green;font-weight:700>&#34;version&#34;</span>: <span style=color:#ba2121>&#34;v1&#34;</span> }, <span style=color:#408080;font-style:italic>// Decentralized Identifier of the agent (DID URI)
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    { <span style=color:green;font-weight:700>&#34;name&#34;</span>: <span style=color:#ba2121>&#34;agentWallet&#34;</span>, <span style=color:green;font-weight:700>&#34;endpoint&#34;</span>: <span style=color:#ba2121>&#34;eip155:1:0x742d35CcXXXXXXXX&#34;</span> } <span style=color:#408080;font-style:italic>// Agent wallet (CAIP-10 account id): namespace:chainId:address
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>  ],
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;registrations&#34;</span>: [
</span></span><span style=display:flex><span>    { <span style=color:green;font-weight:700>&#34;agentId&#34;</span>: <span style=color:#666>22</span>, <span style=color:green;font-weight:700>&#34;agentRegistry&#34;</span>: <span style=color:#ba2121>&#34;eip155:1:{identityRegistry}&#34;</span> } <span style=color:#408080;font-style:italic>// At least one registration anchor is recommended
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>  ],
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;supportedTrust&#34;</span>: [ <span style=color:#408080;font-style:italic>// OPTIONAL: supported trust models
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:#ba2121>&#34;reputation&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#ba2121>&#34;crypto-economic&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#ba2121>&#34;tee-attestation&#34;</span>
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Optional on-chain metadata extension:</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-solidity data-lang=solidity><span style=display:flex><span><span style=color:#408080;font-style:italic>// Interface-style for portability across languages/chains; concrete impl can extend ERC721URIStorage
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span><span style=color:green;font-weight:700>interface</span> <span style=color:#00f;font-weight:700>IERC8004IdentityRegistry</span> <span style=color:#408080;font-style:italic>/* is ERC721URIStorage */</span> {
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Store arbitrary metadata as bytes with string keys for broad interoperability
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>event</span> <span style=color:#00f;font-weight:700>MetadataSet</span>(<span style=color:#b00040>uint256</span> <span style=color:green;font-weight:700>indexed</span> agentId, <span style=color:#b00040>string</span> <span style=color:green;font-weight:700>indexed</span> indexedKey, <span style=color:#b00040>string</span> key, <span style=color:#b00040>bytes</span> <span style=color:green>value</span>);
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>event</span> <span style=color:#00f;font-weight:700>Registered</span>(<span style=color:#b00040>uint256</span> <span style=color:green;font-weight:700>indexed</span> agentId, <span style=color:#b00040>string</span> tokenURI, <span style=color:#b00040>address</span> <span style=color:green;font-weight:700>indexed</span> owner);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>struct</span> <span style=color:#00f;font-weight:700>MetadataEntry</span> {
</span></span><span style=display:flex><span>        <span style=color:#b00040>string</span> key;   <span style=color:#408080;font-style:italic>// Recommendation: standardize keys (e.g., agentWallet, agentName) for indexing
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>        <span style=color:#b00040>bytes</span> <span style=color:green>value</span>;  <span style=color:#408080;font-style:italic>// Self-describing encodings: ABI-encoded bytes, JSON, or multibyte text
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Register a new Agent and optionally batch-write metadata (saves transactions)
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>register</span>(<span style=color:#b00040>string</span> calldata tokenURI, MetadataEntry[] calldata metadata)
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>external</span>
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>returns</span> (<span style=color:#b00040>uint256</span> agentId);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Simplified variants when only URI is set
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>register</span>(<span style=color:#b00040>string</span> calldata tokenURI) <span style=color:green;font-weight:700>external</span> <span style=color:green;font-weight:700>returns</span> (<span style=color:#b00040>uint256</span> agentId);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Reserve an id first, setTokenURI later (for async file generation)
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>register</span>() <span style=color:green;font-weight:700>external</span> <span style=color:green;font-weight:700>returns</span> (<span style=color:#b00040>uint256</span> agentId);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Read/write optional metadata (access control: owner/operator only for writes)
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>getMetadata</span>(<span style=color:#b00040>uint256</span> agentId, <span style=color:#b00040>string</span> calldata key) <span style=color:green;font-weight:700>external</span> <span style=color:green;font-weight:700>view</span> <span style=color:green;font-weight:700>returns</span> (<span style=color:#b00040>bytes</span> <span style=color:green;font-weight:700>memory</span> <span style=color:green>value</span>);
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>setMetadata</span>(<span style=color:#b00040>uint256</span> agentId, <span style=color:#b00040>string</span> calldata key, <span style=color:#b00040>bytes</span> calldata <span style=color:green>value</span>) <span style=color:green;font-weight:700>external</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Practical notes:</p><ul><li>Prefer IPFS for <code>tokenURI</code> to get content addressing and longevity; if using HTTPS, also commit a hash on-chain.</li><li>Use operator approvals to delegate registration file updates while keeping ownership transferable.</li></ul><h3 id=reputation-registry>Reputation Registry
<a class=anchor href=#reputation-registry>#</a></h3><p>The reputation registry is decoupled from the identity registry but stores the <code>identityRegistry</code> address upon deployment to keep queryability:</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-solidity data-lang=solidity><span style=display:flex><span><span style=color:green;font-weight:700>interface</span> <span style=color:#00f;font-weight:700>IERC8004ReputationRegistry</span> {
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Cross-reference identity registry
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>getIdentityRegistry</span>() <span style=color:green;font-weight:700>external</span> <span style=color:green;font-weight:700>view</span> <span style=color:green;font-weight:700>returns</span> (<span style=color:#b00040>address</span> identityRegistry);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Submit feedback (authorized by agent-signed feedbackAuth).
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:#408080;font-style:italic>// score: 0-100; tag1/tag2: free-form bytes32 tags for on-chain filtering; uri/hash: off-chain details + integrity.
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>giveFeedback</span>(
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint256</span> agentId,
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint8</span> score,
</span></span><span style=display:flex><span>        <span style=color:#b00040>bytes32</span> tag1,
</span></span><span style=display:flex><span>        <span style=color:#b00040>bytes32</span> tag2,
</span></span><span style=display:flex><span>        <span style=color:#b00040>string</span> calldata uri,
</span></span><span style=display:flex><span>        <span style=color:#b00040>bytes32</span> fileHash,
</span></span><span style=display:flex><span>        <span style=color:#b00040>bytes</span> calldata feedbackAuth
</span></span><span style=display:flex><span>    ) <span style=color:green;font-weight:700>external</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Emitted on new feedback
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>event</span> <span style=color:#00f;font-weight:700>NewFeedback</span>(
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint256</span> <span style=color:green;font-weight:700>indexed</span> agentId,
</span></span><span style=display:flex><span>        <span style=color:#b00040>address</span> <span style=color:green;font-weight:700>indexed</span> clientAddress,
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint64</span> <span style=color:green;font-weight:700>indexed</span> feedbackIndex,
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint8</span> score,
</span></span><span style=display:flex><span>        <span style=color:#b00040>bytes32</span> tag1,
</span></span><span style=display:flex><span>        <span style=color:#b00040>bytes32</span> tag2,
</span></span><span style=display:flex><span>        <span style=color:#b00040>string</span> uri
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Revoke a previously submitted feedback by the same client
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>revokeFeedback</span>(<span style=color:#b00040>uint256</span> agentId, <span style=color:#b00040>uint64</span> feedbackIndex) <span style=color:green;font-weight:700>external</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>event</span> <span style=color:#00f;font-weight:700>FeedbackRevoked</span>(
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint256</span> <span style=color:green;font-weight:700>indexed</span> agentId,
</span></span><span style=display:flex><span>        <span style=color:#b00040>address</span> <span style=color:green;font-weight:700>indexed</span> clientAddress,
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint64</span> <span style=color:green;font-weight:700>indexed</span> feedbackIndex
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Append a response/evidence to an existing feedback (e.g., endorsement, dispute, refund note)
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>appendResponse</span>(
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint256</span> agentId,
</span></span><span style=display:flex><span>        <span style=color:#b00040>address</span> clientAddress,
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint64</span> feedbackIndex,
</span></span><span style=display:flex><span>        <span style=color:#b00040>string</span> calldata responseUri,
</span></span><span style=display:flex><span>        <span style=color:#b00040>bytes32</span> responseHash
</span></span><span style=display:flex><span>    ) <span style=color:green;font-weight:700>external</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>event</span> <span style=color:#00f;font-weight:700>ResponseAppended</span>(
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint256</span> <span style=color:green;font-weight:700>indexed</span> agentId,
</span></span><span style=display:flex><span>        <span style=color:#b00040>address</span> <span style=color:green;font-weight:700>indexed</span> clientAddress,
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint64</span> feedbackIndex,
</span></span><span style=display:flex><span>        <span style=color:#b00040>address</span> <span style=color:green;font-weight:700>indexed</span> responder,
</span></span><span style=display:flex><span>        <span style=color:#b00040>string</span> responseUri
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Count responses to a particular feedback (e.g., endorsements or disputes)
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>getResponseCount</span>(
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint256</span> agentId,
</span></span><span style=display:flex><span>        <span style=color:#b00040>address</span> clientAddress,
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint64</span> feedbackIndex,
</span></span><span style=display:flex><span>        <span style=color:#b00040>address</span>[] calldata responders
</span></span><span style=display:flex><span>    ) <span style=color:green;font-weight:700>external</span> <span style=color:green;font-weight:700>view</span> <span style=color:green;font-weight:700>returns</span> (<span style=color:#b00040>uint64</span> count);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>getClients</span>(<span style=color:#b00040>uint256</span> agentId) <span style=color:green;font-weight:700>external</span> <span style=color:green;font-weight:700>view</span> <span style=color:green;font-weight:700>returns</span> (<span style=color:#b00040>address</span>[] <span style=color:green;font-weight:700>memory</span> clients);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>getLastIndex</span>(<span style=color:#b00040>uint256</span> agentId, <span style=color:#b00040>address</span> clientAddress) <span style=color:green;font-weight:700>external</span> <span style=color:green;font-weight:700>view</span> <span style=color:green;font-weight:700>returns</span> (<span style=color:#b00040>uint64</span> lastIndex);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Optional feedback file (off-chain, IPFS recommended) example:</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;agentRegistry&#34;</span>: <span style=color:#ba2121>&#34;eip155:1:{identityRegistry}&#34;</span>, <span style=color:#408080;font-style:italic>// Bind to the identity registry instance
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>  <span style=color:green;font-weight:700>&#34;agentId&#34;</span>: <span style=color:#666>22</span>,
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;clientAddress&#34;</span>: <span style=color:#ba2121>&#34;eip155:1:{clientAddress}&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;createdAt&#34;</span>: <span style=color:#ba2121>&#34;2025-09-23T12:00:00Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;feedbackAuth&#34;</span>: <span style=color:#ba2121>&#34;...&#34;</span>, <span style=color:#408080;font-style:italic>// Agent-signed pre-authorization allowing this client to submit feedback
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>  <span style=color:green;font-weight:700>&#34;score&#34;</span>: <span style=color:#666>100</span>, <span style=color:#408080;font-style:italic>// Score in [0, 100]
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>
</span></span><span style=display:flex><span>  <span style=color:#408080;font-style:italic>// Optional fields aligned with A2A/MCP for filtering and aggregation
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>  <span style=color:green;font-weight:700>&#34;tag1&#34;</span>: <span style=color:#ba2121>&#34;foo&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;tag2&#34;</span>: <span style=color:#ba2121>&#34;bar&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;skill&#34;</span>: <span style=color:#ba2121>&#34;as-defined-by-A2A&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;context&#34;</span>: <span style=color:#ba2121>&#34;as-defined-by-A2A&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;task&#34;</span>: <span style=color:#ba2121>&#34;as-defined-by-A2A&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:green;font-weight:700>&#34;capability&#34;</span>: <span style=color:#ba2121>&#34;tools&#34;</span>, <span style=color:#408080;font-style:italic>// As per MCP: &#34;prompts&#34;, &#34;resources&#34;, &#34;tools&#34; or &#34;completions&#34;
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>  <span style=color:green;font-weight:700>&#34;name&#34;</span>: <span style=color:#ba2121>&#34;the-mcp-tool-name&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#408080;font-style:italic>// Payment proof (x402 example) to improve signal credibility
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>  <span style=color:green;font-weight:700>&#34;proof_of_payment&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>&#34;fromAddress&#34;</span>: <span style=color:#ba2121>&#34;0x00...&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>&#34;toAddress&#34;</span>: <span style=color:#ba2121>&#34;0x00...&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>&#34;chainId&#34;</span>: <span style=color:#ba2121>&#34;1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>&#34;txHash&#34;</span>: <span style=color:#ba2121>&#34;0x00...&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>   <span style=color:#408080;font-style:italic>// Other fields
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>  <span style=color:green;font-weight:700>&#34; ... &#34;</span>: { <span style=color:green;font-weight:700>&#34; ... &#34;</span> } <span style=color:#408080;font-style:italic>// MAY
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>}
</span></span></code></pre></div><p>Practical notes:</p><ul><li>Structure indexable fields (tag, capability, name, etc.) for subgraphs and data products.</li><li>Use pre-authorization-before-feedback to reduce spam; still combine with reviewer reputation and rate limits.</li></ul><h3 id=validation-registry>Validation Registry
<a class=anchor href=#validation-registry>#</a></h3><p>Tracks agent-initiated validation requests and validator responses; supports multi-round updates and aggregation:</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-solidity data-lang=solidity><span style=display:flex><span><span style=color:green;font-weight:700>interface</span> <span style=color:#00f;font-weight:700>IERC8004ValidationRegistry</span> {
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Cross-reference identity registry for composability
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>getIdentityRegistry</span>() <span style=color:green;font-weight:700>external</span> <span style=color:green;font-weight:700>view</span> <span style=color:green;font-weight:700>returns</span> (<span style=color:#b00040>address</span> identityRegistry);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Agent (owner or operator) initiates a validation request
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:#408080;font-style:italic>// requestUri points to full inputs/outputs; if not content-addressed (e.g., HTTPS), also submit requestHash
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>event</span> <span style=color:#00f;font-weight:700>ValidationRequest</span>(<span style=color:#b00040>address</span> <span style=color:green;font-weight:700>indexed</span> validatorAddress, <span style=color:#b00040>uint256</span> <span style=color:green;font-weight:700>indexed</span> agentId, <span style=color:#b00040>string</span> requestUri, <span style=color:#b00040>bytes32</span> <span style=color:green;font-weight:700>indexed</span> requestHash);
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>validationRequest</span>(
</span></span><span style=display:flex><span>        <span style=color:#b00040>address</span> validatorAddress,
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint256</span> agentId,
</span></span><span style=display:flex><span>        <span style=color:#b00040>string</span> calldata requestUri,
</span></span><span style=display:flex><span>        <span style=color:#b00040>bytes32</span> requestHash
</span></span><span style=display:flex><span>    ) <span style=color:green;font-weight:700>external</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Validator responds (can be repeated for soft/hard finality or status progression)
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:#408080;font-style:italic>// response: 0-100 (binary or graded); responseUri/responseHash can anchor audit evidence
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>event</span> <span style=color:#00f;font-weight:700>ValidationResponse</span>(<span style=color:#b00040>address</span> <span style=color:green;font-weight:700>indexed</span> validatorAddress, <span style=color:#b00040>uint256</span> <span style=color:green;font-weight:700>indexed</span> agentId, <span style=color:#b00040>bytes32</span> <span style=color:green;font-weight:700>indexed</span> requestHash, <span style=color:#b00040>uint8</span> response, <span style=color:#b00040>string</span> responseUri, <span style=color:#b00040>bytes32</span> tag);
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>validationResponse</span>(
</span></span><span style=display:flex><span>        <span style=color:#b00040>bytes32</span> requestHash,
</span></span><span style=display:flex><span>        <span style=color:#b00040>uint8</span> response,
</span></span><span style=display:flex><span>        <span style=color:#b00040>string</span> calldata responseUri,
</span></span><span style=display:flex><span>        <span style=color:#b00040>bytes32</span> responseHash,
</span></span><span style=display:flex><span>        <span style=color:#b00040>bytes32</span> tag
</span></span><span style=display:flex><span>    ) <span style=color:green;font-weight:700>external</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Read-only: fetch latest status by requestHash
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>getValidationStatus</span>(<span style=color:#b00040>bytes32</span> requestHash)
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>external</span>
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>view</span>
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>returns</span> (<span style=color:#b00040>address</span> validatorAddress, <span style=color:#b00040>uint256</span> agentId, <span style=color:#b00040>uint8</span> response, <span style=color:#b00040>bytes32</span> tag, <span style=color:#b00040>uint256</span> lastUpdate);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Read-only: aggregated stats for an agent (optionally filter by validator addresses and tag)
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>getSummary</span>(<span style=color:#b00040>uint256</span> agentId, <span style=color:#b00040>address</span>[] calldata validatorAddresses, <span style=color:#b00040>bytes32</span> tag)
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>external</span>
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>view</span>
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>returns</span> (<span style=color:#b00040>uint64</span> count, <span style=color:#b00040>uint8</span> avgResponse);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic>// Read-only: list requests by agent/validator
</span></span></span><span style=display:flex><span><span style=color:#408080;font-style:italic></span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>getAgentValidations</span>(<span style=color:#b00040>uint256</span> agentId) <span style=color:green;font-weight:700>external</span> <span style=color:green;font-weight:700>view</span> <span style=color:green;font-weight:700>returns</span> (<span style=color:#b00040>bytes32</span>[] <span style=color:green;font-weight:700>memory</span> requestHashes);
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>function</span> <span style=color:#00f>getValidatorRequests</span>(<span style=color:#b00040>address</span> validatorAddress) <span style=color:green;font-weight:700>external</span> <span style=color:green;font-weight:700>view</span> <span style=color:green;font-weight:700>returns</span> (<span style=color:#b00040>bytes32</span>[] <span style=color:green;font-weight:700>memory</span> requestHashes);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Practical notes:</p><ul><li>For non-content-addressed <code>requestUri</code>/<code>responseUri</code>, always commit the corresponding hashes on-chain.</li><li>Multiple <code>validationResponse</code> calls allow soft/hard finality or multi-stage review with <code>tag</code>.</li></ul><h2 id=rationale>Rationale
<a class=anchor href=#rationale>#</a></h2><ul><li>Decouple from agent communication protocols: on-chain stores âpointers and commitmentsâ; capabilities evolve via MCP/A2A.</li><li>Public-good reputation signals: unified schema and minimal interfaces enable interoperable scoring/auditor networks.</li><li>Gas-friendly: clients need not register; with EIP-7702 and similar, frictionless feedback is possible; heavy aggregation off-chain.</li><li>Singleton deployments: one registry per chain simplifies discovery while allowing multi-chain registrations and operations.</li><li>Not reinvent the wheel. The protocol not only expands A2A, but also bases trust assumptions on what builders are already thinking about. So, Stake-secured validation? Use <a href=https://blog.eigencloud.xyz/introducing-verifiable-agents-on-eigenlayer/ target=_blank rel="nofollow noopener">EigenLayer</a><sup><a href=#ref-link-2 class=footnote-ref id=ref-link-back-2>[2]</a></sup>. TEE attestations? Check out <a href=https://phala.com/ target=_blank rel="nofollow noopener">Phala</a><sup><a href=#ref-link-3 class=footnote-ref id=ref-link-back-3>[3]</a></sup> its <a href=https://arxiv.org/pdf/2409.03992 target=_blank rel="nofollow noopener">paper</a><sup><a href=#ref-link-4 class=footnote-ref id=ref-link-back-4>[4]</a></sup> and <a href=https://near.ai/ target=_blank rel="nofollow noopener">Near.AI</a><sup><a href=#ref-link-5 class=footnote-ref id=ref-link-back-5>[5]</a></sup>.</li></ul><h2 id=test-cases>Test Cases
<a class=anchor href=#test-cases>#</a></h2><ul><li>Build agent explorers/marketplaces: reuse ERC-721 browsing/transfer UX to view avatars, descriptions, and endpoints. There are some good DeAI projects <a href=https://deai.directory/ target=_blank rel="nofollow noopener">listed</a><sup><a href=#ref-link-6 class=footnote-ref id=ref-link-back-6>[6]</a></sup>.</li><li>Reputation systems: simple on-chain aggregates (mean/median) plus off-chain sybil-resistant scoring and visualization.</li><li>Validation networks: stake re-execution, zkML, TEE attestationâall pluggable via a common interface.</li></ul><h2 id=workflow>Workflow
<a class=anchor href=#workflow>#</a></h2><p>The workflow of the <a href=https://github.com/vistara-apps/erc-8004-example/ target=_blank rel="nofollow noopener">ERC-8004 example</a><sup><a href=#ref-link-7 class=footnote-ref id=ref-link-back-7>[7]</a></sup> is as follows:</p><script src=/mermaid.min.js></script><script>mermaid.initialize({flowchart:{useMaxWidth:!0},theme:"default"})</script><p class=mermaid>sequenceDiagram
participant User as User/Client
participant Alice as Server Agent<br>(Alice - local)
participant Bob as Validator Agent<br>(Bob - local)
participant Charlie as Client Agent<br>(Charlie - local)
participant IR as IdentityRegistry<br>(on-chain contract)
participant RR as ReputationRegistry<br>(on-chain contract)
participant VR as ValidationRegistry<br>(on-chain contract)
participant Storage as Local Storage<br>(data/, validations/)
Note over User,Storage: Step 1: Deploy contracts
User->>IR: Deploy IdentityRegistry
User->>RR: Deploy ReputationRegistry
User->>VR: Deploy ValidationRegistry
Note over User,Storage: Steps 2-3: Agent registration
Alice->>IR: newAgent("alice.example.com", 0xAAA)
IR-->>Alice: agentId = 1
IR->>IR: emit AgentRegistered(1)
Bob->>IR: newAgent("bob.example.com", 0xBBB)
IR-->>Bob: agentId = 2
IR->>IR: emit AgentRegistered(2)
Charlie->>IR: newAgent("charlie.example.com", 0xCCC)
IR-->>Charlie: agentId = 3
IR->>IR: emit AgentRegistered(3)
Note over User,Storage: Step 4: Market analysis workflow
Alice->>Alice: analyze_market()<br>CrewAI multi-agent workflow
Alice->>Alice: Senior Market Analyst<br>Analyze BTC trend
Alice->>Alice: Risk Assessment Reviewer<br>Assess risks
Alice->>Storage: Write analysis result<br>data/btc_analysis.json
Note over User,Storage: Step 5: Request validation
Alice->>VR: validationRequest(<br>validatorId=2,<br>serverId=1,<br>dataHash)
VR->>VR: Record validation request
VR->>VR: emit ValidationRequestEvent(2, 1, dataHash)
Note over User,Storage: Step 6: AI-driven validation
Bob->>VR: Read validation request
Bob->>Storage: Read analysis file<br>data/btc_analysis.json
Bob->>Bob: validate_analysis()<br>CrewAI validation workflow
Bob->>Bob: Senior Validator<br>Review methodology
Bob->>Bob: QA Specialist<br>Final assessment
Bob->>Storage: Write validation result<br>validations/validation_result.json
Note over User,Storage: Step 7: Submit validation response
Bob->>VR: validationResponse(<br>dataHash,<br>score=96)
VR->>VR: Record validation score
VR->>VR: emit ValidationResponseEvent(2, 1, dataHash, 96)
Note over User,Storage: Step 8: Feedback authorization
Charlie->>RR: acceptFeedback(<br>clientId=3,<br>serverId=1)
RR->>RR: Record authorization relation
RR->>RR: emit AuthFeedback(3, 1, feedbackAuthId)
Note over User,Storage: Step 9: Audit trail
User->>IR: getAgent(1, 2, 3)
IR-->>User: Return agent info
User->>VR: getValidationResponse(dataHash)
VR-->>User: Return validation score 96
User->>RR: isFeedbackAuthorized(3, 1)
RR-->>User: Return authorization status</p><p>You can also check <a href=https://medium.com/hashkey-capital-insights/erc-8004-and-the-agent-economy-a9b9eee9fa8d target=_blank rel="nofollow noopener">the third party explanation</a><sup><a href=#ref-link-8 class=footnote-ref id=ref-link-back-8>[8]</a></sup>.</p><h2 id=security-considerations>Security Considerations
<a class=anchor href=#security-considerations>#</a></h2><ul><li>Pre-authorization mitigates but does not eliminate sybil attacks; combine with reviewer reputation and throttling/deposits.</li><li>On-chain pointers and hashes are immutable, ensuring audit trails; handle privacy and compliance carefully.</li><li>Validator incentives/slashing are managed by respective protocols (e.g., staking/penalty curves); out of scope here.</li><li>Registration files/endpoints assert capabilities but do not prove them; pair with validation models(reputation, validation, and TEE attestation).</li></ul><div class=footnotes role=doc-endnotes><h3>References</h3><ol><li id=ref-link-1><a href=https://eips.ethereum.org/EIPS/eip-8004 target=_blank rel="nofollow noopener">https://eips.ethereum.org/EIPS/eip-8004</a>
<a href=#ref-link-back-1 class=footnote-backref role=doc-backlink>â©ï¸</a></li><li id=ref-link-2><a href=https://blog.eigencloud.xyz/introducing-verifiable-agents-on-eigenlayer/ target=_blank rel="nofollow noopener">https://blog.eigencloud.xyz/introducing-verifiable-agents-on-eigenlayer/</a>
<a href=#ref-link-back-2 class=footnote-backref role=doc-backlink>â©ï¸</a></li><li id=ref-link-3><a href=https://phala.com/ target=_blank rel="nofollow noopener">https://phala.com/</a>
<a href=#ref-link-back-3 class=footnote-backref role=doc-backlink>â©ï¸</a></li><li id=ref-link-4><a href=https://arxiv.org/pdf/2409.03992 target=_blank rel="nofollow noopener">https://arxiv.org/pdf/2409.03992</a>
<a href=#ref-link-back-4 class=footnote-backref role=doc-backlink>â©ï¸</a></li><li id=ref-link-5><a href=https://near.ai/ target=_blank rel="nofollow noopener">https://near.ai/</a>
<a href=#ref-link-back-5 class=footnote-backref role=doc-backlink>â©ï¸</a></li><li id=ref-link-6><a href=https://deai.directory/ target=_blank rel="nofollow noopener">https://deai.directory/</a>
<a href=#ref-link-back-6 class=footnote-backref role=doc-backlink>â©ï¸</a></li><li id=ref-link-7><a href=https://github.com/vistara-apps/erc-8004-example/ target=_blank rel="nofollow noopener">https://github.com/vistara-apps/erc-8004-example/</a>
<a href=#ref-link-back-7 class=footnote-backref role=doc-backlink>â©ï¸</a></li><li id=ref-link-8><a href=https://medium.com/hashkey-capital-insights/erc-8004-and-the-agent-economy-a9b9eee9fa8d target=_blank rel="nofollow noopener">https://medium.com/hashkey-capital-insights/erc-8004-and-the-agent-economy-a9b9eee9fa8d</a>
<a href=#ref-link-back-8 class=footnote-backref role=doc-backlink>â©ï¸</a></li></ol></div><br><hr><div class=post-nav><a href="https://blogs.timerring.com/posts/fix-the-ghost-notification-of-github/?utm_source=nav">&lt;&lt; prev | Fix the Ghost...</a>
<a onclick=goToRandomPost() style=cursor:pointer>Continue strolling</a></div><hr>If you want to follow my updates, or have a coffee chat with me, feel free to connect with me:<div class=support><a href=https://github.com/timerring class=book-btn target=_blank><i class="bi bi-github"></i>
Follow @timerring
</a><a href=https://x.com/imjohnhowe class=book-btn target=_blank><i class="bi bi-twitter-x"></i>
@imjohnhowe
</a><a href=https://www.zhihu.com/people/timerring class=book-btn target=_blank>ç¥ä¹@timerring
</a><a href=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-05-17-20-54.png class=book-btn target=_blank><i class="bi bi-wechat"></i>
Official Account</a></div><div style=margin-bottom:8px></div><script>function goToRandomPost(){const e=["/posts/erc-8004-trustless-agents/?utm_source=random","/posts/fix-the-ghost-notification-of-github/?utm_source=random","/posts/disable-SIP-on-Macos/?utm_source=random","/posts/the-tips-of-macos-automator/?utm_source=random","/posts/mainland-network-circuits/?utm_source=random","/posts/cloudflare-warp/?utm_source=random","/posts/the-principle-of-cloudflare-saas-optimization/?utm_source=random","/posts/the-mitm-and-https-capturing/?utm_source=random","/posts/how-to-keep-your-mac-always-awake/?utm_source=random","/posts/the-way-to-get-cookie/?utm_source=random","/posts/how-to-choose-the-right-software-and-creative-license/?utm_source=random","/posts/0516-add-live-photo-effect-to-hugo/?utm_source=random","/posts/the-practice-of-resolving-domain/?utm_source=random","/posts/hidden-markov-models/?utm_source=random","/posts/markov-chains/?utm_source=random","/posts/markov-processes/?utm_source=random","/posts/0418-find-the-formula-rendering-issue-of-hugo/?utm_source=random","/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/stock-prices/?utm_source=random","/posts/possion-processes/?utm_source=random","/posts/docker-with-gpu/?utm_source=random","/posts/stochastic-processes/?utm_source=random","/posts/some-useful-tools/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-walks/?utm_source=random","/posts/sequences-of-random-variables/?utm_source=random","/posts/parameter-estimation/?utm_source=random","/posts/two-random-variables/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/some-useful-commands-to-share/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random","/posts/my-must-haves-for-macos-memo/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script></article><ins class=adsbygoogle style=display:block data-ad-format=fluid data-ad-layout-key=-c2+7a+0+1 data-ad-client=ca-pub-1347694832132708 data-ad-slot=5778132754></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><div class="book-tabs-content markdown-inner"><div id=tcomment></div><script src=https://giscus.app/client.js data-repo=timerring/blog data-repo-id=R_kgDONeZYZg data-category=Announcements data-category-id=DIC_kwDONeZYZs4ClRWs data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><div class=footer-info><p style=text-align:center>&copy; 2022 - present <a href=https://github.com/timerring>timerring</a></p></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#abstract>Abstract</a></li><li><a href=#motivation>Motivation</a></li><li><a href=#specification>Specification</a><ul><li><a href=#identity-registry>Identity Registry</a></li><li><a href=#reputation-registry>Reputation Registry</a></li><li><a href=#validation-registry>Validation Registry</a></li></ul></li><li><a href=#rationale>Rationale</a></li><li><a href=#test-cases>Test Cases</a></li><li><a href=#workflow>Workflow</a></li><li><a href=#security-considerations>Security Considerations</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style><h3>Connects</h3><a href=https://github.com/timerring target=_blank><img src=https://trendshift.io/api/badge/developers/8761 alt="timerring | Trendshift" style=width:250px;height:55px width=250 height=55></a><br><br><style>.github-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.github-stats-card:hover{transform:translateY(-2px)}.github-stats-card .icon{flex-shrink:0;font-size:14px;color:#06f}.github-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.github-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.github-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://github.com/timerring class=github-stats-card target=_blank rel="noopener noreferrer"><i class="bi bi-github" style=font-size:20px></i><div class=text-content><span class=title>Github: @timerring</span>
<span class=stats>Followers 145 - Stars 3.4k<br>Commits 1.4k - PRs 260</span></div></a><br><style>.x-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.x-stats-card:hover{transform:translateY(-2px)}.x-stats-card .icon{flex-shrink:0;font-size:14px;color:#06f}.x-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.x-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.x-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://x.com/imjohnhowe class=x-stats-card target=_blank rel="noopener noreferrer"><i class="bi bi-twitter-x" style=font-size:20px></i><div class=text-content><span class=title>X: @imjohnhowe</span>
<span class=stats>Followers 7 - Tweets 14</span></div></a><br><style>.linkedin-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.linkedin-stats-card:hover{transform:translateY(-2px)}.linkedin-stats-card .icon{flex-shrink:0;font-size:14px;color:#0966c2}.linkedin-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.linkedin-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.linkedin-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://www.linkedin.com/in/john-howe-zh/ class=linkedin-stats-card target=_blank rel="noopener noreferrer"><div class=icon><i class="bi bi-linkedin" style=font-size:20px></i></div><div class=text-content><span class=title>linkedin: @john-howe-zh</span>
<span class=stats>Welcome to connect with me</span></div></a><br><style>.zhihu-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.zhihu-stats-card:hover{transform:translateY(-2px)}.zhihu-stats-card .icon{flex-shrink:0;font-size:14px;color:#06f}.zhihu-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.zhihu-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.zhihu-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://www.zhihu.com/people/timerring class=zhihu-stats-card target=_blank rel="noopener noreferrer"><div class=icon>ç¥ä¹</div><div class=text-content><span class=title>Zhihu(ä¸­æåå®¢): @timerring</span>
<span class=stats>Followers 488 - Voteups 1.1k<br>Articles 259 - Answers 192</span></div></a><br><style>.wechatoa-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.wechatoa-stats-card:hover{transform:translateY(-2px)}.wechatoa-stats-card .icon{flex-shrink:0;font-size:14px;color:#06f}.wechatoa-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.wechatoa-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.wechatoa-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-13-23-14-18.png class=wechatoa-stats-card target=_blank rel="noopener noreferrer"><div class=icon><i class="bi bi-wechat" style=font-size:20px></i></div><div class=text-content><span class=title>Wechat Account @AIShareLab</span>
<span class=stats>Followers 1k<br>Just as a temporary chat.</span></div></a><br><style>.csdn-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.csdn-stats-card:hover{transform:translateY(-2px)}.csdn-stats-card .icon{flex-shrink:0;font-size:8px;color:#fb5531}.csdn-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.csdn-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.csdn-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://blog.csdn.net/m0_52316372 class=csdn-stats-card target=_blank rel="noopener noreferrer"><div class=icon>CSDN</div><div class=text-content><span class=title>CSDN: @timerring</span>
<span class=stats>Followers 182k - Voteups 10k<br>Articles 556 - Collects 39k</span></div></a><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-1347694832132708 data-ad-slot=1676758726 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></aside></main></body></html>