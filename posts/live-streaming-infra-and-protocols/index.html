<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In our daily life, you may always see the live streaming on the internet, such as the live streaming of the video conference, the live streaming of the sports event, the live streaming of the online course, etc. And sometimes you even start your own live streaming, but we all get used to just clicking the button on the screen to start the live streaming, do you know what is happening behind the scene?"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://blog.timerring.com/posts/live-streaming-infra-and-protocols/"><meta property="og:site_name" content="timerring"><meta property="og:title" content="Live Streaming infra and protocols"><meta property="og:description" content="In our daily life, you may always see the live streaming on the internet, such as the live streaming of the video conference, the live streaming of the sports event, the live streaming of the online course, etc. And sometimes you even start your own live streaming, but we all get used to just clicking the button on the screen to start the live streaming, do you know what is happening behind the scene?"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-24T23:02:26+08:00"><meta property="article:modified_time" content="2025-03-24T23:02:26+08:00"><meta property="article:tag" content="Video"><meta property="article:tag" content="HTTP"><meta property="article:tag" content="RTMP"><meta property="article:tag" content="HLS"><meta property="article:tag" content="Live"><title>Live Streaming infra and protocols | timerring</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.b2496f568c7d479e460b580e0e81d4b97841f83539eba8c770dc9f8e1aa7682e.css integrity="sha256-sklvVox9R55GC1gODoHUuXhB+DU566jHcNyfjhqnaC4=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.f2f94d6afd64dc78aa4ab6401a314c18b751b05f909ccfe861d4899c828e7e08.js integrity="sha256-8vlNav1k3HiqSrZAGjFMGLdRsF+QnM/oYdSJnIKOfgg=" crossorigin=anonymous></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/favicon.png alt=Logo><span>timerring</span></a></h2><hr><p>Rhythmic trend.</p><div class=book-search><div class=gcse-search></div></div><script async src="https://cse.google.com/cse.js?cx=40782701766144f96"></script><ul><li><a href=/>Dashboard</a></li><li><a href=/posts/>Blogs</a></li><li><a href=/categories/weekly/>Newsletter</a></li><li><a href=/index.xml>RSS</a></li><li><a href=/friends/>Friends</a></li><li><a href=/about/>About</a></li></ul><script>function goToRandomPost(){const e=["/posts/hidden-markov-models/?utm_source=random","/posts/markov-chains/?utm_source=random","/posts/markov-processes/?utm_source=random","/posts/stock-prices/?utm_source=random","/posts/possion-processes/?utm_source=random","/posts/random-walks/?utm_source=random","/posts/0418-find-the-formula-rendering-issue-of-hugo/?utm_source=random","/posts/stochastic-processes/?utm_source=random","/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/docker-with-gpu/?utm_source=random","/posts/some-useful-tools/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/sequences-of-random-variables/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/some-useful-commands-to-share/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script><a class=random onclick=goToRandomPost()>Stroll</a></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>timerring</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a><ul><li><a href=#push-streaming-end>Push streaming (End)</a></li><li><a href=#origin-server>Origin server</a></li><li><a href=#pull-streaming-end>Pull streaming (End)</a></li></ul></li><li><a href=#the-common-protocols>The common protocols</a><ul><li><a href=#rtmp>RTMP</a></li><li><a href=#hls>HLS</a></li><li><a href=#http-flv--hdl>HTTP-FLV / HDL</a></li><li><a href=#mpeg-dash>MPEG-DASH</a></li><li><a href=#websocket>Websocket</a></li></ul></li><li><a href=#practical-situation>Practical situation</a></li><li><a href=#references>References</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></aside></header><article class=markdown><h1>Live Streaming infra and protocols</h1><h5>March 24, 2025
·
3 min read
<span id=busuanzi_container_page_pv>· Page View: <span id=busuanzi_value_page_pv></span></span></h5><div><a href=/categories/tutorial/ style=color:#000>Tutorial</a></div><div><a href=/tags/video/ style=color:#000>Video</a> <span style=color:#000>| </span><a href=/tags/http/ style=color:#000>HTTP</a> <span style=color:#000>| </span><a href=/tags/rtmp/ style=color:#000>RTMP</a> <span style=color:#000>| </span><a href=/tags/hls/ style=color:#000>HLS</a> <span style=color:#000>| </span><a href=/tags/live/ style=color:#000>Live</a></div><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-03-24-23-14-57.png></p><p class=title-image><i>The process of live streaming from alicloud</i></p><blockquote class="book-hint info">If you have any questions, feel free to comment below.</blockquote><hr><p>In our daily life, you may always see the live streaming on the internet, such as the live streaming of the video conference, the live streaming of the sports event, the live streaming of the online course, etc. And sometimes you even start your own live streaming, but we all get used to just clicking the button on the screen to start the live streaming, do you know what is happening behind the scene?</p><h2 id=introduction>Introduction
<a class=anchor href=#introduction>#</a></h2><p>Before we start, we need to know some common terms in the live streaming.</p><p><div class=image-desc><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-03-24-23-14-57.png alt="The process of live streaming from alicloud1">
<i>The process of live streaming from alicloud<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></i></div></p><ul><li>The blue line is the push-pull logic of the live streaming.</li><li>The yellow line is the bussiness logic.</li></ul><h3 id=push-streaming-end>Push streaming (End)
<a class=anchor href=#push-streaming-end>#</a></h3><p>Push streaming means the process of sending the live streaming data(collect audio and video data) to the streaming media server. In this process, the network demand is high, you should better use the stable network environment to push the streaming data. In this process, the common protocol is <strong>RTMP</strong>. And the data format is encoded video eg. <code>h264</code>, <code>h265</code>, encoded audio eg. <code>aac</code>. (The decode process is done in the playback end.)</p><p>Normally, the CDN server is used to cache the live streaming as well as pull the streaming from the origin server if itself receives the large number of requests.</p><h3 id=origin-server>Origin server
<a class=anchor href=#origin-server>#</a></h3><p>The origin servers are comprised of the <strong>streaming media server</strong> and the <strong>bussiness server end</strong>. The streaming media server is responsible for the live streaming data, and the bussiness server end is responsible for the bussiness logic such as the danmaku, the chat or even the payment of the sales.</p><h3 id=pull-streaming-end>Pull streaming (End)
<a class=anchor href=#pull-streaming-end>#</a></h3><p>The pull streaming end is also called as the playback end. The devices like the smart phone, the tablet or the computer can pull the live streaming data from the CDN server. Pull streaming means the process of receiving the live streaming data from the server. The common protocol is <strong>RTMP</strong>, <strong>HLS</strong>, HDL(HTTP-FLV).</p><h2 id=the-common-protocols>The common protocols
<a class=anchor href=#the-common-protocols>#</a></h2><h3 id=rtmp>RTMP
<a class=anchor href=#rtmp>#</a></h3><p><strong>Real Time Messaging Protocol</strong>, which is a <strong>TCP</strong> based protocol (by Adobe), so the data will be transferred in the TCP tunnel. The most video format is <code>flv</code>. The port is <code>1935</code>.</p><p>It has some advantages:</p><ul><li>RTMP is a TCP based protocol, so it can use the TCP long connection to transfer the data, while the 1935 port may be blocked.</li><li>It will not generate the files in the streaming media server. So it can be <strong>lower latency</strong>.</li></ul><h3 id=hls>HLS
<a class=anchor href=#hls>#</a></h3><p><strong>HTTP Live Streaming</strong>, which is a protocol of Apple. It has a great compatibility in every platform. It is used to transfer the video segments <code>ts</code>. The streaming media server will use <strong><code>m3u8</code> index file</strong> to manage the video segments(ensure the order of the video segments). The media server will cache the video data into a ts file around 10 seconds. Then when the client requests the video data, the media server will send the newest <code>ts</code> file to the client. It has good mobile compatibility. Besides, the HLS is based on the HTTP protocol, so everytime it requests the video data, it will be a new HTTP request, which will increase the loadency. From above we can analyze the HLS cannot meet the requirement of the low latency. <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p><p>It still has some advantages:</p><ul><li>HLS is based on the HTTP protocol, so it can easily bypass the firewall.</li><li>The player uses the ts file, so the client can <strong>change the bit rate</strong> easily.</li></ul><h3 id=http-flv--hdl>HTTP-FLV / HDL
<a class=anchor href=#http-flv--hdl>#</a></h3><p>HTTP-FLV is a lightweight protocol for live streaming. It is used to transfer the video eg. <code>flv</code> in <strong>http</strong>, and it is based on the HTTP protocol with port <code>80</code>. The advantage is that the header information is simple still the RTMP has a complex handshake protocol. So it will be little faster than the RTMP.</p><h3 id=mpeg-dash>MPEG-DASH
<a class=anchor href=#mpeg-dash>#</a></h3><p><strong>Moving Picture Experts Group-Dynamic Adaptive Streaming Over HTTP</strong> is the first international streaming media protocol based on HTTP. Its unique value is that it can almost universally play videos, supporting formats including H.264, H.265, VP8/9, and AV1.</p><h3 id=websocket>Websocket
<a class=anchor href=#websocket>#</a></h3><p>Normally, the <code>websocket</code> protocol is not used in the streaming media, it is often used in the bussiness end for communication and interation. The interation between the host and the audience is jit. So the http cannot takes the role due to the fact that it is stateless and connectionless. Generally, the <strong>websocket</strong> is used to achieve the goal.</p><h2 id=practical-situation>Practical situation
<a class=anchor href=#practical-situation>#</a></h2><p>Normal, the live streaming system will be:</p><ul><li>The host pushes the streaming via <strong>RTMP</strong>.</li><li>The client will pull the streaming via <strong>HTTP-FLV</strong> or <strong>HLS</strong>.</li></ul><h2 id=references>References
<a class=anchor href=#references>#</a></h2><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.alibabacloud.com/blog/the-details-of-the-stress-testing-guarantee-technology-behind-livestreaming-during-double-11_598294 target=_blank>The Details of the Stress Testing Guarantee Technology behind Livestreaming during Double 11<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://www.cdnetworks.com/blog/media-delivery/http-live-streaming/ target=_blank>HTTP Live Streaming<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><h2>Related readings</h2><ul><li><a href="/posts/video-technology-101/?utm_source=related">Video Technology 101</a></li></ul><hr><div class=post-nav><a href="https://blog.timerring.com/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=nav">&lt;&lt; prev | Implement...</a>
<a onclick=goToRandomPost() style=cursor:pointer>Continue strolling
</a><a href="https://blog.timerring.com/posts/how-to-use-git-submodule/?utm_source=nav">How to Use Git... ｜ next >></a></div><hr>If you find this blog useful and want to support my blog, need my skill for something, or have a coffee chat with me, feel free to:<div class=support><a href=https://ko-fi.com/polls/What-is-the-custom-topic-for-the-next-month-C0C219LHQJ class=book-btn target=_blank>Subscribe to participate in blog topics and custom services
</a><a href=https://ko-fi.com/timerring class=book-btn target=_blank>Buy me a coffee</a></div><div style=margin-bottom:8px></div><script>function goToRandomPost(){const e=["/posts/hidden-markov-models/?utm_source=random","/posts/markov-chains/?utm_source=random","/posts/markov-processes/?utm_source=random","/posts/stock-prices/?utm_source=random","/posts/possion-processes/?utm_source=random","/posts/random-walks/?utm_source=random","/posts/0418-find-the-formula-rendering-issue-of-hugo/?utm_source=random","/posts/stochastic-processes/?utm_source=random","/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/docker-with-gpu/?utm_source=random","/posts/some-useful-tools/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/sequences-of-random-variables/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/some-useful-commands-to-share/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script></article><div class=book-comments><div class="book-tabs-content markdown-inner"><div id=tcomment></div><script src=https://giscus.app/client.js data-repo=timerring/blog data-repo-id=R_kgDONeZYZg data-category=Announcements data-category-id=DIC_kwDONeZYZs4ClRWs data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div></div><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><div class=busuanzi-footer><p style=text-align:center>&copy; 2022 - present <a href=https://github.com/timerring>timerring</a> | PV: <span id=busuanzi_value_site_pv></span> | UV: <span id=busuanzi_value_site_uv></span></p></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a><ul><li><a href=#push-streaming-end>Push streaming (End)</a></li><li><a href=#origin-server>Origin server</a></li><li><a href=#pull-streaming-end>Pull streaming (End)</a></li></ul></li><li><a href=#the-common-protocols>The common protocols</a><ul><li><a href=#rtmp>RTMP</a></li><li><a href=#hls>HLS</a></li><li><a href=#http-flv--hdl>HTTP-FLV / HDL</a></li><li><a href=#mpeg-dash>MPEG-DASH</a></li><li><a href=#websocket>Websocket</a></li></ul></li><li><a href=#practical-situation>Practical situation</a></li><li><a href=#references>References</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></div></aside></main></body></html>