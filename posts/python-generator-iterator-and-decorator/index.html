<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This article will review the basic knowledge of Python, including generator, iterator, and decorator."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Python Generator Iterator and Decorator"><meta property="og:description" content="This article will review the basic knowledge of Python, including generator, iterator, and decorator."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.timerring.com/posts/python-generator-iterator-and-decorator/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-23T19:19:14+08:00"><meta property="article:modified_time" content="2024-12-23T19:19:14+08:00"><title>Python Generator Iterator and Decorator | timerring</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.e5c400e9a39f7eafc90351230108cdc038497f3b6478689fe605ab3dd006274d.css integrity="sha256-5cQA6aOffq/JA1EjAQjNwDhJfztkeGif5gWrPdAGJ00=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.6bd654788a81fff745293b96cd9e9ca70715b428674359050ab627aae1ac936d.js integrity="sha256-a9ZUeIqB//dFKTuWzZ6cpwcVtChnQ1kFCrYnquGsk20=" crossorigin=anonymous></script>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/favicon.png alt=Logo><span>timerring</span></a></h2><hr><p>Rhythmic trend.</p><div class=book-search><div class=gcse-search></div></div><script async src="https://cse.google.com/cse.js?cx=40782701766144f96"></script><ul><li><a href=/>Dashboard</a></li><li><a href=/posts/>Blogs</a></li><li><a href=/categories/weekly/>Newsletter</a></li><li><a href=/index.xml>RSS</a></li><li><a href=/friends/>Friends</a></li><li><a href=/about/>About</a></li></ul><script>function goToRandomPost(){const e=["/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script><a class=random onclick=goToRandomPost()>Stroll</a></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>timerring</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#generator>Generator</a><ul><li><a href=#generator-expression>Generator Expression</a></li><li><a href=#generator-function-yield>Generator Function <code>yield</code></a></li></ul></li><li><a href=#iterator>Iterator</a><ul><li><a href=#iterable>Iterable</a></li><li><a href=#iterator-1>Iterator</a></li></ul></li><li><a href=#decorator>Decorator</a><ul><li><a href=#template>Template</a></li><li><a href=#demand>Demand</a></li><li><a href=#function-object>Function Object</a></li><li><a href=#high-order-function>High-order Function</a></li><li><a href=#nested-function>Nested Function</a></li><li><a href=#closure>Closure</a></li><li><a href=#legb-rules>LEGB rules</a></li><li><a href=#a-simple-decorator>A Simple Decorator</a></li><li><a href=#syntax-sugar>Syntax Sugar</a></li><li><a href=#decorate-function-with-parameters>Decorate Function with Parameters</a></li><li><a href=#decorator-with-parameters>Decorator with Parameters</a></li><li><a href=#return-to-the-source>Return to the Source</a></li></ul></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></aside></header><article class=markdown><h1>Python Generator Iterator and Decorator</h1><h5>December 23, 2024
·
10 min read
<span id=busuanzi_container_page_pv>· Page View: <span id=busuanzi_value_page_pv></span></span></h5><div><a href=/categories/tutorial/ style=color:#000>Tutorial</a></div><div><a href=/tags/python/ style=color:#000>Python</a></div><blockquote class="book-hint info">If you have any questions, feel free to comment below.</blockquote><hr><p>This article will review the basic knowledge of Python, including generator, iterator, and decorator.</p><h1 id=ch9-generator-iterator-and-decorator>CH9 Generator, Iterator, and Decorator
<a class=anchor href=#ch9-generator-iterator-and-decorator>#</a></h1><h2 id=generator>Generator
<a class=anchor href=#generator>#</a></h2><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>ls <span style=color:#666>=</span> [ i<span style=color:#666>**</span><span style=color:#666>2</span> <span style=color:green;font-weight:700>for</span> i <span style=color:#a2f;font-weight:700>in</span> <span style=color:green>range</span>(<span style=color:#666>1</span>, <span style=color:#666>1000001</span>)]
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>for</span> i <span style=color:#a2f;font-weight:700>in</span> ls:
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>pass</span>
</span></span></code></pre></div><p>Disadvantage: Occupying a lot of memory</p><ol><li>Use lazy calculation</li><li>Do not need to store a large amount of data at once</li><li>Calculate on the fly, only calculate the value needed each time</li><li>Actually always executing the next() operation until there is no value left</li></ol><h3 id=generator-expression>Generator Expression
<a class=anchor href=#generator-expression>#</a></h3><p>Do not need to store all data</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green>sum</span>((i <span style=color:green;font-weight:700>for</span> i <span style=color:#a2f;font-weight:700>in</span> <span style=color:green>range</span>(<span style=color:#666>101</span>))) <span style=color:#408080;font-style:italic># Sum, inside a generator</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 5050</span>
</span></span></code></pre></div><h3 id=generator-function-yield>Generator Function <code>yield</code>
<a class=anchor href=#generator-function-yield>#</a></h3><ul><li>Generate Fibonacci sequence</li></ul><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>fib</span>(<span style=color:green>max</span>):
</span></span><span style=display:flex><span>    n, a, b <span style=color:#666>=</span> <span style=color:#666>0</span>, <span style=color:#666>1</span>, <span style=color:#666>1</span>
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>while</span> n <span style=color:#666>&lt;</span> <span style=color:green>max</span>:
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(a)
</span></span><span style=display:flex><span>        a, b <span style=color:#666>=</span> b, a <span style=color:#666>+</span> b
</span></span><span style=display:flex><span>        n <span style=color:#666>=</span> n <span style=color:#666>+</span> <span style=color:#666>1</span>
</span></span></code></pre></div><p>Construct generator function, execute each time when next() is called, return when encountering yield statement, continue execution from the yield statement last returned.</p><p>Difference:</p><ul><li>A normal function executes all code in the function body at once when called, returning a result (if there is a return value) and then ends.</li><li>The function containing yield (i.e., the generator function) executes until yield, returns a value, and then continues execution multiple times based on needs, possibly returning new values each time, until the function is executed to completion (e.g., when reaching the end of the function or encountering a return statement). It seems like the function has memory effect.</li></ul><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>fib</span>(<span style=color:green>max</span>):
</span></span><span style=display:flex><span>    n, a, b <span style=color:#666>=</span> <span style=color:#666>0</span>, <span style=color:#666>1</span>, <span style=color:#666>1</span>
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>while</span> n <span style=color:#666>&lt;</span> <span style=color:green>max</span>:
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>yield</span> a
</span></span><span style=display:flex><span>        a, b <span style=color:#666>=</span> b, a <span style=color:#666>+</span> b
</span></span><span style=display:flex><span>        n <span style=color:#666>=</span> n <span style=color:#666>+</span> <span style=color:#666>1</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>fib(<span style=color:#666>10</span>)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># &lt;generator object fib at 0x000001BE11B19048&gt;</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>for</span> i <span style=color:#a2f;font-weight:700>in</span> fib(<span style=color:#666>10</span>):
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(i)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 1</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 1</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 2</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 3</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 5</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 8</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 13</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># ...</span>
</span></span></code></pre></div><h2 id=iterator>Iterator
<a class=anchor href=#iterator>#</a></h2><h3 id=iterable>Iterable
<a class=anchor href=#iterable>#</a></h3><p>Objects that can be directly used in for loops are collectively referred to as Iterable:</p><p><strong>List, tuple, string, dictionary, set, file</strong></p><blockquote><p>Use <code>isinstance()</code> to determine if an object is an Iterable object</p></blockquote><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>from</span> <span style=color:#00f;font-weight:700>collections</span> <span style=color:green;font-weight:700>import</span> Iterable
</span></span><span style=display:flex><span><span style=color:green>isinstance</span>([<span style=color:#666>1</span>, <span style=color:#666>2</span>, <span style=color:#666>3</span>], Iterable)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># True</span>
</span></span></code></pre></div><p>Generator</p><p>Generators can not only be used in for loops but also be called by the next() function</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>squares <span style=color:#666>=</span> (i<span style=color:#666>**</span><span style=color:#666>2</span> <span style=color:green;font-weight:700>for</span> i <span style=color:#a2f;font-weight:700>in</span> <span style=color:green>range</span>(<span style=color:#666>5</span>))
</span></span><span style=display:flex><span><span style=color:green>isinstance</span>(squares, Iterable)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># True</span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(<span style=color:green>next</span>(squares))
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># Until there is no data to take, throw StopIteration</span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(<span style=color:green>next</span>(squares)) <span style=color:#408080;font-style:italic># StopIteration: </span>
</span></span></code></pre></div><p><strong>Objects that can be called by the next() function and return the next value until there is no data to take are called Iterators: Iterator</strong></p><h3 id=iterator-1>Iterator
<a class=anchor href=#iterator-1>#</a></h3><p>Use <code>isinstance()</code> to determine if an object is an Iterator object</p><ol><li>Generators are Iterators</li></ol><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>from</span> <span style=color:#00f;font-weight:700>collections</span> <span style=color:green;font-weight:700>import</span> Iterator
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>squares <span style=color:#666>=</span> (i<span style=color:#666>**</span><span style=color:#666>2</span> <span style=color:green;font-weight:700>for</span> i <span style=color:#a2f;font-weight:700>in</span> <span style=color:green>range</span>(<span style=color:#666>5</span>))
</span></span><span style=display:flex><span><span style=color:green>isinstance</span>(squares, Iterator)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># True</span>
</span></span></code></pre></div><ol start=2><li>List, tuple, string, dictionary, set are not Iterators</li></ol><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green>isinstance</span>([<span style=color:#666>1</span>, <span style=color:#666>2</span>, <span style=color:#666>3</span>], Iterator)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># False</span>
</span></span></code></pre></div><ol start=3><li>Can create an Iterator by <code>iter(Iterable)</code></li></ol><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green>isinstance</span>(<span style=color:green>iter</span>([<span style=color:#666>1</span>, <span style=color:#666>2</span>, <span style=color:#666>3</span>]), Iterator)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># True</span>
</span></span></code></pre></div><p>for item in Iterable is equivalent to:
First get the Iterator of the Iterable by <code>iter()</code> function, then call <code>next()</code> method on the obtained Iterator to get the next value and assign it to item, and the loop ends when encountering the <code>StopIteration</code> exception.</p><ol start=4><li><code>zip</code> <code>enumerate</code> and other functions in <code>itertools</code> are Iterators</li></ol><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>x <span style=color:#666>=</span> [<span style=color:#666>1</span>, <span style=color:#666>2</span>]
</span></span><span style=display:flex><span>y <span style=color:#666>=</span> [<span style=color:#ba2121>&#34;a&#34;</span>, <span style=color:#ba2121>&#34;b&#34;</span>]
</span></span><span style=display:flex><span><span style=color:green>zip</span>(x, y) <span style=color:#408080;font-style:italic># &lt;zip at 0x1be11b13c48&gt;</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>for</span> i <span style=color:#a2f;font-weight:700>in</span> <span style=color:green>zip</span>(x, y):
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(i)
</span></span><span style=display:flex><span><span style=color:green>isinstance</span>(<span style=color:green>zip</span>(x, y), Iterator) <span style=color:#408080;font-style:italic># True</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>numbers <span style=color:#666>=</span> [<span style=color:#666>1</span>, <span style=color:#666>2</span>, <span style=color:#666>3</span>, <span style=color:#666>4</span>, <span style=color:#666>5</span>]
</span></span><span style=display:flex><span><span style=color:green>enumerate</span>(numbers) <span style=color:#408080;font-style:italic># &lt;enumerate at 0x1be11b39990&gt;</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>for</span> i <span style=color:#a2f;font-weight:700>in</span> <span style=color:green>enumerate</span>(numbers):
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(i)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>isinstance</span>(<span style=color:green>enumerate</span>(numbers), Iterator) <span style=color:#408080;font-style:italic># True</span>
</span></span></code></pre></div><ol start=5><li>File is an Iterator</li></ol><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>with</span> <span style=color:green>open</span>(<span style=color:#ba2121>&#34;测试文件.txt&#34;</span>, <span style=color:#ba2121>&#34;r&#34;</span>, encoding <span style=color:#666>=</span> <span style=color:#ba2121>&#34;utf-8&#34;</span>) <span style=color:green;font-weight:700>as</span> f:
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:green>isinstance</span>(f, Iterator)) <span style=color:#408080;font-style:italic># True</span>
</span></span></code></pre></div><ol start=6><li>Iterator is consumable</li></ol><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>squares <span style=color:#666>=</span> (i<span style=color:#666>**</span><span style=color:#666>2</span> <span style=color:green;font-weight:700>for</span> i <span style=color:#a2f;font-weight:700>in</span> <span style=color:green>range</span>(<span style=color:#666>3</span>))
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>for</span> square <span style=color:#a2f;font-weight:700>in</span> squares:
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(square)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic>#  0</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 1</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 4</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>for</span> square <span style=color:#a2f;font-weight:700>in</span> squares:
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(square)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># Cannot iterate anymore, because it has been exhausted</span>
</span></span></code></pre></div><ol start=7><li><code>range()</code> is not an Iterator</li></ol><p>Can be called <code>range()</code> as a lazy sequence, it is a sequence, but does not contain any content in memory, but answers questions through calculation.</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>numbers <span style=color:#666>=</span> <span style=color:green>range</span>(<span style=color:#666>10</span>)
</span></span><span style=display:flex><span><span style=color:green>isinstance</span>(numbers, Iterator) <span style=color:#408080;font-style:italic># False</span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(<span style=color:green>len</span>(numbers))   <span style=color:#408080;font-style:italic># Has length 10</span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(numbers[<span style=color:#666>0</span>])     <span style=color:#408080;font-style:italic># Can be indexed 0</span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(<span style=color:#666>9</span> <span style=color:#a2f;font-weight:700>in</span> numbers)   <span style=color:#408080;font-style:italic># Can exist calculation True</span>
</span></span><span style=display:flex><span><span style=color:green>next</span>(numbers)         <span style=color:#408080;font-style:italic># Cannot be called by next() TypeError: &#39;range&#39; object is not an iterator</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># Will not be exhausted</span>
</span></span></code></pre></div><h2 id=decorator>Decorator
<a class=anchor href=#decorator>#</a></h2><h3 id=template>Template
<a class=anchor href=#template>#</a></h3><blockquote><p>Talk is cheap, just show the code</p></blockquote><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>decorator</span>(func):
</span></span><span style=display:flex><span>    <span style=color:#408080;font-style:italic># The wrapper is the function to be decorated(must keep the same parameters with the original function)</span>
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>wrapper</span>(<span style=color:#666>*</span>args, <span style=color:#666>**</span>kwargs):
</span></span><span style=display:flex><span>        <span style=color:#408080;font-style:italic># Do something before the function is called</span>
</span></span><span style=display:flex><span>        res <span style=color:#666>=</span> func(<span style=color:#666>*</span>args, <span style=color:#666>**</span>kwargs) <span style=color:#408080;font-style:italic># Call the original function</span>
</span></span><span style=display:flex><span>        <span style=color:#408080;font-style:italic># Do something after the function is called</span>
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>return</span> res
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> wrapper <span style=color:#408080;font-style:italic># Return the wrapper(if the original function returns value, the wrapper must return the value)</span>
</span></span></code></pre></div><h3 id=demand>Demand
<a class=anchor href=#demand>#</a></h3><p>(1) Need to add some features to the already developed program
(2) Cannot modify the source code of the function in the program
(3) Cannot change the calling method of the function in the program</p><h3 id=function-object>Function Object
<a class=anchor href=#function-object>#</a></h3><ol><li>You can assign a function to a variable and call the variable to realize the function of the original function.</li><li>Functions can be passed as parameters</li></ol><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>square</span>(x):
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> x<span style=color:#666>**</span><span style=color:#666>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(<span style=color:green>type</span>(square))      <span style=color:#408080;font-style:italic># square is an instance of the function class</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># &lt;class &#39;function&#39;&gt;</span>
</span></span><span style=display:flex><span>pow_2 <span style=color:#666>=</span> square          <span style=color:#408080;font-style:italic># It can be understood that this function is given an alias pow 2</span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(pow_2(<span style=color:#666>5</span>)) <span style=color:#408080;font-style:italic>#  25</span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(square(<span style=color:#666>5</span>)) <span style=color:#408080;font-style:italic>#  25</span>
</span></span></code></pre></div><h3 id=high-order-function>High-order Function
<a class=anchor href=#high-order-function>#</a></h3><p>One of the following is sufficient:</p><ol><li>Receives a function as a parameter</li><li>Or returns a function</li></ol><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>square</span>(x):
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> x<span style=color:#666>**</span><span style=color:#666>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>pow_2</span>(fun):
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> fun
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>f <span style=color:#666>=</span> pow_2(square)
</span></span><span style=display:flex><span>f(<span style=color:#666>8</span>) <span style=color:#408080;font-style:italic># 64</span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(f <span style=color:#666>==</span> square) <span style=color:#408080;font-style:italic># True</span>
</span></span></code></pre></div><h3 id=nested-function>Nested Function
<a class=anchor href=#nested-function>#</a></h3><p>Define a function inside a function</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>outer</span>():
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;outer is running&#34;</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>inner</span>():
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;inner is running&#34;</span>)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    inner()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>outer()
</span></span></code></pre></div><h3 id=closure>Closure
<a class=anchor href=#closure>#</a></h3><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>outer</span>():
</span></span><span style=display:flex><span>    x <span style=color:#666>=</span> <span style=color:#666>1</span>
</span></span><span style=display:flex><span>    z <span style=color:#666>=</span> <span style=color:#666>10</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>inner</span>():
</span></span><span style=display:flex><span>        y <span style=color:#666>=</span> x <span style=color:#666>+</span> <span style=color:#666>100</span>
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>return</span> y, z
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> inner
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>f <span style=color:#666>=</span> outer()   <span style=color:#408080;font-style:italic># In fact, f contains the inner function itself + the environment of the outer function</span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(f)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># &lt;function outer.&lt;locals&gt;.inner at 0x000001BE11B1D730&gt;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green>print</span>(f<span style=color:#666>.</span>__closure__)         <span style=color:#408080;font-style:italic># __closure__ property contains information from the outer function</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>for</span> i <span style=color:#a2f;font-weight:700>in</span> f<span style=color:#666>.</span>__closure__:
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(i<span style=color:#666>.</span>cell_contents)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic>#     (&lt;cell at 0x000001BE0FDE06D8: int object at 0x00007FF910D59340&gt;, &lt;cell at 0x000001BE0FDE0A98: int object at 0x00007FF910D59460&gt;)</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic>#     1</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic>#     10</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>res <span style=color:#666>=</span> f()
</span></span><span style=display:flex><span><span style=color:green>print</span>(res)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># (101, 10)</span>
</span></span></code></pre></div><p><strong>Closure: Function that extends the scope</strong></p><ul><li><p>If a function is defined in the scope of another function and <strong>references a variable in the outer function</strong>, then this function is called a closure</p></li><li><p>A closure is an entity composed of a function and its related reference environment (i.e., closure = function + reference environment)</p></li><li><p>Once a variable with the same name is redefined inside the inner function, it becomes a local variable</p></li></ul><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>outer_function</span>(x):
</span></span><span style=display:flex><span>    outer_variable <span style=color:#666>=</span> x
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>inner_function</span>(y):
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>return</span> outer_variable <span style=color:#666>+</span> y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> inner_function
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>closure <span style=color:#666>=</span> outer_function(<span style=color:#666>10</span>)  <span style=color:#408080;font-style:italic># x is 10 closure = inner_function</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>result <span style=color:#666>=</span> closure(<span style=color:#666>5</span>)  <span style=color:#408080;font-style:italic># y is 5</span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(result)  <span style=color:#408080;font-style:italic># 15</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>outer</span>():
</span></span><span style=display:flex><span>    x <span style=color:#666>=</span> <span style=color:#666>1</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>inner</span>():
</span></span><span style=display:flex><span>        x <span style=color:#666>=</span> x<span style=color:#666>+</span><span style=color:#666>100</span>
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>return</span> x
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> inner
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>f <span style=color:#666>=</span> outer()             
</span></span><span style=display:flex><span>f()
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic>#     &lt;ipython-input-87-d2da1048af8b&gt; in inner()</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic>#          3 </span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic>#          4     def inner():</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic>#     ----&gt; 5         x = x+100</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic>#          6         return x</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># UnboundLocalError: local variable &#39;x&#39; referenced before assignment</span>
</span></span></code></pre></div><p><code>nonlocal</code> allows the inner function to modify the closure variable, indicating that it is not an internal variable, and uses the variable of the outer function.</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>outer</span>():
</span></span><span style=display:flex><span>    x <span style=color:#666>=</span> <span style=color:#666>1</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>inner</span>():
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>nonlocal</span> x
</span></span><span style=display:flex><span>        x <span style=color:#666>=</span> x<span style=color:#666>+</span><span style=color:#666>100</span>
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>return</span> x  
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> inner
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>f <span style=color:#666>=</span> outer()             
</span></span><span style=display:flex><span>f()
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 1</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># 101</span>
</span></span></code></pre></div><h3 id=legb-rules>LEGB rules
<a class=anchor href=#legb-rules>#</a></h3><p>In order to understand actually how the scope resolution happening in Python, we should analyze the LEGB rule because, it is the sequence of names(variables, functions, objects and so on) that Python resolves in a program.</p><p>LEGB stanas for： （L） Local scope （E） Enclosed scope （G） Global scope （B） Built-in scope</p><p>So the sequence of the scope resolution is: Local scope -> Enclosed scope -> Global scope -> Built-in scope.
In a closure environment, if firstly search the local scope, if not, it will search the enclosed scope, you can refer to this example:</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#408080;font-style:italic>#foo.py</span>
</span></span><span style=display:flex><span>filename <span style=color:#666>=</span> <span style=color:#ba2121>&#34;foo.py&#34;</span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(filename)
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>call_func</span>(f):
</span></span><span style=display:flex><span>    filename <span style=color:#666>=</span> <span style=color:#ba2121>&#34;foo_call.py&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(filename)
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> f()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic>#func.py</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>foo</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>filename <span style=color:#666>=</span> <span style=color:#ba2121>&#34;func_global.py&#34;</span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(filename)
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>wrapper</span>():
</span></span><span style=display:flex><span>    filename <span style=color:#666>=</span> <span style=color:#ba2121>&#34;func_enclosed.py&#34;</span> 
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(filename)
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>show_filename</span>():
</span></span><span style=display:flex><span>        filename <span style=color:#666>=</span> <span style=color:#ba2121>&#34;func_inner.py&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(filename)
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>return</span> <span style=color:#ba2121>f</span><span style=color:#ba2121>&#34;filename: </span><span style=color:#b68;font-weight:700>{</span>filename<span style=color:#b68;font-weight:700>}</span><span style=color:#ba2121>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(foo<span style=color:#666>.</span>call_func(show_filename))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>if</span> __name__ <span style=color:#666>==</span> <span style=color:#ba2121>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    wrapper()
</span></span></code></pre></div><p>Guess what the output will be? Can you explain the print sequence?</p><ol><li>the main call the foo.call_func first, so the foo will be loaded first, the <code>foo.py</code> will be printed when <code>import foo</code>.</li><li>then the <code>func.py</code> will be loaded, the <code>func_global.py</code> will be printed.</li><li>Now the wrapper is called, the <code>func_enclosed.py</code> will be printed.</li><li>And the call_func is a closure, it contains the f() and its environment. Now execute the closure, so the <code>foo_call.py</code> will be printed.</li><li>Now execute the return, actually the return is the show_filename function, so the <code>func_inner.py</code> will be printed. And the filename return is the <code>func_inner.py</code>. <strong>(Local scope)</strong></li></ol><p>So the output is:</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>foo<span style=color:#666>.</span>py
</span></span><span style=display:flex><span>func_global<span style=color:#666>.</span>py
</span></span><span style=display:flex><span>func_enclosed<span style=color:#666>.</span>py
</span></span><span style=display:flex><span>foo_call<span style=color:#666>.</span>py
</span></span><span style=display:flex><span>func_inner<span style=color:#666>.</span>py
</span></span><span style=display:flex><span>filename: func_inner<span style=color:#666>.</span>py
</span></span></code></pre></div><p>Now we delete the <code>func_inner.py</code>, can you guess the filename?</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>filename: func_enclosed<span style=color:#666>.</span>py
</span></span></code></pre></div><p>As we can see, the closure contains the show_filename function and its environment, there is no filename inside the function, so it search the env filename is <code>func_enclosed.py</code>. <strong>(Enclosed scope)</strong></p><p>If we delete the <code>func_enclosed.py</code>, the filename will be <code>func_global.py</code>. <strong>(Global scope)</strong></p><p>Now if we delete the <code>func_global.py</code>, can you guess the output? Should the filename be <code>foo_call.py</code>?</p><p><strong>Absolutely not</strong>, because the return is the show_filename function, and there is no filename inside both function and its environment, so the function cannot be executed originally, let alone called any other way. It will just appear the <code>NameError: name 'filename' is not defined</code>.</p><p>Hope this example can help you better understand the concepts.</p><h3 id=a-simple-decorator>A Simple Decorator
<a class=anchor href=#a-simple-decorator>#</a></h3><p><strong>Implemented with nested functions</strong></p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>time</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>timer</span>(func):
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>inner</span>():
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;inner run&#34;</span>)
</span></span><span style=display:flex><span>        start <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>        func()
</span></span><span style=display:flex><span>        end <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;</span><span style=color:#b68;font-weight:700>{}</span><span style=color:#ba2121> function running time: </span><span style=color:#b68;font-weight:700>{:.2f}</span><span style=color:#ba2121> seconds&#34;</span><span style=color:#666>.</span>format(func<span style=color:#666>.</span>__name__, (end<span style=color:#666>-</span>start)))
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> inner
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>f1</span>():
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;f1 run&#34;</span>)
</span></span><span style=display:flex><span>    time<span style=color:#666>.</span>sleep(<span style=color:#666>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>f1 <span style=color:#666>=</span> timer(f1) <span style=color:#408080;font-style:italic># Contains inner() and the environment of timer, such as the passed parameter func</span>
</span></span><span style=display:flex><span>f1()
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># inner run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f1 run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f1 function running time: 1.00 seconds</span>
</span></span></code></pre></div><h3 id=syntax-sugar>Syntax Sugar
<a class=anchor href=#syntax-sugar>#</a></h3><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>time</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>timer</span>(func):
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>inner</span>():
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;inner run&#34;</span>)
</span></span><span style=display:flex><span>        start <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>        func()
</span></span><span style=display:flex><span>        end <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;</span><span style=color:#b68;font-weight:700>{}</span><span style=color:#ba2121> function running time: </span><span style=color:#b68;font-weight:700>{:.2f}</span><span style=color:#ba2121> seconds&#34;</span><span style=color:#666>.</span>format(func<span style=color:#666>.</span>__name__, (end<span style=color:#666>-</span>start)))
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> inner
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a2f>@timer</span>     <span style=color:#408080;font-style:italic># Equivalent to implementing f1 = timer(f1)</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>f1</span>():
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;f1 run&#34;</span>)
</span></span><span style=display:flex><span>    time<span style=color:#666>.</span>sleep(<span style=color:#666>1</span>)
</span></span></code></pre></div><h3 id=decorate-function-with-parameters>Decorate Function with Parameters
<a class=anchor href=#decorate-function-with-parameters>#</a></h3><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>time</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>timer</span>(func):
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>inner</span>(<span style=color:#666>*</span>args, <span style=color:#666>**</span>kwargs):
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;inner run&#34;</span>)
</span></span><span style=display:flex><span>        start <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>        func(<span style=color:#666>*</span>args, <span style=color:#666>**</span>kwargs)
</span></span><span style=display:flex><span>        end <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;</span><span style=color:#b68;font-weight:700>{}</span><span style=color:#ba2121> function running time: </span><span style=color:#b68;font-weight:700>{:.2f}</span><span style=color:#ba2121> seconds&#34;</span><span style=color:#666>.</span>format(func<span style=color:#666>.</span>__name__, (end<span style=color:#666>-</span>start)))
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> inner
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a2f>@timer</span>       <span style=color:#408080;font-style:italic># Equivalent to implementing f1 = timer(f1)</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>f1</span>(n):
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;f1 run&#34;</span>)
</span></span><span style=display:flex><span>    time<span style=color:#666>.</span>sleep(n)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>f1(<span style=color:#666>2</span>)
</span></span></code></pre></div><p>Function decorated with return value</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>time</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>timer</span>(func):
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>inner</span>(<span style=color:#666>*</span>args, <span style=color:#666>**</span>kwargs):
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;inner run&#34;</span>)
</span></span><span style=display:flex><span>        start <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>        res <span style=color:#666>=</span> func(<span style=color:#666>*</span>args, <span style=color:#666>**</span>kwargs)
</span></span><span style=display:flex><span>        end <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;</span><span style=color:#b68;font-weight:700>{}</span><span style=color:#ba2121> function running time: </span><span style=color:#b68;font-weight:700>{:.2f}</span><span style=color:#ba2121> seconds&#34;</span><span style=color:#666>.</span>format(func<span style=color:#666>.</span>__name__, (end<span style=color:#666>-</span>start)))
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>return</span> res
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> inner
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a2f>@timer</span>     <span style=color:#408080;font-style:italic># Equivalent to implementing f1 = timer(f1)</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>f1</span>(n):
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;f1 run&#34;</span>)
</span></span><span style=display:flex><span>    time<span style=color:#666>.</span>sleep(n)
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> <span style=color:#ba2121>&#34;wake up&#34;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>res <span style=color:#666>=</span> f1(<span style=color:#666>2</span>)
</span></span><span style=display:flex><span><span style=color:green>print</span>(res)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># inner run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f1 run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f1 function running time: 2.00 seconds</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># wake up</span>
</span></span></code></pre></div><h3 id=decorator-with-parameters>Decorator with Parameters
<a class=anchor href=#decorator-with-parameters>#</a></h3><p>Decorators themselves need to pass some additional parameters</p><ul><li>Requirement: Sometimes you need to count the absolute time, sometimes you need to count the absolute time twice</li></ul><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>timer</span>(method):
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>outer</span>(func):
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>def</span> <span style=color:#00f>inner</span>(<span style=color:#666>*</span>args, <span style=color:#666>**</span>kwargs):
</span></span><span style=display:flex><span>            <span style=color:green>print</span>(<span style=color:#ba2121>&#34;inner run&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:green;font-weight:700>if</span> method <span style=color:#666>==</span> <span style=color:#ba2121>&#34;origin&#34;</span>:
</span></span><span style=display:flex><span>                <span style=color:green>print</span>(<span style=color:#ba2121>&#34;origin_inner run&#34;</span>)
</span></span><span style=display:flex><span>                start <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>                res <span style=color:#666>=</span> func(<span style=color:#666>*</span>args, <span style=color:#666>**</span>kwargs)
</span></span><span style=display:flex><span>                end <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>                <span style=color:green>print</span>(<span style=color:#ba2121>&#34;</span><span style=color:#b68;font-weight:700>{}</span><span style=color:#ba2121> function running time: </span><span style=color:#b68;font-weight:700>{:.2f}</span><span style=color:#ba2121> seconds&#34;</span><span style=color:#666>.</span>format(func<span style=color:#666>.</span>__name__, (end<span style=color:#666>-</span>start)))
</span></span><span style=display:flex><span>            <span style=color:green;font-weight:700>elif</span> method <span style=color:#666>==</span> <span style=color:#ba2121>&#34;double&#34;</span>:
</span></span><span style=display:flex><span>                <span style=color:green>print</span>(<span style=color:#ba2121>&#34;double_inner run&#34;</span>)
</span></span><span style=display:flex><span>                start <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>                res <span style=color:#666>=</span> func(<span style=color:#666>*</span>args, <span style=color:#666>**</span>kwargs)
</span></span><span style=display:flex><span>                end <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>                <span style=color:green>print</span>(<span style=color:#ba2121>&#34;</span><span style=color:#b68;font-weight:700>{}</span><span style=color:#ba2121> function running time: </span><span style=color:#b68;font-weight:700>{:.2f}</span><span style=color:#ba2121> seconds&#34;</span><span style=color:#666>.</span>format(func<span style=color:#666>.</span>__name__, <span style=color:#666>2</span><span style=color:#666>*</span>(end<span style=color:#666>-</span>start)))
</span></span><span style=display:flex><span>            <span style=color:green;font-weight:700>return</span> res
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:green;font-weight:700>return</span> inner
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> outer
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a2f>@timer</span>(method<span style=color:#666>=</span><span style=color:#ba2121>&#34;origin&#34;</span>)  <span style=color:#408080;font-style:italic># Equivalent to timer = timer(method = &#34;origin&#34;)   f1 = timer(f1)</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>f1</span>():
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;f1 run&#34;</span>)
</span></span><span style=display:flex><span>    time<span style=color:#666>.</span>sleep(<span style=color:#666>1</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#a2f>@timer</span>(method<span style=color:#666>=</span><span style=color:#ba2121>&#34;double&#34;</span>)
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>f2</span>():
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;f2 run&#34;</span>)
</span></span><span style=display:flex><span>    time<span style=color:#666>.</span>sleep(<span style=color:#666>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>f1()
</span></span><span style=display:flex><span><span style=color:green>print</span>()
</span></span><span style=display:flex><span>f2()
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># inner run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># origin_inner run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f1 run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f1 function running time: 1.00 seconds</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># inner run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># double_inner run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f2 run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f2 function running time: 2.00 seconds</span>
</span></span></code></pre></div><p><strong>Understanding closures is key!</strong></p><p><strong>9、When does the decorator execute</strong></p><ul><li>Execute immediately when decorated, no need to wait for the call</li></ul><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>func_names<span style=color:#666>=</span>[]
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>find_function</span>(func):
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;run&#34;</span>)
</span></span><span style=display:flex><span>    func_names<span style=color:#666>.</span>append(func)
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> func
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a2f>@find_function</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>f1</span>():
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;f1 run&#34;</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a2f>@find_function</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>f2</span>():
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;f2 run&#34;</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># run</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>for</span> func <span style=color:#a2f;font-weight:700>in</span> func_names:
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(func<span style=color:#666>.</span>__name__)
</span></span><span style=display:flex><span>    func()
</span></span><span style=display:flex><span>    <span style=color:green>print</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f1</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f1 run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f2</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f2 run</span>
</span></span></code></pre></div><h3 id=return-to-the-source>Return to the Source
<a class=anchor href=#return-to-the-source>#</a></h3><ul><li>The properties of the original function are hidden</li></ul><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>time</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>timer</span>(func):
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>inner</span>():
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;inner run&#34;</span>)
</span></span><span style=display:flex><span>        start <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>        func()
</span></span><span style=display:flex><span>        end <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;</span><span style=color:#b68;font-weight:700>{}</span><span style=color:#ba2121> function running time: </span><span style=color:#b68;font-weight:700>{:.2f}</span><span style=color:#ba2121> seconds&#34;</span><span style=color:#666>.</span>format(func<span style=color:#666>.</span>__name__, (end<span style=color:#666>-</span>start)))
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> inner
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a2f>@timer</span>                <span style=color:#408080;font-style:italic># Equivalent to implementing f1 = timer(f1)</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>f1</span>():
</span></span><span style=display:flex><span>    time<span style=color:#666>.</span>sleep(<span style=color:#666>1</span>)
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;f1 run&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(f1<span style=color:#666>.</span>__name__)
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># inner</span>
</span></span></code></pre></div><ul><li>Return to the source</li></ul><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:green;font-weight:700>import</span> <span style=color:#00f;font-weight:700>time</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>from</span> <span style=color:#00f;font-weight:700>functools</span> <span style=color:green;font-weight:700>import</span> wraps
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>timer</span>(func):
</span></span><span style=display:flex><span>    <span style=color:#a2f>@wraps</span>(func)
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>def</span> <span style=color:#00f>inner</span>():
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;inner run&#34;</span>)
</span></span><span style=display:flex><span>        start <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>        func()
</span></span><span style=display:flex><span>        end <span style=color:#666>=</span> time<span style=color:#666>.</span>time()
</span></span><span style=display:flex><span>        <span style=color:green>print</span>(<span style=color:#ba2121>&#34;</span><span style=color:#b68;font-weight:700>{}</span><span style=color:#ba2121> function running time: </span><span style=color:#b68;font-weight:700>{:.2f}</span><span style=color:#ba2121> seconds&#34;</span><span style=color:#666>.</span>format(func<span style=color:#666>.</span>__name__, (end<span style=color:#666>-</span>start)))
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:green;font-weight:700>return</span> inner
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a2f>@timer</span>  <span style=color:#408080;font-style:italic># Equivalent to implementing f1 = timer(f1)</span>
</span></span><span style=display:flex><span><span style=color:green;font-weight:700>def</span> <span style=color:#00f>f1</span>():
</span></span><span style=display:flex><span>    time<span style=color:#666>.</span>sleep(<span style=color:#666>1</span>)
</span></span><span style=display:flex><span>    <span style=color:green>print</span>(<span style=color:#ba2121>&#34;f1 run&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>print</span>(f1<span style=color:#666>.</span>__name__) 
</span></span><span style=display:flex><span>f1()
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f1</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># inner run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f1 run</span>
</span></span><span style=display:flex><span><span style=color:#408080;font-style:italic># f1 function running time: 1.00 seconds</span>
</span></span></code></pre></div><h2>Related readings</h2><ul><li><a href="/posts/python-underlying-mechanism/?utm_source=related">Python Underlying Mechanism</a></li><li><a href="/posts/python-files-exceptions-and-modules/?utm_source=related">Python Files Exceptions and Modules</a></li><li><a href="/posts/python-object-oriented-programming/?utm_source=related">Python Object Oriented Programming</a></li><li><a href="/posts/python-cheatsheet/?utm_source=related">Python Cheatsheet</a></li><li><a href="/posts/python-function-parameter/?utm_source=related">Python Function Parameter</a></li></ul><hr><div class=post-nav><a href="https://blog.timerring.com/posts/python-underlying-mechanism/?utm_source=nav">&lt;&lt; prev | Python...</a>
<a onclick=goToRandomPost() style=cursor:pointer>Continue strolling</a>
<a href="https://blog.timerring.com/posts/real-computer-network/?utm_source=nav">Real Computer... ｜ next >></a></div><hr>If you find this blog useful and want to support my blog, need my skill for something, or have a coffee chat with me, feel free to:<div class=support><a href=https://ko-fi.com/polls/What-is-the-custom-topic-for-the-next-month-C0C219LHQJ class=book-btn target=_blank>Subscribe to participate in blog topics and custom services</a>
<a href=https://ko-fi.com/timerring class=book-btn target=_blank>Buy me a coffee</a></div><div style=margin-bottom:8px></div><script>function goToRandomPost(){const e=["/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script></article><div class=book-comments><div class="book-tabs-content markdown-inner"><div id=tcomment></div><script src=https://giscus.app/client.js data-repo=timerring/blog data-repo-id=R_kgDONeZYZg data-category=Announcements data-category-id=DIC_kwDONeZYZs4ClRWs data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div></div><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><div class=busuanzi-footer><p style=text-align:center>&copy; 2022 - present <a href=https://github.com/timerring>timerring</a> | PV: <span id=busuanzi_value_site_pv></span> | UV: <span id=busuanzi_value_site_uv></span></p></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#generator>Generator</a><ul><li><a href=#generator-expression>Generator Expression</a></li><li><a href=#generator-function-yield>Generator Function <code>yield</code></a></li></ul></li><li><a href=#iterator>Iterator</a><ul><li><a href=#iterable>Iterable</a></li><li><a href=#iterator-1>Iterator</a></li></ul></li><li><a href=#decorator>Decorator</a><ul><li><a href=#template>Template</a></li><li><a href=#demand>Demand</a></li><li><a href=#function-object>Function Object</a></li><li><a href=#high-order-function>High-order Function</a></li><li><a href=#nested-function>Nested Function</a></li><li><a href=#closure>Closure</a></li><li><a href=#legb-rules>LEGB rules</a></li><li><a href=#a-simple-decorator>A Simple Decorator</a></li><li><a href=#syntax-sugar>Syntax Sugar</a></li><li><a href=#decorate-function-with-parameters>Decorate Function with Parameters</a></li><li><a href=#decorator-with-parameters>Decorator with Parameters</a></li><li><a href=#return-to-the-source>Return to the Source</a></li></ul></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></div></aside></main></body></html>