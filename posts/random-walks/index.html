<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This article is a summary of the random walks in the book &ldquo;Random Processes&rdquo; by Gregory F. Lawler."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta name=keywords content="WHAT IS A RANDOM WALK,Examples,Return to the origin (or zero) Problem in n successive steps,RETURN TO ORIGIN,THE FIRST RETURN TO ORIGIN,LATER RETURNS TO THE ORIGIN,WAITING TIME FOR A GAIN,FIRST PASSAGE THROUGH MAXIMA,The random walk problem - drunken sailor walk,Review of the formula,Stirling&amp;rsquo;s approximation,Normal approximation,Possion approximation,Interesting examples,Cliff of Doom and Pit of Disaster,Gambling strategy"><meta property="og:url" content="https://blog.timerring.com/posts/random-walks/"><meta property="og:site_name" content="timerring"><meta property="og:title" content="Random Walks"><meta property="og:description" content="This article is a summary of the random walks in the book “Random Processes” by Gregory F. Lawler."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-18T22:14:11+08:00"><meta property="article:tag" content="Random Process"><meta property="article:tag" content="Math"><meta itemprop=name content="Random Walks"><meta itemprop=description content="This article is a summary of the random walks in the book “Random Processes” by Gregory F. Lawler."><meta itemprop=datePublished content="2025-02-18T22:14:11+08:00"><meta itemprop=dateModified content="2025-02-18T22:14:11+08:00"><meta itemprop=wordCount content="1185"><meta itemprop=image content="https://blog.timerring.com/favicon.png"><meta itemprop=keywords content="Random Process,Math"><meta name=twitter:image content="https://blog.timerring.com/favicon.png"><meta name=twitter:card content="summary"><meta name=twitter:title content="Random Walks"><meta name=twitter:description content="This article is a summary of the random walks in the book “Random Processes” by Gregory F. Lawler."><meta name=twitter:site content="@imjohnhowe"><link rel=canonical href=https://blog.timerring.com/posts/random-walks/><title>Random Walks | timerring</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.62aea22f82250bab36134ee80decead727ff99e3b9fa099d48c8cedca7a6615f.css integrity="sha256-Yq6iL4IlC6s2E07oDezq1yf/meO5+gmdSMjO3KemYV8=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.4c70257ad854db472b580c152b9c09413a6e89ce95623190944d3dc7323500ce.js integrity="sha256-THAlethU20crWAwVK5wJQTpuic6VYjGQlE09xzI1AM4=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-H5Y60NE14Z"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-H5Y60NE14Z")</script><script defer src=/live-photo.min.efe7b2a516404d0718a4c6f90d2eb2f9c0bd8c7bddd382958716bcb24b660970.js integrity="sha256-7+eypRZATQcYpMb5DS6y+cC9jHvd04KVhxa8sktmCXA=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css integrity=sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0 crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js integrity=sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload=renderMathInElement(document.body)></script><script defer>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1}]})})</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1347694832132708" crossorigin=anonymous></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/favicon.png alt=Logo><span>timerring</span></a></h2><hr><p>Rhythmic trend.</p><div class=book-search><div class=gcse-search></div></div><script async src="https://cse.google.com/cse.js?cx=40782701766144f96"></script><ul><li><a href=/>Dashboard</a></li><li><a href=/posts/>Blogs</a></li><li><a href=/categories/weekly/>Newsletter</a></li><li><a href=/index.xml>RSS</a></li><li><a href=/friends/>Friends</a></li><li><a href=/about/>About</a></li></ul><script>function goToRandomPost(){const e=["/posts/the-principle-of-cloudflare-saas-optimization/?utm_source=random","/posts/the-mitm-and-https-capturing/?utm_source=random","/posts/how-to-keep-your-mac-always-awake/?utm_source=random","/posts/the-way-to-get-cookie/?utm_source=random","/posts/how-to-choose-the-right-software-and-creative-license/?utm_source=random","/posts/0516-add-live-photo-effect-to-hugo/?utm_source=random","/posts/the-practice-of-resolving-domain/?utm_source=random","/posts/hidden-markov-models/?utm_source=random","/posts/markov-chains/?utm_source=random","/posts/markov-processes/?utm_source=random","/posts/0418-find-the-formula-rendering-issue-of-hugo/?utm_source=random","/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/stock-prices/?utm_source=random","/posts/possion-processes/?utm_source=random","/posts/docker-with-gpu/?utm_source=random","/posts/stochastic-processes/?utm_source=random","/posts/some-useful-tools/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-walks/?utm_source=random","/posts/sequences-of-random-variables/?utm_source=random","/posts/parameter-estimation/?utm_source=random","/posts/two-random-variables/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/some-useful-commands-to-share/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script><a class=random onclick=goToRandomPost()>Stroll</a></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>timerring</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#what-is-a-random-walk>WHAT IS A RANDOM WALK</a><ul><li><a href=#examples>Examples</a></li><li><a href=#return-to-the-origin-or-zero-problem-in-n-successive-steps>Return to the origin (or zero) Problem in n successive steps</a><ul><li><a href=#return-to-origin>RETURN TO ORIGIN</a></li><li><a href=#the-first-return-to-origin>THE FIRST RETURN TO ORIGIN</a></li><li><a href=#later-returns-to-the-origin>LATER RETURNS TO THE ORIGIN</a></li><li><a href=#waiting-time-for-a-gain>WAITING TIME FOR A GAIN</a></li><li><a href=#first-passage-through-maxima>FIRST PASSAGE THROUGH MAXIMA</a></li></ul></li></ul></li><li><a href=#the-random-walk-problem---drunken-sailor-walk>The random walk problem - drunken sailor walk</a><ul><li><a href=#review-of-the-formula>Review of the formula</a></li><li><a href=#stirlings-approximation>Stirling&rsquo;s approximation</a></li><li><a href=#normal-approximation>Normal approximation</a></li><li><a href=#possion-approximation>Possion approximation</a></li></ul></li><li><a href=#interesting-examples>Interesting examples</a><ul><li><a href=#cliff-of-doom-and-pit-of-disaster>Cliff of Doom and Pit of Disaster</a></li><li><a href=#gambling-strategy>Gambling strategy</a></li></ul></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></aside></header><article class=markdown><h1>Random Walks</h1><h5>February 18, 2025
·
5 min read
<span id=busuanzi_container_page_pv>· Page View: <span id=busuanzi_value_page_pv></span></span></h5><div><a href=/categories/tutorial/ style=color:#000>Tutorial</a></div><div><a href=/tags/random-process/ style=color:#000>Random Process</a> <span style=color:#000>| </span><a href=/tags/math/ style=color:#000>Math</a></div><blockquote class="book-hint info">If you have any questions, feel free to comment below. And if you think it's helpful to you, just click on the ads which can support this site. Thanks!</blockquote><hr><p>This article is a summary of the random walks in the book &ldquo;Random Processes&rdquo; by Gregory F. Lawler.</p><h2 id=what-is-a-random-walk>WHAT IS A RANDOM WALK
<a class=anchor href=#what-is-a-random-walk>#</a></h2><p>A random walk is <strong>the process by which randomly-moving objects wander away from where they start</strong>.</p><ul><li>The simplest random walk to understand is a 1-dimensional walk: Suppose that the black dot on the right is sitting on a number line and starts in the center. Then, it takes a step, either forward or backward, with equal probability. It keeps taking steps either forward or backward each time.</li><li>Let&rsquo;s call the 1st step $a_1$, the second step $a_2$, the third step $a_3$ and so on.<ul><li>+1 (if the step is forward) with probabilities $p$</li><li>-1 (if the step is backward) with probabilities $q = 1 - p$</li></ul></li></ul><p>The black dot that has taken 5 steps and ended up at -1 on the number line.
Starting at 0, how far can it move in n steps?</p>$$
\pm S_{n}=a_{1}+a_{2}+a_{3}+\cdots+a_{n}
$$<p>The sequence of Bernoulli trials $X_{1}, X_{2}, \cdots, X_n,\cdots$ with probability of success equal to $p$ in each trial, where $X_k = 1$ if the $k$th trial results in a success and $X_k=-1$ otherwise.
Let $S_{n}=X_{1}+X_{2}+\cdots+X_{n}$ with $S_0 = 0$, the accumulated positive or negative excess at the $n$th trial. The particle takes a unit step up or down at regular intervals, and $S_n$ represents the position of the particle at the $n$-th step.</p><h3 id=examples>Examples
<a class=anchor href=#examples>#</a></h3><ul><li>In particles emitted and thermal noise.</li><li>Day-to-day stock prices are independent of each other, meaning that momentum does not generally exist and calculations of past earnings growth does not predict future growth. Securities prices are random and not influenced by past events.</li></ul><h3 id=return-to-the-origin-or-zero-problem-in-n-successive-steps>Return to the origin (or zero) Problem in n successive steps
<a class=anchor href=#return-to-the-origin-or-zero-problem-in-n-successive-steps>#</a></h3><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-04-19-19-25-11.png alt></p><p>This is important as the process starts all over again from that point onward.</p><ul><li>1st vs r-th return</li><li>Waiting time for 1/r-th return</li><li>Number of sign changes (zero crossings)</li><li>The level of maxima and minima and their corresponding probabilities</li></ul><p>P{AT STAGE N, THE PARTICLE IS AT POINT R}:</p>$$
P\{S_n=r\}=\binom{n}{k}p^{k}q^{n - k}
$$<p>where $k$ represents the number of successes in $n$ trials and $n-k$ the number of failures, so $r = k-(n - k)=2k - n$, then $k=\frac{n + r}{2}$, k must be the integer, <strong>so $n$ and $r$ must be even or odd together</strong>.</p>$$
p_{n,r}=\binom{n}{\frac{n + r}{2}}p^{\frac{n + r}{2}}q^{\frac{n - r}{2}}
$$<h4 id=return-to-origin>RETURN TO ORIGIN
<a class=anchor href=#return-to-origin>#</a></h4><blockquote><p>Remember that $n$ and $r$ must be even or odd together!</p></blockquote><p>$S_n = 0$ means the random walk has returned to the origin ($r = 0$ or $n = 2k\rightarrow n$ even).
Probability of return at the $2n$th trial is $P{s_{2n}=0}=\binom{2n}{n}(pq)^{n}\triangleq u_{2n}$ with $u_0 = 1$</p>$$
\binom{\alpha}{k} = \frac{\alpha(\alpha - 1)(\alpha - 2)\cdots(\alpha - k + 1)}{k!}
$$<p>The generalization of the binomial formula:</p>$$
(1 + x)^{\alpha}=\sum_{k = 0}^{\infty}\binom{\alpha}{k}x^{k}
$$<p>By these formulas, we can transform $u_{2n}$ to $u_{2n}=(-1)^{n}\binom{-\frac{1}{2}}{n}(4pq)^{n}$</p>$$
\begin{aligned}
u_{2n}&=\frac{(2n)!}{n!n!}(pq)^{n}\\
&=\frac{2n(2n - 2)\cdots4\cdot2}{n!}\cdot\frac{(2n - 1)(2n - 3)\cdots3\cdot1}{n!}(pq)^{n}\\
&=\frac{2^{n}n!}{n!}\cdot\frac{2^{n}(-1)^{n}(-\frac{1}{2})(-\frac{3}{2})\cdots(-\frac{1}{2}-(n - 1))}{n!}(pq)^{n}\\
&=(-1)^{n}\binom{-\frac{1}{2}}{n}(4pq)^{n}
\end{aligned}
$$<h4 id=the-first-return-to-origin>THE FIRST RETURN TO ORIGIN
<a class=anchor href=#the-first-return-to-origin>#</a></h4><p>A first return to zero occurs at stage $2n$ if the event</p><ul><li>$B_n={S_1\neq0,S_2\neq0,\cdots,S_{2n - 1}\neq0,S_{2n}=0}$.</li><li>Let $v_{2n}=P(B_n)=P{S_1\neq0,S_2\neq0,\cdots,S_{2n - 1}\neq0,S_{2n}=0}$, with $v_0 = 0$</li></ul><p>$u_{2n}$ vs. $v_{2n}$: A visit to the origin at stage $2n$ is either the first return with probability $v_{2n}$ or the first return occurs at an earlier stage $2k &lt; 2n$ with probability $v_{2k}$ followed by an independent new return to zero after $2n - 2k$ stages with probability $u_{2n - 2k}$ for $k = 1,2,\cdots,n$
As these events are mutually exclusive and exhaustive, we get the fundamental identity</p>$$
u_{2n}=v_{2n}+v_{2n - 2}u_{2}+\cdots+v_{2}u_{2n - 2}=\sum_{k = 1}^{n}v_{2k}u_{2n - 2k}
$$<p>Moment generating function for $v_{2n}$:</p>$$
\begin{aligned}
U(z)&=1+\sum_{n = 1}^{\infty}u_{2n}z^{2n}=1+\sum_{n = 1}^{\infty}(\sum_{k = 1}^{n}v_{2k}u_{2n - 2k})z^{2n}\\
&=1+\sum_{m = 0}^{\infty}u_{2m}z^{2m}\cdot\sum_{k = 0}^{\infty}v_{2k}z^{2k}=1+U(z)V(z)\\
&=\frac{1}{1 - V(z)}
\end{aligned}
$$$$
V(z)=\sum_{n = 0}^{\infty}v_{2n}z^{2n}=1-\frac{1}{U(z)}=1-\sqrt{1 - 4pqz^{2}}
$$$$
V_{2n}=\frac{1}{2n - 1}\binom{2n - 1}{n}2(pq)^{n}
$$<p>If one of the mutually exclusive events \(B_1\) or \(B_2,\cdots\) happens, then the particle will return to 0:</p>$$
\begin{aligned}
P\{\text{particle will ever return to the origin}\}&=\sum_{n = 0}^{\infty}P(B_{n})\\
&=\sum_{n = 0}^{\infty}v_{2n}=V(1)=1-\sqrt{1 - 4pq}=1-|p - q|\\
&=\begin{cases}1-|p - q|<1&p\neq q\\1&p = q\end{cases}
\end{aligned}
$$<ul><li>Thus if $p\neq q$, the probability that the particle will never return to the origin $P(S_{2k}&lt;0),k\geq1)$ is $|p - q|\neq0$ and finite;</li><li>and if $p = q=\frac{1}{2}$, then with probability 1 the particle will return to the origin.</li></ul><p>In a fair game ($p = q$) with infinite resources on both sides, sooner or later one should be able to recover all loss since return to the break-even point is bound to happen.</p><p>But how long would it take?</p><p>$(V_{2n})$ represents the probability distribution for the waiting time for the first return to origin. Its expected value</p>$$
\mu=V'(1)=\begin{cases}\frac{4pq}{|p - q|}&p\neq q\\\infty&p = q\end{cases}
$$<p>As you can see, the expected waiting time is <strong>infinite</strong> if $p = q$.</p><h4 id=later-returns-to-the-origin>LATER RETURNS TO THE ORIGIN
<a class=anchor href=#later-returns-to-the-origin>#</a></h4><p>Let $v_{2n}^{(r)}$ = the probability of $r$-th return to the origin at $2n$-th trial.
As the trials following the first return to zero form a probabilistic replica of the whole sequence, so the $r$-th probability is related to the $(r-1)$-th probability.</p>$$
v_{2n}^{(r)}=\sum_{k = 0}^{n}v_{2k}v_{2n - 2k}^{(r - 1)}
$$<p>The generating function of $v_{2n}^{(r)}$</p>$$
V^{(r)}(z)\triangleq\sum_{n = 0}^{\infty}v_{2n}^{(r)}z^{2n}=\sum_{k = 0}^{\infty}v_{2k}z^{2k}\sum_{m = 0}^{\infty}v_{2m}^{(r - 1)}z^{2m}=V(z)V^{(r - 1)}(z)=V^{r}(z)
$$<p>And we know that:</p>$$
V^{r}(z)=2V^{r - 1}(z)-4pqz^{2}V^{r - 2}(z)
$$<p>So we can get:</p>$$
v_{2n}^{(r)}=2v_{2n}^{(r - 1)}-4pqv_{2n - 2}^{(r - 2)}
$$<p>Also by induction, $v_{2n}^{(r)}=\frac{r}{2n - r}\binom{2n - r}{n}2^{-(2n - r)}$ if $p = q=\frac{1}{2}$.</p>$$
\binom{n}{k}p^{k}q^{n - k}\simeq\frac{1}{\sqrt{2\pi npq}}e^{-(k - np)^{2}/2npq},p + q = 1
$$<p>When $r$ is also large, apply the De Moivre-Laplace theorem, and let $2n - r=m$, $k=\frac{m + r}{2}$, we can get the approximation: <strong>$r$-th return at the $m$-th trial</strong>.</p>$$
v_{m}^{(r)}=\sqrt{\frac{2}{\pi}}\frac{r}{m^{3/2}}e^{-r^{2}/2m}
$$<p>while valid only if $m$ together with $r$ is either even or odd.
For any $m = cr^{2}$, the probability that $r$ returns to origin occur before the instant $t = cr^{2}$</p>$$
\eta_{c}=\sum_{m = 0}^{cr^{2}}v_{m}^{(r)}=2\int_{1/\sqrt{c}}^{\infty}\frac{1}{\sqrt{2\pi}}e^{-x^{2}/2}dx
$$<ul><li>Example: For $c = 10$, $\eta_{c}=0.7566$. In a fair game, to observe $r$ returns to zero with 75% confidence, one must be prepared to play $10r^{2}$ games.</li></ul><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-04-19-20-06-10.png alt></p><p><strong>The median for the total number of returns to zero is about $\frac{2}{3}\sqrt{N}$</strong></p><blockquote><p>Example: Simulation for 10,000 tosses of a fair coin in four separate trial runs. In a run of length 10,000 it is as likely that there occur fewer than 66 returns to zero.</p></blockquote><h4 id=waiting-time-for-a-gain>WAITING TIME FOR A GAIN
<a class=anchor href=#waiting-time-for-a-gain>#</a></h4><p>The event ${S_{1}\leq0,S_{2}\leq0,\cdots,S_{n - 1}\leq0,S_{n}=+1}$: the first visit to 1 or the first passage through +1.</p><p>Let $\phi_{n}=P(S_{1}\leq0,S_{2}\leq0,\cdots,S_{n - 1}\leq0,S_{n}=+1)$ with $\phi_{0}=0,\phi_{1}=p$.</p><p>For some $n>1$, then $S_{n}=-1$ with probability $q$: there must exist a smallest integer $k &lt; n$ such that $S_{k}=0$, and it is followed by a new first passage through +1 in the remaining $(n - k)$ steps, $k = 1,2,\cdots,n - 2$</p><p>With $P(S_{1}=-1) = q$, $P(S_{1}=-1,S_{2}&lt;0,\cdots,S_{k - 1}&lt;0,S_{k}=0)=P(S_{1}=0,S_{2}&lt;0,\cdots,S_{k - 1}&lt;0,S_{k}=+1)=\phi_{k - 1}$, P(a new first passage through +1 in the remaining (n - k) steps) $=\phi_{n - k}$.</p>$$
\phi_{n}=q(\phi_{1}\phi_{n - 2}+\phi_{2}\phi_{n - 3}+\cdots+\phi_{n - 2}\phi_{1})
$$$$
\Phi(z)=\frac{1-\sqrt{1 - 4pqz^{2}}}{2qz}
$$<p>Important:</p>$$
\phi_{2n - 1}=\frac{v_{2n}}{2q}=\frac{(-1)^{n - 1}}{2q}\binom{\frac{1}{2}}{n}(4pq)^{n};n\geq1
$$$$
\sum_{n = 1}^{\infty}\phi_{n}=\begin{cases}\frac{p}{q}&p<q\\1&p\geq q\end{cases} $$<p>Expected Waiting Time:</p>$$
\mu=\begin{cases}\frac{1}{p - q}&p>q\\\infty&p = q\\\frac{p}{q(q - p)}&q>p\end{cases}
$$<h4 id=first-passage-through-maxima>FIRST PASSAGE THROUGH MAXIMA
<a class=anchor href=#first-passage-through-maxima>#</a></h4><p>Let</p>$$
\phi^{(r)}_n = P\{\text{the first passage through }r>0\text{ occurs at the }n\text{th step}\}
$$<p>r means the desired maximum gain. eg. <strong>$r=3$, $\phi^{(3)}_{10}$ means the probability that the first passage through 3 occurs at the 10th step.</strong></p><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-04-19-21-04-26.png alt></p><p>As the trials following the first passage through +1 form a replica of the whole sequence repeat itself, the waiting times between successive incremental first passages are independent, so that the waiting time for the first passage through a positive gain $r$ is the sum of $r$ independent random variables each with common distribution $\phi_{1}$. <strong>It means the $\phi^{(3)}$ is the sum of 3 independent random variables each with common distribution $\phi_{1}$.</strong> It was accumulated.</p><p>Moment Generating function:</p>$$
\Phi^{(r)}(z)\triangleq\sum_{n = 1}^{\infty}\phi_{n}^{(r)}z^{r}=\Phi^{r}(z)
$$<p>It was accumulated conceptions.</p>$$
\phi_{m}^{(r)}=\frac{r}{m}\binom{m}{\frac{m + r}{2}}p^{\frac{m + r}{2}}q^{\frac{m - r}{2}}
$$<blockquote><p>When $p = q=\frac{1}{2}$, $P{\text{1st passage through }r\text{ at the }n\text{-th stage}}=\frac{r}{n}\binom{n}{\frac{n + r}{2}}2^{-n}$</p></blockquote><p>For $n = cr^{2}$, the probability that the first passage through gain $r$ occurs before the instant $t = cr^{2}$</p>$$
\sum_{n = 0}^{N}\phi_{n}^{(r)}\simeq\frac{1}{2}\int_{0}^{cr^{2}}\sqrt{\frac{2}{\pi}}\frac{r}{n^{3/2}}e^{-r^{2}/2n}dn=2\int_{1/\sqrt{c}}^{\infty}\frac{1}{\sqrt{2\pi}}e^{-x^{2}/2}dx
$$<h2 id=the-random-walk-problem---drunken-sailor-walk>The random walk problem - drunken sailor walk
<a class=anchor href=#the-random-walk-problem---drunken-sailor-walk>#</a></h2><h3 id=review-of-the-formula>Review of the formula
<a class=anchor href=#review-of-the-formula>#</a></h3><p>The problem: There is a drunk man coming out of a pub. He cannot control his steps, and randomly (with 1/2 probability makes a step forward and backward, Let us assume that the length of his steps is fixed(1m). Determine the probability, that after <strong>N steps</strong> he is at a <strong>distance L</strong> from the starting point.</p><p>total number of tracks: $2^N$, the probability to follow one given track is $P=(1/2)^{N}$</p><p>The number of tracks with N steps that are finishing at coordinate x:</p><p>possible values of x:${N, N-2, N-4&mldr;..-(N-2), -N}$</p><p>let $N_+$ be the number of steps in + direction; ${N_-}$ the number of steps in- direction</p><ul><li>$N_+ + N_- = N$</li><li>$x = N_+ - N_-$</li></ul><p>Hence:</p><ul><li>$N_+ = (N + x) / 2$</li><li>$N_- = (N - x) / 2$</li></ul><p>So we can calculate the number of tracks with N steps that are finishing at coordinate x:</p>$$
W(N,x)=\frac{N!}{(\frac{N + x}{2})!(\frac{N - x}{2})!}
$$<p>The true probability to be at a distance L from the starting point after N steps is:</p>$$
P(N,x)=\frac{W(N,x)}{2^N}=\frac{N!}{(\frac{N + x}{2})!(\frac{N - x}{2})!}\frac{1}{2^N}
$$<h3 id=stirlings-approximation>Stirling&rsquo;s approximation
<a class=anchor href=#stirlings-approximation>#</a></h3><p>But the factorial is very large, it&rsquo;s hard to calculate. So we will use <strong>Stirling&rsquo;s approximation</strong>:</p>$$
\ln(N!)\cong N\ln(N)-N+\frac{1}{2}\ln(2\pi N)
$$<p>Meanwhile, put the ln into the true formula:</p>$$
\ln [P(N, x)]=-\frac{1}{2} \ln (2 \pi N)+\ln (2)-\left(\frac{N+x+1}{2}\right) \ln \left(1+\frac{x}{N}\right)-\left(\frac{N-x-1}{2}\right) \ln \left(1-\frac{x}{N}\right)
$$<p>And <strong>when the N &#187; 1 as well as $x/N &#171; 1$</strong>, we can approximate:</p>$$
\ln\left(1\pm\frac{x}{N}\right)\approx\pm\frac{x}{N}-\frac{1}{2}\left(\frac{x}{N}\right)^2
$$<p>So we can simplify the formula:</p>$$
\ln[P(N,x)]\approx -\frac{1}{2}\ln(2\pi N)+\ln(2)-\frac{x^{2}}{2N}
$$<p>In the end, the approximate formula is:</p>$$
P(N,x)=\sqrt{\frac{2}{\pi N}}e^{-\frac{x^{2}}{2N}}
$$<p>And its integral is:</p>$$
\int_{-\infty}^{\infty}P(N,x)dx=2
$$<p>The expected value of x(<code>&lt;x></code>) is:</p><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-04-19-21-19-41.png alt></p><h3 id=normal-approximation>Normal approximation
<a class=anchor href=#normal-approximation>#</a></h3><p>This random walk process can be regarded as N independent Bernoulli trials, which conforms to the binomial distribution $X\sim B(N,\frac{1}{2})$. <strong>When N is large and p is fixed</strong>(condition), according to the central limit theorem, the binomial distribution $X\sim B(N,p)$ approximately follows the normal distribution $N(np,np(1 - p))$. In this problem, $p = \frac{1}{2}$, so it approximately follows the normal distribution $N(\frac{N}{2},\frac{N}{4})$.</p><p>For the normal distribution $N(\mu,\sigma^{2})$, the probability density function is $f(x)=\frac{1}{\sqrt{2\pi\sigma^{2}}}e^{-\frac{(x - \mu)^{2}}{2\sigma^{2}}}$. Substituting $\mu=\frac{N}{2}$ and $\sigma^{2}=\frac{N}{4}$, we can obtain:</p>$$
P(N,x)\approx\frac{1}{\sqrt{2\pi\times\frac{N}{4}}}e^{-\frac{(x-\frac{N}{2})^{2}}{2\times\frac{N}{4}}}=\sqrt{\frac{2}{\pi N}}e^{-\frac{(x - \frac{N}{2})^{2}}{\frac{N}{2}}}
$$<p>So the result is same as the result of Stirling&rsquo;s approximation, so we combine them in the one formula.</p><h3 id=possion-approximation>Possion approximation
<a class=anchor href=#possion-approximation>#</a></h3><p>In this random walk problem, it is <strong>not appropriate</strong> to directly use the Poisson approximation to solve it.</p><p>The Poisson distribution is suitable for describing the number of rare events occurring within a fixed time or space. Its application conditions usually require that</p><ol><li><strong>the probability p of an event occurring is very small</strong> (generally p -> 0)</li><li>the <strong>number of trials n is large</strong> (n -> $\infin$)</li><li>$\lambda = np$ is moderate and fixed number.</li></ol><p>However, in the scenario of this random walk, the probability $p=\frac{1}{2}$ for each step forward or backward, which does not meet the condition that p is very small. If the Poisson approximation is forced to be used, it will lead to relatively large errors, and it is impossible to accurately obtain the probability of being at a distance L after N steps. This is because the characteristics of the Poisson distribution differ greatly from the equal probability step length movement pattern in the random walk, and it cannot well fit the probability distribution of this problem.</p><p><strong>Although this scenario is not suitable</strong>, I can still try it. Suppose we consider the number of times moving right within a certain number of steps as a random variable $Y$. In the original random walk, the probability of moving right is $p = \frac{1}{2}$, and the probability of moving left is $1 - p=\frac{1}{2}$. If we want to use the Poisson distribution for approximation, the number of times $Y$ moving right in an $N$-step random walk can be approximated as a Poisson distribution.</p><p>The probability formula for the Poisson distribution is $P(X = k)=\frac{e^{-\lambda}\lambda^{k}}{k!}$, let $\lambda=\frac{N}{2}$ (because the expected number of steps moving right is $N\times\frac{1}{2}$).</p><p>Let the number of steps moving right be $k$, and the number of steps moving left be $N - k$. The final position $x = k-(N - k)=2k - N$, then $k=\frac{N + x}{2}$.</p><p>So the probability estimated using the Poisson distribution is:</p>$$
P(N,x)=\frac{e^{-\frac{N}{2}}(\frac{N}{2})^{\frac{N + x}{2}}}{(\frac{N + x}{2})!}
$$<h2 id=interesting-examples>Interesting examples
<a class=anchor href=#interesting-examples>#</a></h2><h3 id=cliff-of-doom-and-pit-of-disaster>Cliff of Doom and Pit of Disaster
<a class=anchor href=#cliff-of-doom-and-pit-of-disaster>#</a></h3><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-04-19-21-22-56.png alt></p><h3 id=gambling-strategy>Gambling strategy
<a class=anchor href=#gambling-strategy>#</a></h3><p>A gambler goes to Las Vegas with $n$ in her pocket. Her plan is to make only $1 bets and somehow she has found a casino that will offer her truly even odds¹; namely, she will win or lose $1 on each bet with probability 1/2. She&rsquo;ll play until she is broke or she has won $m$. In the latter case, she will go home with</p>$$w = n + m$$<p>dollars. What&rsquo;s the probability that she goes home a winner?</p><ul><li>The gambler goes home broke with probability</li></ul>$$\frac{n}{w}=\frac{m}{n + m}$$<ul><li>the gambler goes home a winner with probability</li></ul>$$\frac{w - n}{w}=\frac{n}{n + m}$$<ul><li>the gambler goes home with probability</li></ul>$$\frac{n}{n + m}+\frac{m}{n + m}=1$$<ul><li>and the number of bets before the gambler goes home is expected to be</li></ul>$$n(w - n)=nm$$<p>If the gambler gets greedy and keeps playing until she goes broke, then</p><ul><li>the gambler eventually goes broke with probability 1, and</li><li>the number of bets before the gambler goes broke is expected to be infinite.</li></ul><h2>Related readings</h2><ul><li><a href="/posts/sequences-of-random-variables/?utm_source=related">Sequences of Random Variables</a></li><li><a href="/posts/parameter-estimation/?utm_source=related">Parameter Estimation</a></li><li><a href="/posts/two-random-variables/?utm_source=related">Two Random Variables</a></li><li><a href="/posts/random-variables/?utm_source=related">Random Variables</a></li><li><a href="/posts/repeated-trials/?utm_source=related">Repeated Trials</a></li></ul><hr><div class=post-nav><a href="https://blog.timerring.com/posts/sequences-of-random-variables/?utm_source=nav">&lt;&lt; prev | Sequences of...</a>
<a onclick=goToRandomPost() style=cursor:pointer>Continue strolling
</a><a href="https://blog.timerring.com/posts/langchain-and-rag-best-practices/?utm_source=nav">Langchain and... ｜ next >></a></div><hr>If you want to follow my updates, or have a coffee chat with me, feel free to connect with me:<div class=support><a href=https://github.com/timerring class=book-btn target=_blank><i class="bi bi-github"></i>
Follow @timerring
</a><a href=https://x.com/imjohnhowe class=book-btn target=_blank><i class="bi bi-twitter-x"></i>
@imjohnhowe
</a><a href=https://www.zhihu.com/people/timerring class=book-btn target=_blank>知乎@timerring
</a><a href=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-05-17-20-54.png class=book-btn target=_blank><i class="bi bi-wechat"></i>
Official Account</a></div><div style=margin-bottom:8px></div><script>function goToRandomPost(){const e=["/posts/the-principle-of-cloudflare-saas-optimization/?utm_source=random","/posts/the-mitm-and-https-capturing/?utm_source=random","/posts/how-to-keep-your-mac-always-awake/?utm_source=random","/posts/the-way-to-get-cookie/?utm_source=random","/posts/how-to-choose-the-right-software-and-creative-license/?utm_source=random","/posts/0516-add-live-photo-effect-to-hugo/?utm_source=random","/posts/the-practice-of-resolving-domain/?utm_source=random","/posts/hidden-markov-models/?utm_source=random","/posts/markov-chains/?utm_source=random","/posts/markov-processes/?utm_source=random","/posts/0418-find-the-formula-rendering-issue-of-hugo/?utm_source=random","/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/stock-prices/?utm_source=random","/posts/possion-processes/?utm_source=random","/posts/docker-with-gpu/?utm_source=random","/posts/stochastic-processes/?utm_source=random","/posts/some-useful-tools/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-walks/?utm_source=random","/posts/sequences-of-random-variables/?utm_source=random","/posts/parameter-estimation/?utm_source=random","/posts/two-random-variables/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/some-useful-commands-to-share/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script></article><ins class=adsbygoogle style=display:block data-ad-format=fluid data-ad-layout-key=-c2+7a+0+1 data-ad-client=ca-pub-1347694832132708 data-ad-slot=5778132754></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><div class=busuanzi-footer><p style=text-align:center>&copy; 2022 - present <a href=https://github.com/timerring>timerring</a> | PV: <span id=busuanzi_value_site_pv></span> | UV: <span id=busuanzi_value_site_uv></span></p></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#what-is-a-random-walk>WHAT IS A RANDOM WALK</a><ul><li><a href=#examples>Examples</a></li><li><a href=#return-to-the-origin-or-zero-problem-in-n-successive-steps>Return to the origin (or zero) Problem in n successive steps</a><ul><li><a href=#return-to-origin>RETURN TO ORIGIN</a></li><li><a href=#the-first-return-to-origin>THE FIRST RETURN TO ORIGIN</a></li><li><a href=#later-returns-to-the-origin>LATER RETURNS TO THE ORIGIN</a></li><li><a href=#waiting-time-for-a-gain>WAITING TIME FOR A GAIN</a></li><li><a href=#first-passage-through-maxima>FIRST PASSAGE THROUGH MAXIMA</a></li></ul></li></ul></li><li><a href=#the-random-walk-problem---drunken-sailor-walk>The random walk problem - drunken sailor walk</a><ul><li><a href=#review-of-the-formula>Review of the formula</a></li><li><a href=#stirlings-approximation>Stirling&rsquo;s approximation</a></li><li><a href=#normal-approximation>Normal approximation</a></li><li><a href=#possion-approximation>Possion approximation</a></li></ul></li><li><a href=#interesting-examples>Interesting examples</a><ul><li><a href=#cliff-of-doom-and-pit-of-disaster>Cliff of Doom and Pit of Disaster</a></li><li><a href=#gambling-strategy>Gambling strategy</a></li></ul></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-1347694832132708 data-ad-slot=1676758726 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></aside></main></body></html>