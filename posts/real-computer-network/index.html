<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="For the computer network, I believe that most people have learned it in the course of university or college. No matter whether you are familiar with it or not, this article will give you a different perspective of the network. It can really help you a lot."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Real Computer Network"><meta property="og:description" content="For the computer network, I believe that most people have learned it in the course of university or college. No matter whether you are familiar with it or not, this article will give you a different perspective of the network. It can really help you a lot."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.timerring.com/posts/real-computer-network/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-23T20:06:18+08:00"><meta property="article:modified_time" content="2024-12-23T20:06:18+08:00"><title>Real Computer Network | timerring</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.e5c400e9a39f7eafc90351230108cdc038497f3b6478689fe605ab3dd006274d.css integrity="sha256-5cQA6aOffq/JA1EjAQjNwDhJfztkeGif5gWrPdAGJ00=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.32d6b63c2c059053102d84e121fc7b39a04c85c6c595345e8064309c972a6151.js integrity="sha256-Mta2PCwFkFMQLYThIfx7OaBMhcbFlTRegGQwnJcqYVE=" crossorigin=anonymous></script>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/favicon.png alt=Logo><span>timerring</span></a></h2><hr><p>Rhythmic trend.</p><div class=book-search><div class=gcse-search></div></div><script async src="https://cse.google.com/cse.js?cx=40782701766144f96"></script><ul><li><a href=/>Dashboard</a></li><li><a href=/posts/>Blogs</a></li><li><a href=/categories/weekly/>Newsletter</a></li><li><a href=/index.xml>RSS</a></li><li><a href=/friends/>Friends</a></li><li><a href=/about/>About</a></li></ul><script>function goToRandomPost(){const e=["/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/danmaku-convert-analysis/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script><a class=random onclick=goToRandomPost()>Stroll</a></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>timerring</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#basic-concepts>Basic concepts</a><ul><li><a href=#providers>Providers</a></li><li><a href=#network-circuits>Network Circuits</a><ul><li><a href=#public-network>Public Network</a></li><li><a href=#dedicated-network>Dedicated Network</a></li></ul></li><li><a href=#service-concepts>Service Concepts</a></li></ul></li><li><a href=#ip>IP</a><ul><li><a href=#ip-database>IP database</a></li><li><a href=#cellular-base-station>Cellular Base Station</a></li><li><a href=#check-ip>Check IP</a></li><li><a href=#ip-question>IP question</a></li><li><a href=#ip-attribution>IP attribution</a></li><li><a href=#native-ip>Native IP</a></li></ul></li><li><a href=#protocols>Protocols</a></li><li><a href=#dns>DNS</a><ul><li><a href=#cdn>CDN</a></li></ul></li><li><a href=#proxy>Proxy</a><ul><li><a href=#proxy-types>Proxy Types</a></li><li><a href=#ratio>Ratio</a></li><li><a href=#latency>Latency</a><ul><li><a href=#ping>PING</a></li><li><a href=#node-selection-mechanism>Node selection mechanism</a></li></ul></li></ul></li><li><a href=#strategy>Strategy</a><ul><li><a href=#traffic-diversion>Traffic diversion</a><ul><li><a href=#pac1>PAC1</a></li><li><a href=#router-traffic-diversion>Router traffic diversion</a></li><li><a href=#strategy-diversion>Strategy diversion</a></li></ul></li></ul></li><li><a href=#socks5>Socks5</a></li><li><a href=#vpn-vs-socks5>VPN vs Socks5</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></aside></header><article class=markdown><h1>Real Computer Network</h1><h5>December 23, 2024
·
16 min read
<span id=busuanzi_container_page_pv>· Page View: <span id=busuanzi_value_page_pv></span></span></h5><div><a href=/categories/tutorial/ style=color:#000>Tutorial</a></div><div><a href=/tags/network/ style=color:#000>Network</a> <span style=color:#000>|</span>
<a href=/tags/dns/ style=color:#000>DNS</a> <span style=color:#000>|</span>
<a href=/tags/socks5/ style=color:#000>Socks5</a> <span style=color:#000>|</span>
<a href=/tags/ip/ style=color:#000>IP</a></div><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2024-12-26-17-21-23.png></p><p class=title-image><i>Generated by DALL 3</i></p><blockquote class="book-hint info">If you have any questions, feel free to comment below.</blockquote><hr><p>For the computer network, I believe that most people have learned it in the course of university or college. No matter whether you are familiar with it or not, this article will give you a different perspective of the network. It can really help you a lot.</p><h2 id=basic-concepts>Basic concepts
<a class=anchor href=#basic-concepts>#</a></h2><h3 id=providers>Providers
<a class=anchor href=#providers>#</a></h3><p><code>IDC</code>: Internet Data Center, which is the data center of the internet. It is the place where the servers are located.</p><p><code>ISP</code>: Internet Service Provider, which is the internet service provider. It is the company that provides the internet service.</p><p>Main Public Cloud Service Providers:</p><ul><li><code>AWS</code>: Amazon Web Services, which is the cloud service of Amazon.</li><li><code>Azure</code>: Microsoft Cloud Service, which is the cloud service of Microsoft.</li><li><code>Alibaba Cloud</code>: Alibaba Cloud, which is the cloud service of Alibaba.</li><li><code>GCP</code>: Google Cloud Platform, which is the cloud service of Google.</li><li><code>PCCW</code>(Recommended): Pacific Century CyberWorks, which is the internet service provider of Hong Kong, China.(make sure it is Two-way instead of one-way)</li></ul><blockquote><p>Besides, if your neighbors(the shared users of the server) are all &ldquo;one-click script&rdquo; masters, using <a href=https://github.com/91yun/serverspeeder target=_blank>serverspeeder<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>, <a href=https://github.com/nanqinlang/sometimesnaiveorg/issues/6 target=_blank>violent modification BBR<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>, <a href=https://github.com/xtaci/kcptun target=_blank>KCPTun multiple times more packet sending<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>, etc. But you don&rsquo;t do any optimization, then even you have a whole submarine cable, you will still be slower than them.</p><p>When you buy a VPS, the bandwidth is provided by the operators which the VPS supplier purchase from the operators.</p></blockquote><h3 id=network-circuits>Network Circuits
<a class=anchor href=#network-circuits>#</a></h3><h4 id=public-network>Public Network
<a class=anchor href=#public-network>#</a></h4><blockquote><p>You can check your network AS info here: <a href=https://ipinfo.io/ target=_blank>https://ipinfo.io/<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p></blockquote><ul><li><code>International export</code>: The international export is the last port of the internet in China when the traffic is going to the overseas. Mainly located in Beijing, Shanghai and Guangzhou.</li><li><code>163</code>: <code>AS4134</code>. The 163 network is the backbone of the internet in China. And mainly used by <strong>China Telecom.</strong> The backbone node is started with <code>202.97</code>.</li></ul><blockquote><p>There is basically no performance bottleneck when accessing each other within the 163 network in China. Congestion only occurs at the international export..</p></blockquote><ul><li><code>169</code>: <code>AS4837</code>. The 169 network is the backbone of the internet in China. And mainly used by <strong>China Unicom</strong>.</li><li><code>AS 9929</code>: Also known as the former China Netcom Internet (CNCNET). The AS number of China Unicom&rsquo;s A network backbone is 9929. It was built by the China Netcom, and after the merger of China Netcom and China Unicom, so the A network was available. Now the users are less and mainly aims for the government.</li><li><code>AS9808</code>: The <code>AS9808</code> is the backbone of the internet in China. And mainly used by <strong>China Mobile</strong>. The <code>PCCW line</code> is currently among the lines between China and Hong Kong, China or those from China to other regions in Southeast Asia where transshipment in Hong Kong, China is required. It is the line with the best quality in China except for the pure <code>CN2 GIA</code> line.</li><li><code>Educational Network</code> / <code>China Science and Technology Network</code> / <code>Private Broadband</code>.</li><li><code>CN2(CNCN)</code>: <strong>China telecom</strong> next carrier network, which is the backbone of the internet in China(Public network), which is more advanced than the old 163 network. The backbone node is started with <code>59.43</code>.<ul><li><code>CN2GT</code>: CN2 Global Transit, cheaper but congested, in CN2 GT product in the city → province → international export section is 163 network, the international export → overseas access point section is CN2 network, the return is the same.</li><li><code>CN2GIA</code>: CN2 Global Internet Access, expensive but less congested.(eg. Bandwagonhost has the most stable and cheapest CN2GIA line, but it is the key examined object of domestic.) GIA the whole network is CN2 network.</li></ul></li></ul><h4 id=dedicated-network>Dedicated Network
<a class=anchor href=#dedicated-network>#</a></h4><p><code>IPLC</code>: International Private Leased Circuit, which is the international dedicated line.</p><blockquote><p>But for many service suppliers, it is just the <strong>intranet of Alibaba</strong>(<code>深港</code>means Alicloud shenzhen &ndash; Alicloud HK), which usually purchase multiple end to end IPLC lines to connect the every data center. Then it has two pros:</p><ol><li>The bandwidth in <code>IPLC</code> is dedicated, which is more stable than public network.(The decicated line is normally described the physical line, the most traffic in <code>Submarine optical cable</code> is the public network traffic and small part is the <code>IPLC</code> traffic.)</li><li>The traffic when transiting, it will not go through the specific examination.</li></ol></blockquote><p><code>IEPL</code>: International Ethernet Private Line, which is the enhanced version of IPLC. It is a dedicated management bandwidth service from end to end.</p><p><code>Anycast</code>: it is a network technology that allows <strong>a single IP address</strong> to be broadcast to multiple locations. That means the IP will be the same, but the location is different.</p><blockquote><p>This IP address is in the physical link between domestic and abroad. When users access this IP address, they will be connected to the nearest server. Just like the CDN.
The cons:</p><ol><li>The bandwidth is bind to the single IP address, so if it was DDOS, it is hard to deal with it.</li><li>Expensive.</li></ol></blockquote><h3 id=service-concepts>Service Concepts
<a class=anchor href=#service-concepts>#</a></h3><p>The three major operators are <strong>paid inter-network settlement</strong>, which means the traffic you consume is across the operators, they will pay the cost internally.</p><p><code>QoS</code>: Quality of Service, which is the service quality of the network. It can dynamically adjust the priority of the traffic, such as video calls(bandwidth first), online games(latency priority), etc.</p><p><code>SLA</code>: Service Level Agreement, which is the agreement between the supplier and the user. It is the service level of the supplier.</p><p><code>BGP</code>: Border Gateway Protocol, which can dynamically select the best route.(when you buy vps, you can easily find it on the supplier website) Which means the same IP in multiple operator&rsquo;s network is directly connected.</p><p><code>Redirect</code>: Redirect data from one server to another. Alibaba Cloud public network transit is more common in small-scale suppliers redirect.</p><p><code>Port</code>: The port is the communication endpoint of the network. It is the port of the server.</p><h2 id=ip>IP
<a class=anchor href=#ip>#</a></h2><h3 id=ip-database>IP database
<a class=anchor href=#ip-database>#</a></h3><p>IP Database stores IP address and physical address mapping.</p><ul><li>The most used domestic IP database is IPIP.</li><li>The overseas is MaxMind.</li></ul><h3 id=cellular-base-station>Cellular Base Station
<a class=anchor href=#cellular-base-station>#</a></h3><p>When using the cellular network, the IP address is the private IP address, and then it will be converted to the public IP address through the <code>NAT</code>. This situation leads to everyone using the same IP segment to access websites or apps. Generally, we refer to these relatively fixed IP segments as base station IP addresses.</p><ol><li>So it is hard to locate the IP address to the specific city, which means the same IP address can be in different cities. And sometimes a series of IP is assigned to the 2~3 cities.</li><li>Due to the <code>NAT</code>，every IP address corresponds to many users, so suspending the IP address will affect many users.</li><li><code>Roaming</code>: When you are roaming, the IP address will be changed. It&rsquo;s mainly has three operators:<ul><li>mobile: roaming to the local network. If your card is in Beijing, and you go to Shanghai, then you will see the IP of Shanghai.</li><li>Unicom and Telecom: roaming back to the local network. If your card is in Beijing, and you go to Shanghai, you will still see the IP of Beijing.</li><li>So that accounts for the reason why you are using your card abroad, you are still blocked to visit websites. Cause you are roaming back to china and then try to access the websites.</li></ul></li></ol><h3 id=check-ip>Check IP
<a class=anchor href=#check-ip>#</a></h3><p><a href=https://ip.skk.moe/ target=_blank>https://ip.skk.moe/<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></p><h3 id=ip-question>IP question
<a class=anchor href=#ip-question>#</a></h3><p>Why the ip is not correct?</p><ol><li>You are using the phone to test? (It is the base station&rsquo;s fault)</li><li>What is your current operator? (If it is the secondary operator, it is the fault of the third-party export)</li><li>What browser are you using? (It is the cloud acceleration&rsquo;s fault)</li></ol><blockquote><p>What is the third-party export?</p><p>Every operator will not only have their customers, but also have to obtain the network export, but the backbone networks are built by primary operators. So if the secondary operator wants to access the internet, it will have to pay the access fee to the primary operator. The primary operator avoids the competition, so it will bring up an expensive fee. But some people in the primary operator will sell them in a lower price, which is usually used by the secondary operator informally.</p></blockquote><h3 id=ip-attribution>IP attribution
<a class=anchor href=#ip-attribution>#</a></h3><p>The IP attribution identified based on your access purpose: Residential broadband, Business broadband, IDC, etc.</p><h3 id=native-ip>Native IP
<a class=anchor href=#native-ip>#</a></h3><p><code>Native IP</code>: The operator&rsquo;s IP address. Broadcasting country is generally the same as registration country. Normally, it can used to unlock the hulu, netflix, etc. Because the Native IP is generally not used to the cloud computing service or have a good reputation.</p><p><code>Broadcast IP</code>: The IP address of the VPS is not the same as the location of the VPS. That means this IP is from another country / region.</p><p><code>Streaming media unlock</code>: Many streaming media platforms will restrict the specific IP access due to the copyright issues. Generally, the network operators(eg.HKT) have their own IP, which is used in commercial or Residential broadband. And the IP won&rsquo;t be blocked because they are all the objective customers. Besides, the Residential broadband is hard to blocked because it is dynamic.</p><h2 id=protocols>Protocols
<a class=anchor href=#protocols>#</a></h2><ul><li><p>Shadowsocks: the fastest rtt.</p></li><li><p>ShadowsocksR.</p></li><li><p>V2Ray(Vmess is the self protocol, V2Ray is the collection of protocols): more handshakes, which means slower rtt. Vmess + TLS encryption + websocket, which is more stable.</p></li><li><p>Trojan: fix some cons of V2Ray. The core is only websocket + TLS. (TLS is the most secure which banks are using). It imitates the normal http request and works on the 443 port. If it receives the illegal request, it will provide service, or it will transit the traffic to nginx, and the nginx deal with the request. Its behavior is similar to nginx, so it is hard to detect. Meanwhile, in order to avoid the malicious detection, it will redirect the 80 port traffic to the 443, and only open the 80 and 443 port, which is similar to the normal web server.</p></li><li><p>obfs (simple-obfs): it is a tool that can encrypt the traffic. It can be used to avoid the detection. obfs has two modes, one is HTTP, the other is TLS.</p></li></ul><h2 id=dns>DNS
<a class=anchor href=#dns>#</a></h2><p>DNS is the domain name system, which is the system that can translate the domain name to the IP address.</p><p>No matter how we use PPPoE to dial up or connect the optical cat through DHCP, the Internet service provider (ISP) will send you two DNS. For convenience, I call these two DNS as ISP DNS.</p><p>In the DNS resolution process, the user initiates a request to the <code>recursive DNS</code>, and the <code>recursive DNS</code> requests the resolution result from the <code>authoritative DNS</code>. In other words, the <code>recursive DNS</code> plays a forwarding role. The ISP&rsquo;s DNS is a <code>recursive DNS</code>; at the same time, some individuals or Internet service providers also set up their own <code>recursive DNS</code> for everyone to use, which is called <code>public DNS</code>.</p><p>Some famous public DNS:</p><ul><li>Cloudflare DNS: <a href=https://1.1.1.1/ target=_blank><code>1.1.1.1</code><span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>, <a href=https://1.0.0.1/ target=_blank><code>1.0.0.1</code><span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://developers.google.com/speed/public-dns/ target=_blank>Google Public DNS<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>: <code>8.8.8.8</code>, <code>8.8.4.4</code></li><li><a href=http://www.alidns.com/ target=_blank>Alidns<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>: <code>223.5.5.5</code>, <code>223.6.6.6</code></li><li><a href=https://www.dnspod.cn/Products/Public.DNS target=_blank>Tencent DNSPod<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>: <code>119.29.29.29</code>, <code>119.28.28.28</code></li></ul><blockquote><p>For most people, the ISP DNS provided by the operator should be the most accurate and suitable, with a short response time and the most accurate CDN resolution result.</p><p>But the operator often does DNS pollution, it will lead the user to their cache server or some advertising mirror website or tamper the TTL, which will lead to the DNS load less.</p></blockquote><p>But the public DNS does not accelerate the resolution speed. Public DNS is a local DNS service provided by some enterprises, which usually provides one or more Anycast IP addresses, but actually has multiple cluster services.</p><p>When users go online, the client will request the resolution from the A address in the cluster, this A address is called <code>DNS entry</code>; the public DNS will use the B address in the DNS cluster to compare with the IP library when judging the user&rsquo;s source, this B address is called <code>DNS exit</code>.</p><p>So in the process of going online, users will get the resolution from the DNS entry, and the NS server will allocate the intelligent resolution to the DNS exit. If the DNS entry does not have the requested resolution cache, it will request the upper DNS to query, and finally request to the NS server, till then the user get the resolution result.</p><p>Hence, when the DNS entry and the DNS exit are inconsistent with the user&rsquo;s actual network, it may lead to the DNS resolution result not being the optimal.</p><h3 id=cdn>CDN
<a class=anchor href=#cdn>#</a></h3><p>CDN is the content delivery network, which can provide the content to the user faster and more reliable via the nearest server.</p><p>Besides, the <code>DNS exit</code> is very important for CDN. The public DNS is essentially forwarding your query request to the upstream DNS; without EDNS, the authoritative DNS of the CDN will determine your operator and your location based on the request IP used by the public DNS (that is, the DNS exit), and then return the nearest node IP. <strong>In brief, CDN will return the nearest IP to the DNS exit.</strong></p><p>For more information, you can refer my article <a href=/posts/a-brief-introduction-to-dns/>A brief introduction to DNS</a></p><h2 id=proxy>Proxy
<a class=anchor href=#proxy>#</a></h2><p>Every traffic transit in <strong>public network</strong> across the countries will be examined.</p><p>The proxy means that the traffic is go through the proxy server.</p><h3 id=proxy-types>Proxy Types
<a class=anchor href=#proxy-types>#</a></h3><p>The basic proxy methods are mainly three types:</p><ol><li>Software Proxy:<ul><li>VPN: virtual private network which can ensure the end-to-end communication security. But nowadays, it might remains some risks.</li><li>Encrypted traffic: mainly exists in the Shadowsocks, SSR, V2Ray and Trojan <strong>protocols</strong>, which usually encrypt the traffic locally and send to the transit server to forward and to the remote server to decrypt it. And the protocols should be implemented in the application layer, which means you have to used some applications to use it, such as Shadowsocks, V2Ray, Clash, Surge, etc.<ul><li>There still exists some issues, the application can only address the traffic which it can takes over. It(Without TUN mode) can not deal with the traffic which is on the OS layer, such as the UWP, some banks software, etc.</li><li>The tun mode which can virtualize the network interface, and forced take over all the traffic.</li></ul></li></ul></li><li>Hardware Proxy: can also called as router proxy, which is the end of whole internet. But the issue is that some router are not designed for this purpose, so the computing ability cannot meet the requirements of encryption and decryption.</li><li>Gateway Proxy: it is usually implemented by the software installed on the PC, and via the CPU, it can easily complete the tasks. And you can change the nodes in the software.</li></ol><h3 id=ratio>Ratio
<a class=anchor href=#ratio>#</a></h3><blockquote><p>The most suppliers will take all the traffic <strong>(upstream and downstream)</strong> into account.</p></blockquote><p>The ratio between the traffic you consume and the traffic the supplier statistics.</p><blockquote><p>eg. You use the 0.5x ratio node, and you consume 100G, then the supplier statistics is 50G.</p></blockquote><p>Why there are different ratio nodes?</p><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2024-12-26-17-21-23.png alt></p><ul><li>The ratio is related to the line quality and user experience.</li><li>Now the supplier have two types of lines:<ul><li>Direct line: The line is directly connected to the overseas proxy server via public network. But the transmission effect is poor because the interconnection bandwidth between the overseas operator and the domestic operator is limited, and the domestic operator usually limits the speed of the data flow from the mainland. Besides, if you are the customer of unicom and the overseas server optimize the telecom, then you will get poorer performance than the telecom customer.</li><li>Transit line: Add the transit server, which means the traffic will be transit through the server, hence the traffic is cost in every transit server, so the ratio is high. But it can provide more stable and faster service.<ul><li>BGP transit: The domestic transit server will provide the BGP, so you will have a better experience. Normally, it will use some tunnel protocols to balance the traffic and improve the stability.</li><li>IPLC transit: Transit through the IPLC eg. SZ-HK, and then from HK to overseas proxy server.</li></ul></li></ul></li></ul><h3 id=latency>Latency
<a class=anchor href=#latency>#</a></h3><blockquote><p>Note: The RTT is not the speed. The RTT is just the building time of the connection. The speed will depend on the shortcomings of the whole network.</p></blockquote><h4 id=ping>PING
<a class=anchor href=#ping>#</a></h4><p>ping aims to send a ICMP request to the target host and wait for the response.</p><p>The program will estimate the <code>loss rate of data packets</code> and the <code>round-trip delay time</code> based on the time and the number of successful responses.</p><ul><li><code>icmp ping</code>: the classic ping. It test the latency between the machine and the transit server.</li><li><code>tcp ping / ​http ping</code>: It test the latency of the data packages of corresponding protocol. Normally, it will be slower than the icmp ping.</li></ul><h4 id=node-selection-mechanism>Node selection mechanism
<a class=anchor href=#node-selection-mechanism>#</a></h4><ul><li>Load balancing</li><li>url-test: It normally send the request to specific url, and select the best node.</li><li>fall­back</li><li>SSID</li></ul><h2 id=strategy>Strategy
<a class=anchor href=#strategy>#</a></h2><h3 id=traffic-diversion>Traffic diversion
<a class=anchor href=#traffic-diversion>#</a></h3><p>The traffic diversion is the strategy that can distribute the traffic to the different server, which can speed up the access speed.</p><h4 id=pac1>PAC1
<a class=anchor href=#pac1>#</a></h4><p>Proxy auto con­fig which is a method of web proxy. It can automatically select the suitable proxy server and only affect the browser.</p><p>It mainly depends on the specific rules which maintained by community, such as <a href=https://github.com/gfwlist/gfwlist target=_blank>gfwlist<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>.</p><h4 id=router-traffic-diversion>Router traffic diversion
<a class=anchor href=#router-traffic-diversion>#</a></h4><p>For traffic diversion in the routing table, you can refer to <code>SSR-win</code>. There are PAC diversion rules and routing diversion. For routing diversion, you need to add a SOCKS5 proxy in the browser by yourself or use Proxifier to set up a system proxy. Similarly, the settings of V2RayN on Windows also involve routing diversion. As for SS/SSR on Android, it is based on ACL (Access Control List) diversion, and there are ACLs made by third parties. On iOS, there is rule-based diversion. Since common protocols themselves don&rsquo;t stipulate how to conduct diversion, it is all achieved by the software itself.</p><h4 id=strategy-diversion>Strategy diversion
<a class=anchor href=#strategy-diversion>#</a></h4><p>proxy, direct, reject</p><h2 id=socks5>Socks5
<a class=anchor href=#socks5>#</a></h2><p>Socks5 is the protocol of the Session Layer, which is lower than the HTTP protocol. Socks5 mainly focus on the data package transmission, and it is not concerned with the specific protocol and usage.</p><blockquote><p>Socket is more like a &ldquo;どこでもドア&rdquo; in Doraemon, it needs the source IP and port and destination IP and port. The developer only needs to send the data to the Socket and get data from the Socket. The details of transport are transparent to the developer.</p></blockquote><h2 id=vpn-vs-socks5>VPN vs Socks5
<a class=anchor href=#vpn-vs-socks5>#</a></h2><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2024-12-23-23-00-33.png alt></p><p>The OSI model is shown as above.</p><ul><li><p>The Application Layer you search a query on the browser, and the browser sends it to the Presentation Layer via http.</p></li><li><p>The Presentation Layer translate the query to the machine language and sends it to the Session Layer.</p></li><li><p>The Session Layer maintains the session between the client and the server.</p></li><li><p>The Transport Layer defines the protocol and the port.</p></li><li><p>The Network Layer adds the IP address.</p></li><li><p>The Data Link Layer adds the MAC address.</p></li><li><p>The Physical Layer sends the data in bits.</p></li><li><p>VPN is the same as virtual network interface, it will take over all the traffic. You can refer to the image below.</p></li><li><p>So we can find that the Socks5(without TUN mode) cannot proxy the traffic of online games, and the network commands.</p></li></ul><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2024-12-23-23-13-49.jpeg alt></p><p>The most VPN is used the TCP protocol, it needs to establish a connection, so it can be interupted by the <code>reset</code> packet. Besides, the feature of the VPN is very clear, so it is easy to be detected.</p><p>Nowadays, A new VPN called <code>wireguard</code> used the UDP protocol, so it cannot be interupted by normal methods. But it will be limited the speed in QoS.</p><p>Reference:</p><ul><li><a href=https://www.rfc-editor.org/ target=_blank>https://www.rfc-editor.org/<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href="https://www.youtube.com/watch?v=wAxOjL_gDzk" target=_blank>https://www.youtube.com/watch?v=wAxOjL_gDzk<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://www.duyaoss.com/archives/1086/ target=_blank>https://www.duyaoss.com/archives/1086/<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://mp.weixin.qq.com/s/2teDwwIhyZ6BYIEQ_HL1vQ target=_blank>https://mp.weixin.qq.com/s/2teDwwIhyZ6BYIEQ_HL1vQ<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://zhuanlan.zhihu.com/p/64467370 target=_blank>https://zhuanlan.zhihu.com/p/64467370<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://doubibackup.com/6r9z6_wi-2.html target=_blank>https://doubibackup.com/6r9z6_wi-2.html<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://www.duyaoss.com/archives/2741/ target=_blank>https://www.duyaoss.com/archives/2741/<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://blog.revincx.icu/posts/proxy-summary/index.html target=_blank>https://blog.revincx.icu/posts/proxy-summary/index.html<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://ephen.me/2017/PublicDns_1/ target=_blank>https://ephen.me/2017/PublicDns_1/<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href="https://www.youtube.com/watch?v=Ty0n7AgcX0w" target=_blank>https://www.youtube.com/watch?v=Ty0n7AgcX0w<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li></ul><hr><div class=post-nav><a href="https://blog.timerring.com/posts/python-generator-iterator-and-decorator/?utm_source=nav">&lt;&lt; prev | Python...</a>
<a onclick=goToRandomPost() style=cursor:pointer>Continue strolling</a>
<a href="https://blog.timerring.com/posts/a-brief-introduction-to-dns/?utm_source=nav">A Brief... ｜ next >></a></div><hr>If you find this blog useful and want to support my blog, need my skill for something, or have a coffee chat with me, feel free to:<div class=support><a href=https://ko-fi.com/polls/What-is-the-custom-topic-for-the-next-month-C0C219LHQJ class=book-btn target=_blank>Subscribe to participate in blog topics and custom services</a>
<a href=https://ko-fi.com/timerring class=book-btn target=_blank>Buy me a coffee</a></div><div style=margin-bottom:8px></div><script>function goToRandomPost(){const e=["/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/danmaku-convert-analysis/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script></article><div class=book-comments><div class="book-tabs-content markdown-inner"><div id=tcomment></div><script src=https://giscus.app/client.js data-repo=timerring/blog data-repo-id=R_kgDONeZYZg data-category=Announcements data-category-id=DIC_kwDONeZYZs4ClRWs data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div></div><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><div class=busuanzi-footer><p style=text-align:center>&copy; 2022 - present <a href=https://github.com/timerring>timerring</a> | PV: <span id=busuanzi_value_site_pv></span> | UV: <span id=busuanzi_value_site_uv></span></p></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#basic-concepts>Basic concepts</a><ul><li><a href=#providers>Providers</a></li><li><a href=#network-circuits>Network Circuits</a><ul><li><a href=#public-network>Public Network</a></li><li><a href=#dedicated-network>Dedicated Network</a></li></ul></li><li><a href=#service-concepts>Service Concepts</a></li></ul></li><li><a href=#ip>IP</a><ul><li><a href=#ip-database>IP database</a></li><li><a href=#cellular-base-station>Cellular Base Station</a></li><li><a href=#check-ip>Check IP</a></li><li><a href=#ip-question>IP question</a></li><li><a href=#ip-attribution>IP attribution</a></li><li><a href=#native-ip>Native IP</a></li></ul></li><li><a href=#protocols>Protocols</a></li><li><a href=#dns>DNS</a><ul><li><a href=#cdn>CDN</a></li></ul></li><li><a href=#proxy>Proxy</a><ul><li><a href=#proxy-types>Proxy Types</a></li><li><a href=#ratio>Ratio</a></li><li><a href=#latency>Latency</a><ul><li><a href=#ping>PING</a></li><li><a href=#node-selection-mechanism>Node selection mechanism</a></li></ul></li></ul></li><li><a href=#strategy>Strategy</a><ul><li><a href=#traffic-diversion>Traffic diversion</a><ul><li><a href=#pac1>PAC1</a></li><li><a href=#router-traffic-diversion>Router traffic diversion</a></li><li><a href=#strategy-diversion>Strategy diversion</a></li></ul></li></ul></li><li><a href=#socks5>Socks5</a></li><li><a href=#vpn-vs-socks5>VPN vs Socks5</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></div></aside></main></body></html>