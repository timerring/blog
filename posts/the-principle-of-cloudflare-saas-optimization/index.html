<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In common situation, when you use the cloudflare to resolve your domain name, and you choose to use the cloudflare proxy(the yellow cloud icon), then cloudflare would probably get your domain resources into their CDN, that could be a good thing, but as we know, the network in mainland has some special rules, so for the free tier user, the access to the resources in the CDN would be somehow worse, even rest. That means, if the user connect to the node which has high latency, the request will experience worse. So this article will introduce some methods to help your resources access to the cloudflare nodes which are optimized for the mainland."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta name=keywords content="Why SaaS?,Common DNS resolution,Using cloudflare proxy,Using cloudflare for SaaS Optimization,The principle of SaaS,The problems you may doubt,Configure Cloudflare for SaaS,Step1: Configuration,Step2: Add custom hostnames then verify example,Step3: Search the optimized ip"><meta property="og:url" content="https://blogs.timerring.com/posts/the-principle-of-cloudflare-saas-optimization/"><meta property="og:site_name" content="timerring"><meta property="og:title" content="The principle of Cloudflare SaaS Optimization"><meta property="og:description" content="In common situation, when you use the cloudflare to resolve your domain name, and you choose to use the cloudflare proxy(the yellow cloud icon), then cloudflare would probably get your domain resources into their CDN, that could be a good thing, but as we know, the network in mainland has some special rules, so for the free tier user, the access to the resources in the CDN would be somehow worse, even rest. That means, if the user connect to the node which has high latency, the request will experience worse. So this article will introduce some methods to help your resources access to the cloudflare nodes which are optimized for the mainland."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-06-04T11:23:44+08:00"><meta property="article:tag" content="Cloudflare"><meta property="article:tag" content="DNS"><meta property="article:tag" content="CDN"><meta property="article:tag" content="Network"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-05-12-36-34.png"><meta itemprop=name content="The principle of Cloudflare SaaS Optimization"><meta itemprop=description content="In common situation, when you use the cloudflare to resolve your domain name, and you choose to use the cloudflare proxy(the yellow cloud icon), then cloudflare would probably get your domain resources into their CDN, that could be a good thing, but as we know, the network in mainland has some special rules, so for the free tier user, the access to the resources in the CDN would be somehow worse, even rest. That means, if the user connect to the node which has high latency, the request will experience worse. So this article will introduce some methods to help your resources access to the cloudflare nodes which are optimized for the mainland."><meta itemprop=datePublished content="2025-06-04T11:23:44+08:00"><meta itemprop=dateModified content="2025-06-04T11:23:44+08:00"><meta itemprop=wordCount content="1062"><meta itemprop=image content="https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-05-12-36-34.png"><meta itemprop=keywords content="Cloudflare,DNS,CDN,Network"><meta name=twitter:image content="https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-05-12-36-34.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="The principle of Cloudflare SaaS Optimization"><meta name=twitter:description content="In common situation, when you use the cloudflare to resolve your domain name, and you choose to use the cloudflare proxy(the yellow cloud icon), then cloudflare would probably get your domain resources into their CDN, that could be a good thing, but as we know, the network in mainland has some special rules, so for the free tier user, the access to the resources in the CDN would be somehow worse, even rest. That means, if the user connect to the node which has high latency, the request will experience worse. So this article will introduce some methods to help your resources access to the cloudflare nodes which are optimized for the mainland."><meta name=twitter:site content="@imjohnhowe"><link rel=canonical href=https://blogs.timerring.com/posts/the-principle-of-cloudflare-saas-optimization/><title>The principle of Cloudflare SaaS Optimization | timerring</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.62aea22f82250bab36134ee80decead727ff99e3b9fa099d48c8cedca7a6615f.css integrity="sha256-Yq6iL4IlC6s2E07oDezq1yf/meO5+gmdSMjO3KemYV8=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.d68413dded229ab4a48d9eb3181daa600abeae5141ebf4a936e40efec7f46d51.js integrity="sha256-1oQT3e0imrSkjZ6zGB2qYAq+rlFB6/SpNuQO/sf0bVE=" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-H5Y60NE14Z"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-H5Y60NE14Z")</script><script defer src=/live-photo.min.efe7b2a516404d0718a4c6f90d2eb2f9c0bd8c7bddd382958716bcb24b660970.js integrity="sha256-7+eypRZATQcYpMb5DS6y+cC9jHvd04KVhxa8sktmCXA=" crossorigin=anonymous></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1347694832132708" crossorigin=anonymous></script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css><meta name=msvalidate.01 content="5A88C236DD66D6E12DE1CA70A1E7BFE4"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/favicon.png alt=Logo><span>timerring</span></a></h2><hr><p>Rhythmic trend.</p><div class=book-search><div class=gcse-search></div></div><script async src="https://cse.google.com/cse.js?cx=40782701766144f96"></script><ul><li><a href=/>Dashboard</a></li><li><a href=/posts/>Blogs</a></li><li><a href=/categories/weekly/>Newsletter</a></li><li><a href=/index.xml>RSS</a></li><li><a href=/friends/>Friends</a></li><li><a href=/about/>About</a></li></ul><script>function goToRandomPost(){const e=["/posts/the-tips-of-macos-automator/?utm_source=random","/posts/mainland-network-circuits/?utm_source=random","/posts/cloudflare-warp/?utm_source=random","/posts/the-principle-of-cloudflare-saas-optimization/?utm_source=random","/posts/the-mitm-and-https-capturing/?utm_source=random","/posts/how-to-keep-your-mac-always-awake/?utm_source=random","/posts/the-way-to-get-cookie/?utm_source=random","/posts/how-to-choose-the-right-software-and-creative-license/?utm_source=random","/posts/0516-add-live-photo-effect-to-hugo/?utm_source=random","/posts/the-practice-of-resolving-domain/?utm_source=random","/posts/hidden-markov-models/?utm_source=random","/posts/markov-chains/?utm_source=random","/posts/markov-processes/?utm_source=random","/posts/0418-find-the-formula-rendering-issue-of-hugo/?utm_source=random","/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/stock-prices/?utm_source=random","/posts/possion-processes/?utm_source=random","/posts/docker-with-gpu/?utm_source=random","/posts/stochastic-processes/?utm_source=random","/posts/some-useful-tools/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-walks/?utm_source=random","/posts/sequences-of-random-variables/?utm_source=random","/posts/parameter-estimation/?utm_source=random","/posts/two-random-variables/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/some-useful-commands-to-share/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random","/posts/my-must-haves-for-macos-memo/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script><a class=random onclick=goToRandomPost()>Stroll</a></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>timerring</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#why-saas>Why SaaS?</a><ul><li><a href=#common-dns-resolution>Common DNS resolution</a></li><li><a href=#using-cloudflare-proxy>Using cloudflare proxy</a></li><li><a href=#using-cloudflare-for-saas-optimization>Using cloudflare for SaaS Optimization</a></li><li><a href=#the-principle-of-saas>The principle of SaaS</a></li><li><a href=#the-problems-you-may-doubt>The problems you may doubt</a></li></ul></li><li><a href=#configure-cloudflare-for-saas>Configure Cloudflare for SaaS</a><ul><li><a href=#step1-configuration>Step1: Configuration</a></li><li><a href=#step2-add-custom-hostnames-then-verify-examplehttpswwwsilverdragoncnarchives7484>Step2: Add custom hostnames then verify <a href=https://www.silverdragon.cn/archives/7484/>example</a></a></li><li><a href=#step3-search-the-optimized-ip>Step3: Search the optimized ip</a></li></ul></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></aside></header><article class=markdown><h1>The principle of Cloudflare SaaS Optimization</h1><h5>June 4, 2025
·
5 min read
<span id=busuanzi_container_page_pv>· Page View: <span id=busuanzi_value_page_pv></span></span></h5><div><a href=/categories/tutorial/ style=color:#000>Tutorial</a></div><div><a href=/tags/cloudflare/ style=color:#000>Cloudflare</a> <span style=color:#000>| </span><a href=/tags/dns/ style=color:#000>DNS</a> <span style=color:#000>| </span><a href=/tags/cdn/ style=color:#000>CDN</a> <span style=color:#000>| </span><a href=/tags/network/ style=color:#000>Network</a></div><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-05-12-36-34.png></p><p class=title-image><i>The SaaS process of Cloudflare</i></p><blockquote class="book-hint info">If you have any questions, feel free to comment below. Click the block can copy the code.<br>And if you think it's helpful to you, just click on the ads which can support this site. Thanks!</blockquote><hr><p>In common situation, when you use the cloudflare to resolve your domain name, and you choose to use the <code>cloudflare proxy</code>(the yellow cloud icon), then cloudflare would probably get your domain resources into their CDN, that could be a good thing, but as we know, the network in mainland has some special rules, so for the free tier user, the access to the resources in the CDN would be somehow worse, even <code>rest</code>. That means, if the user connect to the node which has high latency, the request will experience worse. So this article will introduce some methods to help your resources access to the cloudflare nodes which are optimized for the mainland.</p><h2 id=why-saas>Why SaaS?
<a class=anchor href=#why-saas>#</a></h2><p>So when I use some tools, I always ask myself why we use it? You should know more about the normal process.</p><h3 id=common-dns-resolution>Common DNS resolution
<a class=anchor href=#common-dns-resolution>#</a></h3><p>The most common process is the basic DNS resolution(if you are not familiar with DNS, you can read my blog <em><a href=https://blog.timerring.com/posts/a-brief-introduction-to-dns target=_blank rel="nofollow noopener">A Brief Introduction to DNS</a><sup><a href=#ref-link-1 class=footnote-ref id=ref-link-back-1>[1]</a></sup></em>), that is, you buy a server (which has public ip address eg. <code>1.1.1.1</code>), and deploy some services(eg. <code>blog</code>) on the server. Then you can visit <code>1.1.1.1:8080</code> to request the server. Actually, it&rsquo;s hard to memorize the ip. So normally we will buy a domain, and add a A record(for ipv4) to the DNS server(every ISP has it DNS server with the Namespace Server record), now we can visit <code>blog.timerring.com</code> to request the server, and we can ping <code>blog.timerring.com</code> to check the server ip is <code>1.1.1.1</code>.</p><h3 id=using-cloudflare-proxy>Using cloudflare proxy
<a class=anchor href=#using-cloudflare-proxy>#</a></h3><p>After a while, we found that there is a company called <code>cloudflare</code> which provides free https certificate, cdn acceleration, and hide my server ip&mldr; basically free, that&rsquo;s crazy! So we can use the cloudflare to resolve the domain name, then we change the Namespace server to the cloudflare, and the most important is <strong>Open the cloudflare proxy</strong>(the yellow cloud icon).</p><p>Then we can ping the domain <code>blog.timerring.com</code> to check that the server ip is already changed to <code>172.xx.xxx.xx</code>. Now, actually the visit process has changed to:</p><pre tabindex=0><code>blog.timerring.com -&gt; 172.xx.xxx.xx(Cloudflare) -&gt; 1.1.1.1
</code></pre><p>And the <code>172.xx.xxx.xx</code> is one of the ip node of cloudflare cdn, which is the ip of the cloudflare proxy. You can check my practice blog <em><a href=https://blog.timerring.com/posts/the-practice-of-resolving-domain/ target=_blank rel="nofollow noopener">The Practice of Resolving Domain</a><sup><a href=#ref-link-2 class=footnote-ref id=ref-link-back-2>[2]</a></sup></em> for more details.</p><h3 id=using-cloudflare-for-saas-optimization>Using cloudflare for SaaS Optimization
<a class=anchor href=#using-cloudflare-for-saas-optimization>#</a></h3><p><div class=image-desc><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-05-12-36-34.png alt="The flowchart of SaaS">
<i>The flowchart of SaaS</i></div></p><blockquote><p>Actually, the original intention of the SaaS is to forward the request to different domains(not hosted by cloudflare) to the cdn nodes and forward to the origin server.</p></blockquote><p>Imagine this scenario, in some special days due to some reason, you visit <code>blog.timerring.com</code> and you found that the blog is not available, and you can&rsquo;t access the <code>172.xx.xxx.xx</code> via ping either, the ip is blocked. So what should we do?</p><p>Well, we heard about that <code>visa.cn</code> is also using cloudflare, and it can be accessed all the time, and the access speed is much faster than mine. So can we borrow the IP assigned to <code>visa.cn</code> to access cloudflare, and then let cloudflare access my server? The answer is yes. So there will be 2 problems we should solve:</p><ol><li>I visit <code>blog.timerring.com</code> and I need to borrow the IP assigned to <code>visa.cn</code> to connect to cloudflare.</li><li>After connecting to cloudflare, cloudflare knows who I am, knows my server is which, and knows to forward my request to my server.</li></ol><p>Now for the solution:</p><ol><li>For the first problem, we can use DNS CNAME record to solve. <code>blog.timerring.com -> visa.cn</code>, then we visit can get the error 1016.</li><li>For the second problem, we can use the <code>SaaS</code> to solve.<div class=image-desc><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-04-11-44-34.png alt="The SaaS of Cloudflare">
<i>The SaaS of Cloudflare</i></div>From the image, you may curious about:<ol><li>how does the cloudflare cdn know where is my server?<ul><li>That is the <code>fallback origin</code>, the cloudflare will forward the request to the <code>fallback origin</code> if the request is not available in the cdn.</li></ul></li><li>how can the cloudflare know that these domain <code>www.custom1.com</code>, <code>shop.domain.com</code>&mldr; are my domain, and forward the request to my server?<ul><li>That is the <code>custom hostnames</code>, the cloudflare will forward the request which matches the <code>custom hostnames</code> to your <code>fallback origin</code>.</li></ul></li></ol></li></ol><h3 id=the-principle-of-saas>The principle of SaaS
<a class=anchor href=#the-principle-of-saas>#</a></h3><p>Now we know the principle of SaaS, it can be split into four steps:</p><ol><li>Use other domain such as <code>fallback.com</code> to connect to cloudflare cdn, and hosted by cloudflare.</li><li>Add a A record of eg.<code>cdn.fallback.com</code> to your server ip(eg 1.1.1.1), and use <code>cdn.fallback.com</code> as your fallback origin.</li><li>Now use your domain(which is hosted by other ISP) eg. <code>blog.timerring.com</code> add it to the cloudflare custom hostnames.</li><li>Finally, set the <code>blog.timerring.com</code> <strong>CNAME record</strong> to the optimized domain(eg.<code>visa.cn</code>) OR <strong>A record</strong> to the optimized ip.</li></ol><blockquote><p><strong>The core concept: the fallback origin has to connect to the cloudflare cdn, which means it has to be hosted by cloudflare and also use cloudflare proxy.</strong></p></blockquote><h3 id=the-problems-you-may-doubt>The problems you may doubt
<a class=anchor href=#the-problems-you-may-doubt>#</a></h3><p>Are you curious about why we need 2 domains? One for the cloudflare and one for the other ISP.</p><p>That is, if you only use one domain, its SLD(<code>blog.timerring.com</code> and <code>cdn.timerring.com</code>) are both hosted by cloudflare. While the <code>blog.timerring.com</code> CNAME record to <code>visa.cn</code>, and the <code>visa.cn</code> is also in the cloudflare cdn, then you will request will be sent to the visa directly. So you will encounter the error 1016.</p><p>So if you host your domain blog.timerring.com on other ISP, even there is <a href=https://linux.do/t/topic/162721 target=_blank rel="nofollow noopener">a success case</a><sup><a href=#ref-link-3 class=footnote-ref id=ref-link-back-3>[3]</a></sup>. But as I try, this would not work.</p><h2 id=configure-cloudflare-for-saas>Configure Cloudflare for SaaS
<a class=anchor href=#configure-cloudflare-for-saas>#</a></h2><p>Here we can use the <code>fallback origin</code> in the cloudflare(so called <code>SaaS</code>) to implement the optimized nodes and DDNS.</p><p>Eg, here we use 2 domains,</p><ul><li><code>fallback.com</code> which <strong>uses cloudflare resolution</strong> as the fallback origin.</li><li><code>mysite.com</code> which <strong>uses the other resolution</strong>, which is the domain we want to optimize.</li></ul><h3 id=step1-configuration>Step1: Configuration
<a class=anchor href=#step1-configuration>#</a></h3><p>Then we configure according to <a href=https://developers.cloudflare.com/cloudflare-for-platforms/cloudflare-for-saas/start/getting-started/ target=_blank rel="nofollow noopener">the docs</a><sup><a href=#ref-link-4 class=footnote-ref id=ref-link-back-4>[4]</a></sup>. Such as use <code>cdn.fallback.com</code> as the fallback origin, points to your server.</p><h3 id=step2-add-custom-hostnames-then-verify-examplehttpswwwsilverdragoncnarchives7484>Step2: Add custom hostnames then verify <a href=https://www.silverdragon.cn/archives/7484/ target=_blank rel="nofollow noopener">example</a><sup><a href=#ref-link-5 class=footnote-ref id=ref-link-back-5>[5]</a></sup>
<a class=anchor href=#step2-add-custom-hostnames-then-verify-examplehttpswwwsilverdragoncnarchives7484>#</a></h3><p>Here we add the <code>test.mysite.com</code> to <code>custom hostnames</code> in the cloudflare via the <strong>cloudflare SSL/TLS</strong> then verify. And we back to the platform which hosts this domain, and add a cname to the <code>cdn.fallback.com</code></p><h3 id=step3-search-the-optimized-ip>Step3: Search the optimized ip
<a class=anchor href=#step3-search-the-optimized-ip>#</a></h3><p>Here I use the opensource project <a href=https://github.com/XIU2/CloudflareSpeedTest target=_blank rel="nofollow noopener">CloudflareSpeedTest</a><sup><a href=#ref-link-6 class=footnote-ref id=ref-link-back-6>[6]</a></sup> to test and select the optimized ip. Also, you may doesn&rsquo;t want to select the ip manually. You can directly change the cname in Step2 to some domains which have already selected the ips. eg, <a href=https://www.wetest.vip/ target=_blank rel="nofollow noopener">wetest</a><sup><a href=#ref-link-7 class=footnote-ref id=ref-link-back-7>[7]</a></sup>.</p><div class=footnotes role=doc-endnotes><h3>References</h3><ol><li id=ref-link-1><a href=https://blog.timerring.com/posts/a-brief-introduction-to-dns target=_blank rel="nofollow noopener">https://blog.timerring.com/posts/a-brief-introduction-to-dns</a>
<a href=#ref-link-back-1 class=footnote-backref role=doc-backlink>↩︎</a></li><li id=ref-link-2><a href=https://blog.timerring.com/posts/the-practice-of-resolving-domain/ target=_blank rel="nofollow noopener">https://blog.timerring.com/posts/the-practice-of-resolving-domain/</a>
<a href=#ref-link-back-2 class=footnote-backref role=doc-backlink>↩︎</a></li><li id=ref-link-3><a href=https://linux.do/t/topic/162721 target=_blank rel="nofollow noopener">https://linux.do/t/topic/162721</a>
<a href=#ref-link-back-3 class=footnote-backref role=doc-backlink>↩︎</a></li><li id=ref-link-4><a href=https://developers.cloudflare.com/cloudflare-for-platforms/cloudflare-for-saas/start/getting-started/ target=_blank rel="nofollow noopener">https://developers.cloudflare.com/cloudflare-for-platforms/cloudflare-for-saas/start/getting-started/</a>
<a href=#ref-link-back-4 class=footnote-backref role=doc-backlink>↩︎</a></li><li id=ref-link-5><a href=https://www.silverdragon.cn/archives/7484/ target=_blank rel="nofollow noopener">https://www.silverdragon.cn/archives/7484/</a>
<a href=#ref-link-back-5 class=footnote-backref role=doc-backlink>↩︎</a></li><li id=ref-link-6><a href=https://github.com/XIU2/CloudflareSpeedTest target=_blank rel="nofollow noopener">https://github.com/XIU2/CloudflareSpeedTest</a>
<a href=#ref-link-back-6 class=footnote-backref role=doc-backlink>↩︎</a></li><li id=ref-link-7><a href=https://www.wetest.vip/ target=_blank rel="nofollow noopener">https://www.wetest.vip/</a>
<a href=#ref-link-back-7 class=footnote-backref role=doc-backlink>↩︎</a></li></ol></div><br><h2>Related readings</h2><ul><li><a href="/posts/the-practice-of-resolving-domain/?utm_source=related">The Practice of Resolving Domain</a></li><li><a href="/posts/understanding-clash-through-configuration/?utm_source=related">Understanding Clash Through Configuration</a></li><li><a href="/posts/a-brief-introduction-to-dns/?utm_source=related">A Brief Introduction to DNS</a></li><li><a href="/posts/real-computer-network/?utm_source=related">Real Computer Network</a></li><li><a href="/posts/the-mitm-and-https-capturing/?utm_source=related">The MitM and HTTPS Capturing</a></li></ul><hr><div class=post-nav><a href="https://blogs.timerring.com/posts/the-mitm-and-https-capturing/?utm_source=nav">&lt;&lt; prev | The MitM and...</a>
<a onclick=goToRandomPost() style=cursor:pointer>Continue strolling
</a><a href="https://blogs.timerring.com/posts/cloudflare-warp/?utm_source=nav">Cloudflare Warp ｜ next >></a></div><hr>If you want to follow my updates, or have a coffee chat with me, feel free to connect with me:<div class=support><a href=https://github.com/timerring class=book-btn target=_blank><i class="bi bi-github"></i>
Follow @timerring
</a><a href=https://x.com/imjohnhowe class=book-btn target=_blank><i class="bi bi-twitter-x"></i>
@imjohnhowe
</a><a href=https://www.zhihu.com/people/timerring class=book-btn target=_blank>知乎@timerring
</a><a href=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-05-17-20-54.png class=book-btn target=_blank><i class="bi bi-wechat"></i>
Official Account</a></div><div style=margin-bottom:8px></div><script>function goToRandomPost(){const e=["/posts/the-tips-of-macos-automator/?utm_source=random","/posts/mainland-network-circuits/?utm_source=random","/posts/cloudflare-warp/?utm_source=random","/posts/the-principle-of-cloudflare-saas-optimization/?utm_source=random","/posts/the-mitm-and-https-capturing/?utm_source=random","/posts/how-to-keep-your-mac-always-awake/?utm_source=random","/posts/the-way-to-get-cookie/?utm_source=random","/posts/how-to-choose-the-right-software-and-creative-license/?utm_source=random","/posts/0516-add-live-photo-effect-to-hugo/?utm_source=random","/posts/the-practice-of-resolving-domain/?utm_source=random","/posts/hidden-markov-models/?utm_source=random","/posts/markov-chains/?utm_source=random","/posts/markov-processes/?utm_source=random","/posts/0418-find-the-formula-rendering-issue-of-hugo/?utm_source=random","/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/stock-prices/?utm_source=random","/posts/possion-processes/?utm_source=random","/posts/docker-with-gpu/?utm_source=random","/posts/stochastic-processes/?utm_source=random","/posts/some-useful-tools/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-walks/?utm_source=random","/posts/sequences-of-random-variables/?utm_source=random","/posts/parameter-estimation/?utm_source=random","/posts/two-random-variables/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/some-useful-commands-to-share/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random","/posts/my-must-haves-for-macos-memo/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script></article><ins class=adsbygoogle style=display:block data-ad-format=fluid data-ad-layout-key=-c2+7a+0+1 data-ad-client=ca-pub-1347694832132708 data-ad-slot=5778132754></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><div class=busuanzi-footer><p style=text-align:center>&copy; 2022 - present <a href=https://github.com/timerring>timerring</a> | PV: <span id=busuanzi_value_site_pv></span> | UV: <span id=busuanzi_value_site_uv></span></p></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><h3>Table of Contents</h3><nav id=TableOfContents><ul><li><a href=#why-saas>Why SaaS?</a><ul><li><a href=#common-dns-resolution>Common DNS resolution</a></li><li><a href=#using-cloudflare-proxy>Using cloudflare proxy</a></li><li><a href=#using-cloudflare-for-saas-optimization>Using cloudflare for SaaS Optimization</a></li><li><a href=#the-principle-of-saas>The principle of SaaS</a></li><li><a href=#the-problems-you-may-doubt>The problems you may doubt</a></li></ul></li><li><a href=#configure-cloudflare-for-saas>Configure Cloudflare for SaaS</a><ul><li><a href=#step1-configuration>Step1: Configuration</a></li><li><a href=#step2-add-custom-hostnames-then-verify-examplehttpswwwsilverdragoncnarchives7484>Step2: Add custom hostnames then verify <a href=https://www.silverdragon.cn/archives/7484/>example</a></a></li><li><a href=#step3-search-the-optimized-ip>Step3: Search the optimized ip</a></li></ul></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style><h3>Connects</h3><a href=https://github.com/timerring target=_blank><img src=https://trendshift.io/api/badge/developers/8761 alt="timerring | Trendshift" style=width:250px;height:55px width=250 height=55></a><br><br><style>.github-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.github-stats-card:hover{transform:translateY(-2px)}.github-stats-card .icon{flex-shrink:0;font-size:14px;color:#06f}.github-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.github-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.github-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://github.com/timerring class=github-stats-card target=_blank rel="noopener noreferrer"><i class="bi bi-github" style=font-size:20px></i><div class=text-content><span class=title>Github: @timerring</span>
<span class=stats>Followers 145 - Stars 3.4k<br>Commits 1.4k - PRs 260</span></div></a><br><style>.x-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.x-stats-card:hover{transform:translateY(-2px)}.x-stats-card .icon{flex-shrink:0;font-size:14px;color:#06f}.x-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.x-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.x-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://x.com/imjohnhowe class=x-stats-card target=_blank rel="noopener noreferrer"><i class="bi bi-twitter-x" style=font-size:20px></i><div class=text-content><span class=title>X: @imjohnhowe</span>
<span class=stats>Followers 7 - Tweets 14</span></div></a><br><style>.linkedin-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.linkedin-stats-card:hover{transform:translateY(-2px)}.linkedin-stats-card .icon{flex-shrink:0;font-size:14px;color:#0966c2}.linkedin-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.linkedin-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.linkedin-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://www.linkedin.com/in/john-howe-zh/ class=linkedin-stats-card target=_blank rel="noopener noreferrer"><div class=icon><i class="bi bi-linkedin" style=font-size:20px></i></div><div class=text-content><span class=title>linkedin: @john-howe-zh</span>
<span class=stats>Welcome to connect with me</span></div></a><br><style>.zhihu-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.zhihu-stats-card:hover{transform:translateY(-2px)}.zhihu-stats-card .icon{flex-shrink:0;font-size:14px;color:#06f}.zhihu-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.zhihu-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.zhihu-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://www.zhihu.com/people/timerring class=zhihu-stats-card target=_blank rel="noopener noreferrer"><div class=icon>知乎</div><div class=text-content><span class=title>Zhihu(中文博客): @timerring</span>
<span class=stats>Followers 488 - Voteups 1.1k<br>Articles 259 - Answers 192</span></div></a><br><style>.wechatoa-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.wechatoa-stats-card:hover{transform:translateY(-2px)}.wechatoa-stats-card .icon{flex-shrink:0;font-size:14px;color:#06f}.wechatoa-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.wechatoa-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.wechatoa-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-06-13-23-14-18.png class=wechatoa-stats-card target=_blank rel="noopener noreferrer"><div class=icon><i class="bi bi-wechat" style=font-size:20px></i></div><div class=text-content><span class=title>Wechat Account @AIShareLab</span>
<span class=stats>Followers 1k<br>Just as a temporary chat.</span></div></a><br><style>.csdn-stats-card{display:flex;align-items:center;width:105%;gap:12px;font-size:14px;padding:10px 16px;border:1px solid #000;border-radius:8px;text-decoration:none;transition:all .2s ease-in-out}.csdn-stats-card:hover{transform:translateY(-2px)}.csdn-stats-card .icon{flex-shrink:0;font-size:8px;color:#fb5531}.csdn-stats-card .text-content{display:flex;flex-direction:column;text-align:left}.csdn-stats-card .title{font-size:12px;font-weight:500;color:#036;margin-bottom:2px}.csdn-stats-card .stats{font-size:12px;font-weight:600;color:#036;white-space:nowrap}</style><a href=https://blog.csdn.net/m0_52316372 class=csdn-stats-card target=_blank rel="noopener noreferrer"><div class=icon>CSDN</div><div class=text-content><span class=title>CSDN: @timerring</span>
<span class=stats>Followers 182k - Voteups 10k<br>Articles 556 - Collects 39k</span></div></a><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-1347694832132708 data-ad-slot=1676758726 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></aside></main></body></html>