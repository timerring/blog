<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="We can learn the proxy process of clash through the configuration file."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Understanding Clash Through Configuration"><meta property="og:description" content="We can learn the proxy process of clash through the configuration file."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.timerring.com/posts/understanding-clash-through-configuration/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-01-02T15:11:55+08:00"><meta property="article:modified_time" content="2025-01-02T15:11:55+08:00"><title>Understanding Clash Through Configuration | timerring</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.b2496f568c7d479e460b580e0e81d4b97841f83539eba8c770dc9f8e1aa7682e.css integrity="sha256-sklvVox9R55GC1gODoHUuXhB+DU566jHcNyfjhqnaC4=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.50c449057dc0a21a44211d152c7aa9bdf3703558287b2206574d867f59e5e0a2.js integrity="sha256-UMRJBX3AohpEIR0VLHqpvfNwNVgoeyIGV02Gf1nl4KI=" crossorigin=anonymous></script>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/favicon.png alt=Logo><span>timerring</span></a></h2><hr><p>Rhythmic trend.</p><div class=book-search><div class=gcse-search></div></div><script async src="https://cse.google.com/cse.js?cx=40782701766144f96"></script><ul><li><a href=/>Dashboard</a></li><li><a href=/posts/>Blogs</a></li><li><a href=/categories/weekly/>Newsletter</a></li><li><a href=/index.xml>RSS</a></li><li><a href=/friends/>Friends</a></li><li><a href=/about/>About</a></li></ul><script>function goToRandomPost(){const e=["/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script><a class=random onclick=goToRandomPost()>Stroll</a></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>timerring</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#about-configuration>About configuration</a><ul><li><a href=#basic>Basic</a></li><li><a href=#dns>DNS</a><ul><li><a href=#redir-host>Redir-Host</a></li><li><a href=#fake-ip>Fake IP</a></li></ul></li><li><a href=#proxies>proxies</a></li><li><a href=#proxy-groups>proxy-groups</a></li><li><a href=#rules>rules</a></li></ul></li><li><a href=#reference>Reference</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></aside></header><article class=markdown><h1>Understanding Clash Through Configuration</h1><h5>January 2, 2025
·
10 min read
<span id=busuanzi_container_page_pv>· Page View: <span id=busuanzi_value_page_pv></span></span></h5><div><a href=/categories/tutorial/ style=color:#000>Tutorial</a></div><div><a href=/tags/network/ style=color:#000>Network</a> <span style=color:#000>|</span>
<a href=/tags/proxy/ style=color:#000>Proxy</a> <span style=color:#000>|</span>
<a href=/tags/dns/ style=color:#000>DNS</a></div><p><img src=https://cdn.jsdelivr.net/gh/timerring/scratchpad2023/2024/2025-01-05-18-49-33.png></p><p class=title-image><i>Across the Great Wall we can reach every corner in the world. - 20:55 on September 20th, 1987.</i></p><blockquote class="book-hint info">If you have any questions, feel free to comment below.</blockquote><hr><p>We can learn the proxy process of clash through the configuration file.</p><h1 id=clash>Clash
<a class=anchor href=#clash>#</a></h1><p>Clash is a popular tool which can use different protocols to access the resources.</p><p>To use the proxy, you may have received the subscription link. So what&rsquo;s inside? We can dig it out.</p><h2 id=about-configuration>About configuration
<a class=anchor href=#about-configuration>#</a></h2><p>When you fill the subscription link into the Clash, you will get a configuration file.</p><p>I select some example items from the configuration file. And we&rsquo;re able to conduct a detailed analysis.</p><details><summary>A sample configuration file</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>mixed-port</span>:<span style=color:#bbb> </span><span style=color:#666>7890</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>allow-lan</span>:<span style=color:#bbb> </span><span style=color:green;font-weight:700>true</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>bind-address</span>:<span style=color:#bbb> </span><span style=color:#ba2121>&#39;*&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>mode</span>:<span style=color:#bbb> </span>rule<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>log-level</span>:<span style=color:#bbb> </span>info<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>external-controller</span>:<span style=color:#bbb> </span><span style=color:#ba2121>&#39;127.0.0.1:9090&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>dns</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>enable</span>:<span style=color:#bbb> </span><span style=color:green;font-weight:700>true</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>ipv6</span>:<span style=color:#bbb> </span><span style=color:green;font-weight:700>false</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>default-nameserver</span>:<span style=color:#bbb> </span>[<span style=color:#666>223.5.5.5</span>,<span style=color:#bbb> </span><span style=color:#666>119.29.29.29</span>]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>enhanced-mode</span>:<span style=color:#bbb> </span>fake-ip<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>fake-ip-range</span>:<span style=color:#bbb> </span><span style=color:#666>198.18.0.1</span>/16<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>use-hosts</span>:<span style=color:#bbb> </span><span style=color:green;font-weight:700>true</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>nameserver</span>:<span style=color:#bbb> </span>[<span style=color:#ba2121>&#39;https://doh.pub/dns-query&#39;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#39;https://dns.alidns.com/dns-query&#39;</span>]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>fallback</span>:<span style=color:#bbb> </span>[<span style=color:#ba2121>&#39;https://doh.dns.sb/dns-query&#39;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#39;https://dns.cloudflare.com/dns-query&#39;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#39;https://dns.twnic.tw/dns-query&#39;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#39;tls://8.8.4.4:853&#39;</span>]<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>fallback-filter</span>:<span style=color:#bbb> </span>{<span style=color:#bbb> </span><span style=color:green;font-weight:700>geoip: true, ipcidr</span>:<span style=color:#bbb> </span>[<span style=color:#666>240.0.0.0</span>/4, 0.0.0.0/32] }<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>proxies</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:#bbb> </span><span style=color:green;font-weight:700>name: HK02, type: ss, server: domain-or-ip, port: port-num, cipher: chacha20-ietf-poly1305, password: a-example-password, udp</span>:<span style=color:#bbb> </span><span style=color:green;font-weight:700>true</span><span style=color:#bbb> </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:#bbb> </span><span style=color:green;font-weight:700>name: &#39;HK03 x2&#39;, type: ss, server: domain-or-ip, port: port-num, cipher: chacha20-ietf-poly1305, password: a-example-password, udp</span>:<span style=color:#bbb> </span><span style=color:green;font-weight:700>true</span><span style=color:#bbb> </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>proxy-groups</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:#bbb> </span><span style=color:green;font-weight:700>name: custom-policy-group, type: select, proxies</span>:<span style=color:#bbb> </span>[HK02, &#39;HK03 x2&#39;] }<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:#bbb> </span><span style=color:green;font-weight:700>name: Netflix, type: select, proxies</span>:<span style=color:#bbb> </span>[HK02, &#39;HK03 x2&#39;] }<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:#bbb> </span><span style=color:green;font-weight:700>name: auto, type: url-test, proxies: [HK02, &#39;HK03 x2&#39;], url: &#39;http://www.gstatic.com/generate_204&#39;, interval</span>:<span style=color:#bbb> </span><span style=color:#666>86400</span><span style=color:#bbb> </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:#bbb> </span><span style=color:green;font-weight:700>name: fallback, type: fallback, proxies: [HK02, &#39;HK03 x2&#39;, &#39;Antarctic&#39;], url: &#39;http://www.gstatic.com/generate_204&#39;, interval</span>:<span style=color:#bbb> </span><span style=color:#666>7200</span><span style=color:#bbb> </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-SUFFIX,services.googleapis.cn,custom-policy-group&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-KEYWORD,netflixdnstest,Netflix&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN,netflix.com.edgesuite.net,Netflix&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-SUFFIX,fast.com,Netflix&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;IP-CIDR,8.41.4.0/24,Netflix,no-resolve&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;IP-CIDR,23.246.0.0/18,Netflix,no-resolve&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-KEYWORD,guanggao,REJECT&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-SUFFIX,icloud.com,DIRECT&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-SUFFIX,zhihu.com,DIRECT&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-KEYWORD,gmail,custom-policy-group&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;IP-CIDR,91.108.4.0/22,custom-policy-group,no-resolve&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;IP-CIDR6,2001:67c:4e8::/48,custom-policy-group,no-resolve&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-SUFFIX,cn,DIRECT&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-KEYWORD,-cn,DIRECT&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;GEOIP,CN,DIRECT&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;MATCH,custom-policy-group&#39;</span><span style=color:#bbb>
</span></span></span></code></pre></div></div></details><h3 id=basic>Basic
<a class=anchor href=#basic>#</a></h3><p>In the path, we can divide the locations where the traffic passes into three layers:</p><ol><li>From your traffic source to the proxy software, such as your browser to the Clash you use.</li><li>From the proxy software to the remote server, such as from the Clash you use to a server in Hong Kong.</li><li>From the remote server to the target server, such as from a server in Hong Kong to the Google server.</li></ol><p>But no matter what software you use, these software will listen on the specific port, which will take over the traffic to the port. Generally, the port will use socks5 or http proxy. Http only can proxy the http request. But socks5 can proxy the tcp or udp request.</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>mixed-port</span>:<span style=color:#bbb> </span><span style=color:#666>7890</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>allow-lan</span>:<span style=color:#bbb> </span><span style=color:green;font-weight:700>true</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>bind-address</span>:<span style=color:#bbb> </span><span style=color:#ba2121>&#39;*&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>mode</span>:<span style=color:#bbb> </span>rule<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>log-level</span>:<span style=color:#bbb> </span>info<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:green;font-weight:700>external-controller</span>:<span style=color:#bbb> </span><span style=color:#ba2121>&#39;127.0.0.1:9090&#39;</span><span style=color:#bbb>
</span></span></span></code></pre></div><p>The <code>mixed-port</code> is the port that HTTP(S) and SOCKS4(A)/SOCKS5 proxy services share to listen on.
The <code>allow-lan</code> is whether to allow connections from other LAN IP addresses.
The <code>bind-address</code> is the address that the proxy software listens on(Only valid when <code>allow-lan</code> is true).
The <code>mode</code> is the mode of the proxy software(rule, global, direct).
The <code>log-level</code> is the log level of the proxy software(info / warning / error / debug / silent).
The <code>external-controller</code> is the address that the RESTful Web API listens on.</p><h3 id=dns>DNS
<a class=anchor href=#dns>#</a></h3><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>dns</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>enable</span>:<span style=color:#bbb> </span><span style=color:green;font-weight:700>true</span><span style=color:#bbb> </span><span style=color:#408080;font-style:italic># Whether to enable DNS.</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>ipv6</span>:<span style=color:#bbb> </span><span style=color:green;font-weight:700>false</span><span style=color:#bbb> </span><span style=color:#408080;font-style:italic># Whether to enable IPv6.</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>default-nameserver</span>:<span style=color:#bbb> </span>[<span style=color:#666>223.5.5.5</span>,<span style=color:#bbb> </span><span style=color:#666>119.29.29.29</span>]<span style=color:#bbb> </span><span style=color:#408080;font-style:italic># The default DNS server.</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>enhanced-mode</span>:<span style=color:#bbb> </span>fake-ip<span style=color:#bbb> </span><span style=color:#408080;font-style:italic># Use fake IP to resolve the DNS request. https://www.rfc-editor.org/rfc/rfc3089</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>fake-ip-range</span>:<span style=color:#bbb> </span><span style=color:#666>198.18.0.1</span>/16<span style=color:#bbb> </span><span style=color:#408080;font-style:italic># The CIDR of fake IP.</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>use-hosts</span>:<span style=color:#bbb> </span><span style=color:green;font-weight:700>true</span><span style=color:#bbb> </span><span style=color:#408080;font-style:italic># Whether to use the hosts file to resolve.</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>nameserver</span>:<span style=color:#bbb> </span>[<span style=color:#ba2121>&#39;https://doh.pub/dns-query&#39;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#39;https://dns.alidns.com/dns-query&#39;</span>]<span style=color:#bbb> </span><span style=color:#408080;font-style:italic># The DoH server.</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>fallback</span>:<span style=color:#bbb> </span>[<span style=color:#ba2121>&#39;https://doh.dns.sb/dns-query&#39;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#39;https://dns.cloudflare.com/dns-query&#39;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#39;https://dns.twnic.tw/dns-query&#39;</span>,<span style=color:#bbb> </span><span style=color:#ba2121>&#39;tls://8.8.4.4:853&#39;</span>]<span style=color:#bbb> </span><span style=color:#408080;font-style:italic># The fallback DNS server.</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span><span style=color:green;font-weight:700>fallback-filter</span>:<span style=color:#bbb> </span>{<span style=color:#bbb> </span><span style=color:green;font-weight:700>geoip: true, ipcidr</span>:<span style=color:#bbb> </span>[<span style=color:#666>240.0.0.0</span>/4, 0.0.0.0/32] }<span style=color:#bbb> </span><span style=color:#408080;font-style:italic># The fallback filter.</span><span style=color:#bbb>
</span></span></span></code></pre></div><h4 id=redir-host>Redir-Host
<a class=anchor href=#redir-host>#</a></h4><p>The redir-host mode and fake-ip mode are the two modes of <code>TAP/TUN</code>. And most softwares will not use the system proxy, so the proxy system virtualize a network interface which takes over all the traffic(that&rsquo;s what our phones do). <strong>So the <code>TAP/TUN</code> mode is working on the network layer</strong>, so it can not get the domain name, it can only get the IP address. So it will use other methods to get the domain name, the mothod is intercepting the DNS request at the 53 port and maintain a mapping table. <strong>When the terminal sends a DNS request, it will first check the mapping table, if the domain name is in the mapping table, then it will directly return the IP address. If the domain name is not in the mapping table, then it will send the DNS request to the DNS server, and then update the mapping table.</strong></p><blockquote><p>You can refer to my <a href=/posts/real-computer-network/>Real Computer Network</a> to understand the OSI model.</p><p>Besides, the <code>TAP/TUN</code> mode will not be able to encapsulate network layer data packets, so it isn&rsquo;t the VPN(only can encapsulate the network layer data packets can implement the remote networking and can be called as VPN, the feature of VPN is obvious, that means it can be detected easily). Some commands in the network layer(eg. ICMP protocol) like <code>ping</code> will not work. The ttl is the latency between the terminal and the virtual network interface.(If it uses the <code>fake-ip</code> mode, then the ip of target domain such as <code>google.com</code> is also a fake ip).</p></blockquote><p>But if multiple domains are deployed on the same IP, or are polluted to the same IP, then the redir-host will not work(except for Sniff). In this case, the clash will use the fallback DNS(nomorally use the overseas encrypted DNS server to avoid pollution) to resolve the DNS request. But the IP returned is just used as a key in the mapping table, does it really matter? That&rsquo;s why the fake-ip mode appears.</p><p>The default nameserver means the DNS server that the local clash will use to resolve the DNS request, usually used in local resolution(direct mode). If the domain needs proxy, then use the fallback DNS to resolve the DNS request. Fallback means if the default DNS server returns a foreign IP(Always redirect to the unknown foreign IP), then use the fallback DNS servers return to make sure the foreign IP is not polluted.</p><p>The Classless Inter-Domain Routing (CIDR) is a method of allocating IP addresses. And the default CIDR of fake IP is <code>198.18.0.1/16</code>, which is a reserved IP address. When the DNS request is sent to <strong>Clash DNS</strong>, the Clash kernel will allocate an idle fake-ip address from the pool through the management of the internal domain name and its fake-ip address mapping.</p><p>eg. You can find that the 198.18.1.79 is a fake IP, which is allocated by the Clash kernel.</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>base ❯ curl -v http://google.com
</span></span><span style=display:flex><span>&lt;---- cURL asks your system DNS <span style=color:#666>(</span>Clash<span style=color:#666>)</span> about the IP address of google.com
</span></span><span style=display:flex><span>* Host google.com:80 was resolved.
</span></span><span style=display:flex><span>* IPv6: <span style=color:#666>(</span>none<span style=color:#666>)</span>
</span></span><span style=display:flex><span>* IPv4: 198.18.1.79
</span></span><span style=display:flex><span>----&gt; Clash allocates 198.18.1.79 as google.com
</span></span><span style=display:flex><span>*   Trying 198.18.1.79:80...
</span></span><span style=display:flex><span>&lt;---- cURL connects to 198.18.1.79 tcp/80
</span></span><span style=display:flex><span>----&gt; Clash will accept the connection immediately
</span></span><span style=display:flex><span>* Connected to google.com <span style=color:#666>(</span>198.18.1.79<span style=color:#666>)</span> port <span style=color:#666>80</span>
</span></span><span style=display:flex><span>----&gt; Clash looks up in its memory and found 198.18.1.79 being google.com
</span></span><span style=display:flex><span>----&gt; Clash looks up in the rules and sends the packet via the matching outbound
</span></span><span style=display:flex><span>&gt; GET / HTTP/1.1
</span></span><span style=display:flex><span>&gt; Host: google.com
</span></span><span style=display:flex><span>&gt; User-Agent: curl/8.7.1
</span></span><span style=display:flex><span>&gt; Accept: */*
</span></span><span style=display:flex><span>&gt;
</span></span><span style=display:flex><span>* Request completely sent off
</span></span><span style=display:flex><span>&lt; HTTP/1.1 <span style=color:#666>301</span> Moved Permanently
</span></span><span style=display:flex><span>......
</span></span></code></pre></div><h4 id=fake-ip>Fake IP
<a class=anchor href=#fake-ip>#</a></h4><p>Why fake IP?</p><p>Some regions not only block the specific IP, but also pollute the DNS. In other words, the domain name is resolved to an incorrect IP. Due to the feature of TCP/IP, when the application initiates a TCP connection, it first sends a DNS question (sends an IP Packet), obtains the IP address of the server to be connected, and then directly connects to this IP address.</p><p><strong>So we need to proxy the DNS request</strong>. The process is that the request needs to be examined locally first, (if needs proxy) then request the remote server DNS, then return the resolution result. Then the clash core maps the IP address to the domain, and then match the rules. In this process, you can find that the DNS request is not necessary. Because the IP returned is just used as a key with the value(domain), but if the fake ip occasionally match specific rules, and was redirected wrongly, which will cause the failure of visiting. Considering these issues, the official has stopped the redir-host mode directly. So, the Fake-IP technology appears.</p><p>But in fake IP, the clash core will directly return a fake IP to the client. And the client will use the fake IP to request the resource. Then in the clash core will map the fake IP to the domain name. And then use the domain name to match the rules. <strong>This will omit the DNS request</strong>. Which not only saves time, but also avoids the DNS leakage.</p><p>But it still has some problems, because any system has a DNS cache mechanism. If one day, due to some reason, you need to turn off the proxy software, then the client will not get any response when requesting this fake IP. You need to manually refresh the system DNS cache to solve it.</p><h3 id=proxies>proxies
<a class=anchor href=#proxies>#</a></h3><p>Then let&rsquo;s talk about the proxies. About the ratio of the proxy, I have written a lot in the <a href=/posts/real-computer-network/>Real Computer Network</a>. You can review it.</p><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>proxies</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:#bbb> </span><span style=color:green;font-weight:700>name: HK02, type: ss, server: domain-or-ip, port: port-num, cipher: chacha20-ietf-poly1305, password: a-example-password, udp</span>:<span style=color:#bbb> </span><span style=color:green;font-weight:700>true</span><span style=color:#bbb> </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:#bbb> </span><span style=color:green;font-weight:700>name: &#39;HK03 x2&#39;, type: ss, server: domain-or-ip, port: port-num, cipher: chacha20-ietf-poly1305, password: a-example-password, udp</span>:<span style=color:#bbb> </span><span style=color:green;font-weight:700>true</span><span style=color:#bbb> </span>}<span style=color:#bbb>
</span></span></span></code></pre></div><p>The <strong>type</strong> is <code>ss</code>, which means the proxy is using the Shadowsocks protocol.</p><p>The <strong>udp</strong> is to enable the UDP proxy. Or you will not be able to proxy the UDP even in the tun mode.</p><p>The <strong>cipher</strong> is the encryption method of the proxy server. The <code>chacha20-ietf-poly1305</code> is the encryption method of password. And the encryption methods which are supported by the Shadowsocks protocol are:</p><ul><li><code>aes-128-gcm</code></li><li><code>aes-192-gcm</code></li><li><code>aes-256-gcm</code></li><li><code>aes-128-cfb</code></li><li><code>aes-192-cfb</code></li><li><code>aes-256-cfb</code></li><li><code>aes-128-ctr</code></li><li><code>aes-192-ctr</code></li><li><code>aes-256-ctr</code></li><li><code>rc4-md5</code></li><li><code>chacha20-ietf</code></li><li><code>xchacha20</code></li><li><code>chacha20-ietf-poly1305</code></li><li><code>xchacha20-ietf-poly1305</code></li></ul><h3 id=proxy-groups>proxy-groups
<a class=anchor href=#proxy-groups>#</a></h3><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>proxy-groups</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:#bbb> </span><span style=color:green;font-weight:700>name: custom-policy-group, type: select, proxies</span>:<span style=color:#bbb> </span>[HK02, &#39;HK03 x2&#39;] }<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:#bbb> </span><span style=color:green;font-weight:700>name: Netflix, type: select, proxies</span>:<span style=color:#bbb> </span>[HK02, &#39;HK03 x2&#39;] }<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:#bbb> </span><span style=color:green;font-weight:700>name: auto, type: url-test, proxies: [HK02, &#39;HK03 x2&#39;], url: &#39;http://www.gstatic.com/generate_204&#39;, interval</span>:<span style=color:#bbb> </span><span style=color:#666>86400</span><span style=color:#bbb> </span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- {<span style=color:#bbb> </span><span style=color:green;font-weight:700>name: fallback, type: fallback, proxies: [HK02, &#39;HK03 x2&#39;, &#39;Antarctic&#39;], url: &#39;http://www.gstatic.com/generate_204&#39;, interval</span>:<span style=color:#bbb> </span><span style=color:#666>7200</span><span style=color:#bbb> </span>}<span style=color:#bbb>
</span></span></span></code></pre></div><p>The proxy-groups can be understood as filters one after another. So when you send a request, at which filter it will be intercepted depends on the match between the request and the rules. You should choose a meaningful name for the proxy-group. The type mainly includes four types:</p><ul><li><code>select</code>: Select the proxy manually in the proxy-group.</li><li><code>url-test</code>: Test the response time of the proxy-group. And use the proxy with the shortest response time. The url is used to ensure the connection to network to test the response time. <code>204</code> is the response code of the <code>no content</code> page. For more information, you can refer to the <a href=https://datatracker.ietf.org/doc/html/rfc7231#section-6.3.5 target=_blank>rfc7231<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>.</li><li><code>fallback</code>: Use the first proxy of the proxy-group, if breakdown, use the second proxy of the proxy-group&mldr;</li><li><code>load-balance</code>: Use the proxy with the least number of connections.</li><li><code>relay</code>: The traffic will be relayed through the proxies in order in the proxy-group. (Not support UDP).</li></ul><h3 id=rules>rules
<a class=anchor href=#rules>#</a></h3><p>The basic format of the rules is:</p><pre tabindex=0><code>TYPE,ARGUMENT,POLICY(,no-resolve)
</code></pre><div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:green;font-weight:700>rules</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-SUFFIX,services.googleapis.cn,custom-policy-group&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-KEYWORD,netflixdnstest,Netflix&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN,netflix.com.edgesuite.net,Netflix&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-SUFFIX,fast.com,Netflix&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;IP-CIDR,8.41.4.0/24,Netflix,no-resolve&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;IP-CIDR,23.246.0.0/18,Netflix,no-resolve&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-KEYWORD,guanggao,REJECT&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-SUFFIX,icloud.com,DIRECT&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-SUFFIX,zhihu.com,DIRECT&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-KEYWORD,gmail,custom-policy-group&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;IP-CIDR,91.108.4.0/22,custom-policy-group,no-resolve&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;IP-CIDR6,2001:67c:4e8::/48,custom-policy-group,no-resolve&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-SUFFIX,cn,DIRECT&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;DOMAIN-KEYWORD,-cn,DIRECT&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;GEOIP,CN,DIRECT&#39;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb>    </span>- <span style=color:#ba2121>&#39;MATCH,custom-policy-group&#39;</span><span style=color:#bbb>
</span></span></span></code></pre></div><ul><li><code>DOMAIN</code>: route the request match the DOMAIN to the POLICY.</li><li><code>DOMAIN-SUFFIX</code>: route the request match the domain suffix to the POLICY.</li><li><code>DOMAIN-KEYWORD</code>: route the request match the domain keyword to the POLICY.</li><li><code>IP-CIDR</code>: route the request match the IPv4 address to the POLICY. (if you want to skip DNS resolution, add the <code>no-resolve</code> option, then the domain will not be resolved, so it cannot match the rules, and directly skip this rule)</li><li><code>IP-CIDR6</code>: route the request match the IPv6 address to the POLICY. (if you want to skip DNS resolution, add the <code>no-resolve</code> option)</li><li><code>GEOIP</code>: route the request match the country to the POLICY. Use the <a href=https://dev.maxmind.com/geoip/geolite2-free-geolocation-data/ target=_blank>geolite2<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a> database. Clash will resolve the domain name to the IP address, then find the country code of the IP address. If you want to skip DNS resolution, add the <code>no-resolve</code> option. eg. <code>'GEOIP,CN,DIRECT'</code> redirect the request targeting <code>CN</code> ip to the DIRECT policy.</li><li><code>MATCH</code>: route the remaining request to the POLICY.</li></ul><p>For more info, you canrefer to the <a href=https://en.clash.wiki/configuration/rules.html target=_blank>Clash Rules<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a>.</p><h2 id=reference>Reference
<a class=anchor href=#reference>#</a></h2><ul><li><a href=https://www.pupboss.com/post/2024/clash-tun-fake-ip-best-practice/ target=_blank>https://www.pupboss.com/post/2024/clash-tun-fake-ip-best-practice/<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href=https://blog.skk.moe/post/what-happend-to-dns-in-proxy/ target=_blank>https://blog.skk.moe/post/what-happend-to-dns-in-proxy/<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li><li><a href="https://www.youtube.com/watch?v=qItL005LUik" target=_blank>https://www.youtube.com/watch?v=qItL005LUik<span style=white-space:nowrap><svg width=".7em" height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg"><path d="m13 3 3.293 3.293-7 7 1.414 1.414 7-7L21 11V3z" fill="currentcolor"/><path d="M19 19H5V5h7l-2-2H5c-1.103.0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103.0 2-.897 2-2v-5l-2-2v7z" fill="currentcolor"/></span></a></li></ul><h2>Related readings</h2><ul><li><a href="/posts/a-brief-introduction-to-dns/?utm_source=related">A Brief Introduction to DNS</a></li><li><a href="/posts/real-computer-network/?utm_source=related">Real Computer Network</a></li></ul><hr><div class=post-nav><a href="https://blog.timerring.com/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=nav">&lt;&lt; prev | Thinking About...</a>
<a onclick=goToRandomPost() style=cursor:pointer>Continue strolling</a>
<a href="https://blog.timerring.com/posts/mail-service-and-protocol/?utm_source=nav">Mail Service... ｜ next >></a></div><hr>If you find this blog useful and want to support my blog, need my skill for something, or have a coffee chat with me, feel free to:<div class=support><a href=https://ko-fi.com/polls/What-is-the-custom-topic-for-the-next-month-C0C219LHQJ class=book-btn target=_blank>Subscribe to participate in blog topics and custom services</a>
<a href=https://ko-fi.com/timerring class=book-btn target=_blank>Buy me a coffee</a></div><div style=margin-bottom:8px></div><script>function goToRandomPost(){const e=["/posts/multi-platform-builds-docker/?utm_source=random","/posts/0404-The-invitation-only-mechanism-from-clubhouse-to-manus/?utm_source=random","/posts/how-to-use-git-submodule/?utm_source=random","/posts/live-streaming-infra-and-protocols/?utm_source=random","/posts/implement-danmaku-rendering-algorithm-from-scratch/?utm_source=random","/posts/is-there-an-rss-renaissance-in-the-ai-era/?utm_source=random","/posts/a-shopping-experience-in-pangdonglai-supermarket/?utm_source=random","/posts/langchain-and-rag-best-practices/?utm_source=random","/posts/random-variables/?utm_source=random","/posts/repeated-trials/?utm_source=random","/posts/probability-and-its-axioms/?utm_source=random","/posts/further-understanding-of-proc/?utm_source=random","/posts/the-iftop/?utm_source=random","/posts/reflections-on-trending-topics/?utm_source=random","/posts/cpu-can-only-see-the-threads/?utm_source=random","/posts/go-common-test/?utm_source=random","/posts/go-concurrency-and-parallelism/?utm_source=random","/posts/go-cheatsheet/?utm_source=random","/posts/video-technology-101/?utm_source=random","/posts/the-main-kind-of-message-queue/?utm_source=random","/posts/the-method-to-manage-traffic/?utm_source=random","/posts/the-different-kind-of-api-design/?utm_source=random","/posts/the-encode-and-decode-in-python/?utm_source=random","/posts/about-the-systemd/?utm_source=random","/posts/the-tips-about-dockerfile/?utm_source=random","/posts/docker-cheatsheet/?utm_source=random","/posts/docker-101/?utm_source=random","/posts/the-instance-class-static-magic-method-in-python/?utm_source=random","/posts/the-review-and-plan-for-bilive/?utm_source=random","/posts/the-overview-of-security/?utm_source=random","/posts/how-to-publish-your-code-as-a-pip-module/?utm_source=random","/posts/some-good-things-to-share-about-the-packages/?utm_source=random","/posts/introduction-to-the-http-and-https-protocol/?utm_source=random","/posts/mail-service-and-protocol/?utm_source=random","/posts/understanding-clash-through-configuration/?utm_source=random","/posts/thinking-about-advertisement-from-an-open-source-perspective/?utm_source=random","/posts/a-brief-introduction-to-dns/?utm_source=random","/posts/real-computer-network/?utm_source=random","/posts/python-generator-iterator-and-decorator/?utm_source=random","/posts/python-underlying-mechanism/?utm_source=random","/posts/python-files-exceptions-and-modules/?utm_source=random","/posts/python-object-oriented-programming/?utm_source=random","/posts/python-cheatsheet/?utm_source=random","/posts/python-function-parameter/?utm_source=random","/posts/python-control-structure/?utm_source=random","/posts/python-composite-data-type/?utm_source=random","/posts/python-basic-data-type/?utm_source=random","/posts/python-basic-syntax-elements/?utm_source=random","/posts/deploy-github-pages-with-gpg-signing/?utm_source=random","/posts/gpg-101/?utm_source=random","/posts/housewarming-2024/?utm_source=random"],t=Math.floor(Math.random()*e.length);window.location.href=e[t]}</script></article><div class=book-comments><div class="book-tabs-content markdown-inner"><div id=tcomment></div><script src=https://giscus.app/client.js data-repo=timerring/blog data-repo-id=R_kgDONeZYZg data-category=Announcements data-category-id=DIC_kwDONeZYZs4ClRWs data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div></div><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><div class=busuanzi-footer><p style=text-align:center>&copy; 2022 - present <a href=https://github.com/timerring>timerring</a> | PV: <span id=busuanzi_value_site_pv></span> | UV: <span id=busuanzi_value_site_uv></span></p></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#about-configuration>About configuration</a><ul><li><a href=#basic>Basic</a></li><li><a href=#dns>DNS</a><ul><li><a href=#redir-host>Redir-Host</a></li><li><a href=#fake-ip>Fake IP</a></li></ul></li><li><a href=#proxies>proxies</a></li><li><a href=#proxy-groups>proxy-groups</a></li><li><a href=#rules>rules</a></li></ul></li><li><a href=#reference>Reference</a></li></ul></nav><style>.book-toc .book-toc-content a{color:var(--body-font-color)}</style></div></aside></main></body></html>